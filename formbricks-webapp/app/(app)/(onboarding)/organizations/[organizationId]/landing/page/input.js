(() => {
var exports = {};
exports.id = 2242;
exports.ids = [2242];
exports.modules = {

/***/ 191043:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ 741000:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-presigned-post");

/***/ }),

/***/ 531701:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ 896330:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ 560483:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client/scripts/default-index.js");

/***/ }),

/***/ 710846:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.prod.js");

/***/ }),

/***/ 419121:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ 903295:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ 529294:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ 663033:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ 912412:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 979428:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 455511:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 594735:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 629021:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 79748:
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ 781630:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 55591:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 491645:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 321820:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 333873:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 111723:
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ 927910:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 134631:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 583997:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 379551:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 328354:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 173566:
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ 74075:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 504573:
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ 977598:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 973024:
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ 937067:
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ 344708:
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ 777030:
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ 176760:
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ 1708:
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ 157075:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ 337830:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ 173136:
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ 257975:
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ 638522:
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ 856993:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(290735);
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(291232);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(272914);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(240085);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
const module0 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 86397));
const module1 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 836653));
const module2 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 956791));
const module3 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module4 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module5 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 524160));
const module6 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module7 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module8 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 720017));
const module9 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 380589));
const page10 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 351378));


// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        '(app)',
        {
        children: [
        '(onboarding)',
        {
        children: [
        'organizations',
        {
        children: [
        '[organizationId]',
        {
        children: [
        'landing',
        {
        children: ['__PAGE__', {}, {
          page: [page10, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/landing/page.tsx"],
          
        }]
      },
        {
        'layout': [module9, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/landing/layout.tsx"],
        
      }
      ]
      },
        {
        'layout': [module8, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/layout.tsx"],
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module5, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/layout.tsx"],
'forbidden': [module6, "next/dist/client/components/forbidden-error"],
'unauthorized': [module7, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      },
        {
        'layout': [module0, "/Users/kdy1/projects/formbricks/apps/web/app/layout.tsx"],
'error': [module1, "/Users/kdy1/projects/formbricks/apps/web/app/error.tsx"],
'not-found': [module2, "/Users/kdy1/projects/formbricks/apps/web/app/not-found.tsx"],
'forbidden': [module3, "next/dist/client/components/forbidden-error"],
'unauthorized': [module4, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      }.children;
const pages = ["/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/landing/page.tsx"];


const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({
    definition: {
        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/(app)/(onboarding)/organizations/[organizationId]/landing/page",
        pathname: "/organizations/[organizationId]/landing",
        // The following aren't used in production.
        bundlePath: '',
        filename: '',
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 1606:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "7f11f2efac37ac84796e6cb223722dbe2e808e177f": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.mi),
/* harmony export */   "7f12957c3365cc2950bdc48f0118f82439eb6c23ec": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Dp),
/* harmony export */   "7f20db167926d501ff62b9525526548773c8a436d4": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.l5),
/* harmony export */   "7f36cf02b548a01d85112f587591e8c1e8390fa538": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Xj),
/* harmony export */   "7f4f2c9c8b657cf906e9a25e65dafac6ec65967916": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.O0),
/* harmony export */   "7f540889be00b7aa8c6ff1edc5cd79ece876954fd3": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.I_),
/* harmony export */   "7f60061b4b6be335eaa2facd1c5d8129b87f6923f4": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Bx),
/* harmony export */   "7f670a0537f96de8b5156e1b206124b2a990484370": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.CG),
/* harmony export */   "7f74bd40a1f82de833915085152910f3ebd525b356": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Uo),
/* harmony export */   "7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Wy),
/* harmony export */   "7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.bH),
/* harmony export */   "7fc6abb0838b6422ef7e81141fd6603883cd1990cf": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.YE),
/* harmony export */   "7fc856fe5dd5f698d2f54dacf4280d447336780427": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Z0),
/* harmony export */   "7fcda0e6bf50febdf861015e25ebdf74068a488dde": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.bl),
/* harmony export */   "7fcfea9518c327899180b23cb3055005ba65cdef33": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.rg),
/* harmony export */   "7fdb06c584a2145e0f48be9ead409fc7f774731fde": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.uc),
/* harmony export */   "7fdcbaf3445e783557d350b55d91be1398fafca7d3": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.zv),
/* harmony export */   "7fe763f2c0d5f307cc75c26f23c693a54ac24a3112": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.U1),
/* harmony export */   "7ff27151c29d7402abd744ae983a2c25b016ccf26f": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_modules_organization_actions_ts__WEBPACK_IMPORTED_MODULE_1__.s),
/* harmony export */   "7ffb22c619704253744e9b5fea4eccca8b0808fb64": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.kn)
/* harmony export */ });
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(883212);
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_modules_organization_actions_ts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57841);























/***/ }),

/***/ 795882:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 401528));


/***/ }),

/***/ 958930:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 535968));


/***/ }),

/***/ 142912:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 776741));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 300620));


/***/ }),

/***/ 6464:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 104061));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 961060));


/***/ }),

/***/ 587032:
/***/ (() => {



/***/ }),

/***/ 580408:
/***/ (() => {



/***/ }),

/***/ 535968:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LandingSidebar: () => (/* binding */ LandingSidebar)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_lib_formbricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(909013);
/* harmony import */ var _images_formbricks_wordmark_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(775337);
/* harmony import */ var _modules_organization_components_CreateOrganizationModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(571404);
/* harmony import */ var _modules_ui_components_avatars__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(939514);
/* harmony import */ var _modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(556825);
/* harmony import */ var _tolgee_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(397674);
/* harmony import */ var _barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(620394);
/* harmony import */ var _barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(115758);
/* harmony import */ var _barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(65433);
/* harmony import */ var _barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(108996);
/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(902446);
/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(134088);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(36888);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(470207);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(983773);
/* harmony import */ var _formbricks_lib_utils_strings__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92018);
/* __next_internal_client_entry_do_not_use__ LandingSidebar auto */ 














const LandingSidebar = ({ isMultiOrgEnabled, user, organization, organizations })=>{
    const [openCreateOrganizationModal, setOpenCreateOrganizationModal] = (0,react__WEBPACK_IMPORTED_MODULE_10__.useState)(false);
    const { t } = (0,_tolgee_react__WEBPACK_IMPORTED_MODULE_11__/* .useTranslate */ .WD)();
    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_9__.useRouter)();
    const handleEnvironmentChangeByOrganization = (organizationId)=>{
        router.push(`/organizations/${organizationId}/`);
    };
    const dropdownNavigation = [
        {
            label: t("common.documentation"),
            href: "https://formbricks.com/docs",
            target: "_blank",
            icon: _barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A
        }
    ];
    const currentOrganizationId = organization?.id;
    const currentOrganizationName = (0,_formbricks_lib_utils_strings__WEBPACK_IMPORTED_MODULE_13__/* .capitalizeFirstLetter */ .Zr)(organization?.name);
    const sortedOrganizations = (0,react__WEBPACK_IMPORTED_MODULE_10__.useMemo)(()=>{
        return [
            ...organizations
        ].sort((a, b)=>a.name.localeCompare(b.name));
    }, [
        organizations
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("aside", {
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_14__.cn)("w-sidebar-collapsed z-40 flex flex-col justify-between rounded-r-xl border-r border-slate-200 bg-white pt-3 shadow-md transition-all duration-100"),
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_7__["default"], {
                src: _images_formbricks_wordmark_svg__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A,
                width: 160,
                height: 30,
                alt: t("environments.formbricks_logo")
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "flex items-center",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenu */ .rI, {
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuTrigger */ .ty, {
                            asChild: true,
                            id: "userDropdownTrigger",
                            className: "w-full rounded-br-xl border-t py-4 pl-4 transition-colors duration-200 hover:bg-slate-50 focus:outline-none",
                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                tabIndex: 0,
                                className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_14__.cn)("flex cursor-pointer flex-row items-center space-x-3"),
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_avatars__WEBPACK_IMPORTED_MODULE_4__/* .ProfileAvatar */ .T, {
                                        userId: user.id,
                                        imageUrl: user.imageUrl
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                                                        title: user?.email,
                                                        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_14__.cn)("ph-no-capture ph-no-capture -mb-0.5 max-w-28 truncate text-sm font-bold text-slate-700"),
                                                        children: user?.name ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                                            children: user?.name
                                                        }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                                            children: user?.email
                                                        })
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                                                        title: (0,_formbricks_lib_utils_strings__WEBPACK_IMPORTED_MODULE_13__/* .capitalizeFirstLetter */ .Zr)(organization?.name),
                                                        className: "max-w-28 truncate text-sm text-slate-500",
                                                        children: (0,_formbricks_lib_utils_strings__WEBPACK_IMPORTED_MODULE_13__/* .capitalizeFirstLetter */ .Zr)(organization?.name)
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A, {
                                                className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_14__.cn)("h-5 w-5 text-slate-700 hover:text-slate-500")
                                            })
                                        ]
                                    })
                                ]
                            })
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuContent */ .SQ, {
                            id: "userDropdownInnerContentWrapper",
                            side: "right",
                            sideOffset: 10,
                            alignOffset: 5,
                            align: "end",
                            children: [
                                dropdownNavigation.map((link)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)((next_link__WEBPACK_IMPORTED_MODULE_8___default()), {
                                        href: link.href,
                                        target: link.target,
                                        className: "flex w-full items-center",
                                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuItem */ ._2, {
                                            children: [
                                                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(link.icon, {
                                                    className: "mr-2 h-4 w-4",
                                                    strokeWidth: 1.5
                                                }),
                                                link.label
                                            ]
                                        })
                                    })),
                                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuItem */ ._2, {
                                    onClick: async ()=>{
                                        await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_6__.signOut)({
                                            callbackUrl: "/auth/login"
                                        });
                                        await (0,_app_lib_formbricks__WEBPACK_IMPORTED_MODULE_1__/* .formbricksLogout */ .X)();
                                    },
                                    icon: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .A, {
                                        className: "mr-2 h-4 w-4",
                                        strokeWidth: 1.5
                                    }),
                                    children: t("common.logout")
                                }),
                                (isMultiOrgEnabled || organizations.length > 1) && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuSub */ .lv, {
                                    children: [
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuSubTrigger */ .nV, {
                                            className: "rounded-lg",
                                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                                                        children: currentOrganizationName
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                                                        className: "block text-xs text-slate-500",
                                                        children: t("common.switch_organization")
                                                    })
                                                ]
                                            })
                                        }),
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuPortal */ .dc, {
                                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuSubContent */ .M5, {
                                                sideOffset: 10,
                                                alignOffset: 5,
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuRadioGroup */ .Hr, {
                                                        value: currentOrganizationId,
                                                        onValueChange: (organizationId)=>handleEnvironmentChangeByOrganization(organizationId),
                                                        children: sortedOrganizations.map((organization)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuRadioItem */ .Ht, {
                                                                value: organization.id,
                                                                className: "cursor-pointer rounded-lg",
                                                                children: organization.name
                                                            }, organization.id))
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuSeparator */ .mB, {}),
                                                    isMultiOrgEnabled && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_5__/* .DropdownMenuItem */ ._2, {
                                                        onClick: ()=>setOpenCreateOrganizationModal(true),
                                                        icon: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowUpRightIcon_ChevronRightIcon_LogOutIcon_PlusIcon_lucide_react__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .A, {
                                                            className: "mr-2 h-4 w-4"
                                                        }),
                                                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                                            children: t("common.create_new_organization")
                                                        })
                                                    })
                                                ]
                                            })
                                        })
                                    ]
                                })
                            ]
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_organization_components_CreateOrganizationModal__WEBPACK_IMPORTED_MODULE_3__/* .CreateOrganizationModal */ .X, {
                open: openCreateOrganizationModal,
                setOpen: setOpenCreateOrganizationModal
            })
        ]
    });
};


/***/ }),

/***/ 366947:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Smartphone)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Smartphone = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Smartphone", [
    [
        "rect",
        {
            width: "14",
            height: "20",
            x: "5",
            y: "2",
            rx: "2",
            ry: "2",
            key: "1yt0o3"
        }
    ],
    [
        "path",
        {
            d: "M12 18h.01",
            key: "mhygvu"
        }
    ]
]);
 //# sourceMappingURL=smartphone.js.map


/***/ }),

/***/ 983773:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cn: () => (/* binding */ cn)
/* harmony export */ });
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(553626);
/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(550186);


const cn = (...inputs)=>{
    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__/* .twMerge */ .QP)((0,clsx__WEBPACK_IMPORTED_MODULE_1__/* .clsx */ .$)(inputs));
};


/***/ }),

/***/ 401528:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LandingSidebar: () => (/* binding */ LandingSidebar)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const LandingSidebar = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call LandingSidebar() from the server but LandingSidebar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/landing/components/landing-sidebar.tsx",
"LandingSidebar",
);

/***/ }),

/***/ 380589:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(136015);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(145796);
/* harmony import */ var _formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32135);
/* harmony import */ var _formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(377968);
/* harmony import */ var _formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(529987);







const LandingLayout = async (props)=>{
    const params = await props.params;
    const { children } = props;
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_1__/* .authOptions */ .N);
    if (!session || !session.user) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.redirect)(`/auth/login`);
    }
    const membership = await (0,_formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_4__/* .getMembershipByUserIdOrganizationId */ .Y)(session.user.id, params.organizationId);
    if (!membership) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.notFound)();
    }
    const projects = await (0,_formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_5__/* .getUserProjects */ ._P)(session.user.id, params.organizationId);
    if (projects.length !== 0) {
        const firstProject = projects[0];
        const environments = await (0,_formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_6__/* .getEnvironments */ .DL)(firstProject.id);
        const prodEnvironment = environments.find((e)=>e.type === "production");
        if (prodEnvironment) {
            return (0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.redirect)(`/environments/${prodEnvironment.id}/`);
        }
    }
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: children
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LandingLayout);


/***/ }),

/***/ 351378:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_app_onboarding_organizations_organizationId_landing_components_landing_sidebar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(401528);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(136015);
/* harmony import */ var _modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(532077);
/* harmony import */ var _modules_ui_components_header__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(27287);
/* harmony import */ var _tolgee_server__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(186184);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(145796);
/* harmony import */ var _formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(353687);
/* harmony import */ var _formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(184511);










const Page = async (props)=>{
    const params = await props.params;
    const t = await (0,_tolgee_server__WEBPACK_IMPORTED_MODULE_5__/* .getTranslate */ .r)();
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_6__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__/* .authOptions */ .N);
    if (!session || !session.user) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_7__.redirect)(`/auth/login`);
    }
    const user = await (0,_formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_8__/* .getUser */ .wz)(session.user.id);
    if (!user) return (0,next_navigation__WEBPACK_IMPORTED_MODULE_7__.notFound)();
    const organization = await (0,_formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_9__/* .getOrganization */ .SA)(params.organizationId);
    if (!organization) return (0,next_navigation__WEBPACK_IMPORTED_MODULE_7__.notFound)();
    const organizations = await (0,_formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_9__/* .getOrganizationsByUserId */ .s8)(session.user.id);
    const { features } = await (0,_modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_3__/* .getEnterpriseLicense */ .Zd)();
    const isMultiOrgEnabled = features?.isMultiOrgEnabled ?? false;
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "flex min-h-full min-w-full flex-row",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_app_onboarding_organizations_organizationId_landing_components_landing_sidebar__WEBPACK_IMPORTED_MODULE_1__.LandingSidebar, {
                user: user,
                organization: organization,
                isMultiOrgEnabled: isMultiOrgEnabled,
                organizations: organizations
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "flex-1",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                    className: "flex h-full flex-col items-center justify-center space-y-12",
                    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_header__WEBPACK_IMPORTED_MODULE_4__/* .Header */ .Y, {
                        title: t("organizations.landing.no_projects_warning_title"),
                        subtitle: t("organizations.landing.no_projects_warning_subtitle")
                    })
                })
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Page);


/***/ }),

/***/ 720017:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_app_environments_environmentId_components_PosthogIdentify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(776741);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(136015);
/* harmony import */ var _modules_ui_components_toaster_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(300620);
/* harmony import */ var _tolgee_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(186184);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(145796);
/* harmony import */ var _formbricks_lib_organization_auth__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(937440);
/* harmony import */ var _formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(353687);
/* harmony import */ var _formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(184511);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(470641);











const ProjectOnboardingLayout = async (props)=>{
    const params = await props.params;
    const { children } = props;
    const t = await (0,_tolgee_server__WEBPACK_IMPORTED_MODULE_4__/* .getTranslate */ .r)();
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_5__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__/* .authOptions */ .N);
    if (!session || !session.user) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_6__.redirect)(`/auth/login`);
    }
    const user = await (0,_formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_7__/* .getUser */ .wz)(session.user.id);
    if (!user) {
        throw new Error(t("common.user_not_found"));
    }
    const isAuthorized = await (0,_formbricks_lib_organization_auth__WEBPACK_IMPORTED_MODULE_8__/* .canUserAccessOrganization */ .h)(session.user.id, params.organizationId);
    if (!isAuthorized) {
        throw _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_9__/* .AuthorizationError */ .yi;
    }
    const organization = await (0,_formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_10__/* .getOrganization */ .SA)(params.organizationId);
    if (!organization) {
        throw new Error(t("common.organization_not_found"));
    }
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "flex-1 bg-slate-50",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_app_environments_environmentId_components_PosthogIdentify__WEBPACK_IMPORTED_MODULE_1__.PosthogIdentify, {
                session: session,
                user: user,
                organizationId: organization.id,
                organizationName: organization.name,
                organizationBilling: organization.billing
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_toaster_client__WEBPACK_IMPORTED_MODULE_3__.ToasterClient, {}),
            children
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ProjectOnboardingLayout);


/***/ }),

/***/ 725322:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  KH: () => (/* binding */ getIsAIEnabled),
  dZ: () => (/* binding */ getIsContactsEnabled),
  pn: () => (/* binding */ getIsMultiOrgEnabled),
  PN: () => (/* binding */ getIsOrganizationAIReady),
  LO: () => (/* binding */ getIsTwoFactorAuthEnabled),
  x: () => (/* binding */ getMultiLanguagePermission),
  Df: () => (/* binding */ getOrganizationProjectsLimit),
  tr: () => (/* binding */ getRemoveBrandingPermission),
  rQ: () => (/* binding */ getRoleManagementPermission),
  nX: () => (/* binding */ getWhiteLabelPermission)
});

// UNUSED EXPORTS: fetchLicense, getBiggerUploadFileSizePermission, getEnterpriseLicense, getIsSSOEnabled, getLicenseFeatures

// EXTERNAL MODULE: ../../node_modules/https-proxy-agent/dist/index.js
var dist = __webpack_require__(876930);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/server.js
var server = __webpack_require__(995971);
// EXTERNAL MODULE: ./node_modules/node-fetch/src/index.js + 12 modules
var src = __webpack_require__(11886);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js
var react = __webpack_require__(645625);
// EXTERNAL MODULE: ../../packages/database/src/index.ts + 1 modules
var database_src = __webpack_require__(482859);
// EXTERNAL MODULE: ../../packages/lib/cache.ts
var cache = __webpack_require__(48165);
// EXTERNAL MODULE: ../../node_modules/next/cache.js
var next_cache = __webpack_require__(310256);
// EXTERNAL MODULE: ../../packages/lib/constants.ts
var constants = __webpack_require__(711344);
// EXTERNAL MODULE: ../../packages/lib/env.ts
var env = __webpack_require__(333258);
// EXTERNAL MODULE: external "crypto"
var external_crypto_ = __webpack_require__(455511);
var external_crypto_default = /*#__PURE__*/__webpack_require__.n(external_crypto_);
;// ../../packages/lib/hashString.ts

const hashString = (string)=>{
    return external_crypto_default().createHash("sha256").update(string).digest("hex");
};

;// ./modules/ee/license-check/lib/utils.ts










const hashedKey = constants/* ENTERPRISE_LICENSE_KEY */.an ? hashString(constants/* ENTERPRISE_LICENSE_KEY */.an) : undefined;
const PREVIOUS_RESULTS_CACHE_TAG_KEY = `getPreviousResult-${hashedKey}`;
// This function is used to get the previous result of the license check from the cache
// This might seem confusing at first since we only return the default value from this function,
// but since we are using a cache and the cache key is the same, the cache will return the previous result - so this function acts as a cache getter
const getPreviousResult = ()=>(0,cache/* cache */.P)(async ()=>({
            active: null,
            lastChecked: new Date(0),
            features: null
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
// This function is used to set the previous result of the license check to the cache so that we can use it in the next call
// Uses the same cache key as the getPreviousResult function
const setPreviousResult = async (previousResult)=>{
    const { lastChecked, active, features } = previousResult;
    await (0,cache/* cache */.P)(async ()=>({
            active,
            lastChecked,
            features
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
    (0,server.after)(()=>{
        (0,next_cache.revalidateTag)(PREVIOUS_RESULTS_CACHE_TAG_KEY);
    });
};
const fetchLicenseForE2ETesting = async ()=>{
    const currentTime = new Date();
    try {
        const previousResult = await getPreviousResult();
        if (previousResult.lastChecked.getTime() === new Date(0).getTime()) {
            // first call
            const newResult = {
                active: true,
                features: {
                    isMultiOrgEnabled: true,
                    twoFactorAuth: true,
                    sso: true,
                    contacts: true,
                    projects: 3,
                    whitelabel: true,
                    removeBranding: true,
                    ai: true
                },
                lastChecked: currentTime
            };
            await setPreviousResult(newResult);
            return newResult;
        } else if (currentTime.getTime() - previousResult.lastChecked.getTime() > 60 * 60 * 1000) {
            // Fail after 1 hour
            console.log("E2E_TESTING is enabled. Enterprise license was revoked after 1 hour.");
            return null;
        }
        return previousResult;
    } catch (error) {
        console.error("Error fetching license: ", error);
        return null;
    }
};
const getEnterpriseLicense = async ()=>{
    if (!constants/* ENTERPRISE_LICENSE_KEY */.an || constants/* ENTERPRISE_LICENSE_KEY */.an.length === 0) {
        return {
            active: false,
            features: null,
            lastChecked: new Date()
        };
    }
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return {
            active: previousResult?.active ?? false,
            features: previousResult ? previousResult.features : null,
            lastChecked: previousResult ? previousResult.lastChecked : new Date()
        };
    }
    // if the server responds with a boolean, we return it
    // if the server errors, we return null
    // null signifies an error
    const license = await fetchLicense();
    const isValid = license ? license.status === "active" : null;
    const threeDaysInMillis = 3 * 24 * 60 * 60 * 1000;
    const currentTime = new Date();
    const previousResult = await getPreviousResult();
    // Case: First time checking license and the server errors out
    if (previousResult.active === null) {
        if (isValid === null) {
            const newResult = {
                active: false,
                features: {
                    isMultiOrgEnabled: false,
                    projects: 3,
                    twoFactorAuth: false,
                    sso: false,
                    whitelabel: false,
                    removeBranding: false,
                    contacts: false,
                    ai: false
                },
                lastChecked: new Date()
            };
            await setPreviousResult(newResult);
            return newResult;
        }
    }
    if (isValid !== null && license) {
        const newResult = {
            active: isValid,
            features: license.features,
            lastChecked: new Date()
        };
        await setPreviousResult(newResult);
        return newResult;
    } else {
        // if result is undefined -> error
        // if the last check was less than 72 hours, return the previous value:
        const elapsedTime = currentTime.getTime() - previousResult.lastChecked.getTime();
        if (elapsedTime < threeDaysInMillis) {
            return {
                active: previousResult.active !== null ? previousResult.active : false,
                features: previousResult.features,
                lastChecked: previousResult.lastChecked,
                isPendingDowngrade: true
            };
        }
        // Log error only after 72 hours
        console.error("Error while checking license: The license check failed");
        return {
            active: false,
            features: null,
            lastChecked: previousResult.lastChecked,
            isPendingDowngrade: true
        };
    }
};
const getLicenseFeatures = async ()=>{
    const previousResult = await getPreviousResult();
    if (previousResult.features) {
        return previousResult.features;
    } else {
        const license = await fetchLicense();
        if (!license || !license.features) return null;
        return license.features;
    }
};
const fetchLicense = (0,react.cache)(async ()=>(0,cache/* cache */.P)(async ()=>{
        if (!env/* env */._.ENTERPRISE_LICENSE_KEY) return null;
        try {
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 1); // January 1st of the current year
            const endOfYear = new Date(now.getFullYear() + 1, 0, 0); // December 31st of the current year
            const responseCount = await database_src/* prisma */.z.response.count({
                where: {
                    createdAt: {
                        gte: startOfYear,
                        lt: endOfYear
                    }
                }
            });
            const proxyUrl = env/* env */._.HTTPS_PROXY || env/* env */._.HTTP_PROXY;
            const agent = proxyUrl ? new dist.HttpsProxyAgent(proxyUrl) : undefined;
            const res = await (0,src/* default */.Ay)("https://ee.formbricks.com/api/licenses/check", {
                body: JSON.stringify({
                    licenseKey: constants/* ENTERPRISE_LICENSE_KEY */.an,
                    usage: {
                        responseCount: responseCount
                    }
                }),
                headers: {
                    "Content-Type": "application/json"
                },
                method: "POST",
                agent
            });
            if (res.ok) {
                const responseJson = await res.json();
                return responseJson.data;
            }
            return null;
        } catch (error) {
            console.error("Error while checking license: ", error);
            return null;
        }
    }, [
        `fetchLicense-${hashedKey}`
    ], {
        revalidate: 60 * 60 * 24
    })());
const getRemoveBrandingPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.removeBranding ?? false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.removeBranding;
    }
};
const getWhiteLabelPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.whitelabel ?? false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.whitelabel;
    }
};
const getRoleManagementPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getBiggerUploadFileSizePermission = async (organization)=>{
    if (IS_FORMBRICKS_CLOUD) return organization.billing.plan !== PROJECT_FEATURE_KEYS.FREE;
    else if (!IS_FORMBRICKS_CLOUD) return (await getEnterpriseLicense()).active;
    return false;
};
const getMultiLanguagePermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getIsMultiOrgEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.isMultiOrgEnabled : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.isMultiOrgEnabled;
};
const getIsContactsEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.contacts : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.contacts;
};
const getIsTwoFactorAuthEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.twoFactorAuth : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.twoFactorAuth;
};
const getIsSSOEnabled = async ()=>{
    if (E2E_TESTING) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.sso : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.sso;
};
const getIsOrganizationAIReady = async (billingPlan)=>{
    if (!constants/* IS_AI_CONFIGURED */.T1) return false;
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.ai : false;
    }
    const license = await getEnterpriseLicense();
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) {
        return Boolean(license.features?.ai && billingPlan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE);
    }
    return Boolean(license.features?.ai);
};
const getIsAIEnabled = async (organization)=>{
    return organization.isAIEnabled && await getIsOrganizationAIReady(organization.billing.plan);
};
const getOrganizationProjectsLimit = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.projects ?? Infinity : 3;
    }
    let limit;
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        limit = organization.billing.limits.projects ?? Infinity;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) {
            limit = 3;
        } else {
            limit = licenseFeatures.projects ?? Infinity;
        }
    }
    return limit;
};


/***/ }),

/***/ 27287:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ Header)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(922728);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


const Header = ({ title, subtitle })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "space-y-8 text-center",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                className: "text-4xl font-medium text-slate-800",
                children: title
            }),
            subtitle && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                className: "text-slate-500",
                children: subtitle
            })
        ]
    });
};


/***/ }),

/***/ 488734:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ environmentCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const environmentCache = {
    tag: {
        byId (id) {
            return `environments-${id}`;
        },
        byProjectId (projectId) {
            return `projects-${projectId}-environments`;
        }
    },
    revalidate ({ id, projectId: projectId }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (projectId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byProjectId(projectId));
        }
    }
};


/***/ }),

/***/ 32135:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DL: () => (/* binding */ getEnvironments),
/* harmony export */   aN: () => (/* binding */ getFirstEnvironmentIdByUserId),
/* harmony export */   h8: () => (/* binding */ updateEnvironment),
/* harmony export */   uc: () => (/* binding */ getEnvironment)
/* harmony export */ });
/* unused harmony export createEnvironment */
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(896330);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(922728);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(545198);
/* harmony import */ var _formbricks_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(527610);
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(733735);
/* harmony import */ var _formbricks_types_environment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(65405);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(470641);
/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(794356);
/* harmony import */ var _organization_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(353687);
/* harmony import */ var _project_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(529987);
/* harmony import */ var _utils_validate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(860988);
/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(488734);














const getEnvironment = (0,react__WEBPACK_IMPORTED_MODULE_1__.cache)(async (environmentId)=>(0,_cache__WEBPACK_IMPORTED_MODULE_3__/* .cache */ .P)(async ()=>{
        (0,_utils_validate__WEBPACK_IMPORTED_MODULE_4__/* .validateInputs */ .C)([
            environmentId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_5__/* .ZId */ .i4
        ]);
        try {
            const environment = await _formbricks_database__WEBPACK_IMPORTED_MODULE_2__/* .prisma */ .z.environment.findUnique({
                where: {
                    id: environmentId
                }
            });
            return environment;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError) {
                console.error(error);
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_6__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `getEnvironment-${environmentId}`
    ], {
        tags: [
            _cache__WEBPACK_IMPORTED_MODULE_7__/* .environmentCache */ .e.tag.byId(environmentId)
        ]
    })());
const getEnvironments = (0,react__WEBPACK_IMPORTED_MODULE_1__.cache)(async (projectId)=>(0,_cache__WEBPACK_IMPORTED_MODULE_3__/* .cache */ .P)(async ()=>{
        (0,_utils_validate__WEBPACK_IMPORTED_MODULE_4__/* .validateInputs */ .C)([
            projectId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_5__/* .ZId */ .i4
        ]);
        let projectPrisma;
        try {
            projectPrisma = await _formbricks_database__WEBPACK_IMPORTED_MODULE_2__/* .prisma */ .z.project.findFirst({
                where: {
                    id: projectId
                },
                include: {
                    environments: true
                }
            });
            if (!projectPrisma) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_6__/* .ResourceNotFoundError */ .CE("Project", projectId);
            }
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_6__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
        const environments = [];
        for (let environment of projectPrisma.environments){
            let targetEnvironment = _formbricks_types_environment__WEBPACK_IMPORTED_MODULE_8__/* .ZEnvironment */ .KJ.parse(environment);
            environments.push(targetEnvironment);
        }
        try {
            return environments;
        } catch (error) {
            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_9__.z.ZodError) {
                console.error(JSON.stringify(error.errors, null, 2));
            }
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_6__/* .ValidationError */ .yI("Data validation of environments array failed");
        }
    }, [
        `getEnvironments-${projectId}`
    ], {
        tags: [
            _cache__WEBPACK_IMPORTED_MODULE_7__/* .environmentCache */ .e.tag.byProjectId(projectId)
        ]
    })());
const updateEnvironment = async (environmentId, data)=>{
    (0,_utils_validate__WEBPACK_IMPORTED_MODULE_4__/* .validateInputs */ .C)([
        environmentId,
        _formbricks_types_common__WEBPACK_IMPORTED_MODULE_5__/* .ZId */ .i4
    ], [
        data,
        _formbricks_types_environment__WEBPACK_IMPORTED_MODULE_8__/* .ZEnvironmentUpdateInput */ .fz.partial()
    ]);
    const newData = {
        ...data,
        updatedAt: new Date()
    };
    let updatedEnvironment;
    try {
        updatedEnvironment = await _formbricks_database__WEBPACK_IMPORTED_MODULE_2__/* .prisma */ .z.environment.update({
            where: {
                id: environmentId
            },
            data: newData
        });
        _cache__WEBPACK_IMPORTED_MODULE_7__/* .environmentCache */ .e.revalidate({
            id: environmentId,
            projectId: updatedEnvironment.projectId
        });
        return updatedEnvironment;
    } catch (error) {
        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError) {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_6__/* .DatabaseError */ .a$(error.message);
        }
        throw error;
    }
};
const getFirstEnvironmentIdByUserId = async (userId)=>{
    try {
        const organizations = await (0,_organization_service__WEBPACK_IMPORTED_MODULE_10__/* .getOrganizationsByUserId */ .s8)(userId);
        if (organizations.length === 0) {
            return null;
        }
        const firstOrganization = organizations[0];
        const projects = await (0,_project_service__WEBPACK_IMPORTED_MODULE_11__/* .getUserProjects */ ._P)(userId, firstOrganization.id);
        if (projects.length === 0) {
            return null;
        }
        const firstProject = projects[0];
        const productionEnvironment = firstProject.environments.find((environment)=>environment.type === "production");
        if (!productionEnvironment) {
            return null;
        }
        return productionEnvironment.id;
    } catch (error) {
        throw error;
    }
};
const createEnvironment = async (projectId, environmentInput)=>{
    validateInputs([
        projectId,
        ZId
    ], [
        environmentInput,
        ZEnvironmentCreateInput
    ]);
    try {
        const environment = await prisma.environment.create({
            data: {
                type: environmentInput.type || "development",
                project: {
                    connect: {
                        id: projectId
                    }
                },
                appSetupCompleted: environmentInput.appSetupCompleted || false,
                actionClasses: {
                    create: [
                        {
                            name: "New Session",
                            description: "Gets fired when a new session is created",
                            type: "automatic"
                        }
                    ]
                },
                attributeKeys: {
                    create: [
                        {
                            key: "userId",
                            name: "User Id",
                            description: "The user id of a contact",
                            type: "default",
                            isUnique: true
                        },
                        {
                            key: "email",
                            name: "Email",
                            description: "The email of a contact",
                            type: "default",
                            isUnique: true
                        },
                        {
                            key: "firstName",
                            name: "First Name",
                            description: "Your contact's first name",
                            type: "default"
                        },
                        {
                            key: "lastName",
                            name: "Last Name",
                            description: "Your contact's last name",
                            type: "default"
                        }
                    ]
                }
            }
        });
        environmentCache.revalidate({
            id: environment.id,
            projectId: environment.projectId
        });
        await capturePosthogEnvironmentEvent(environment.id, "environment created", {
            environmentType: environment.type
        });
        return environment;
    } catch (error) {
        if (error instanceof Prisma.PrismaClientKnownRequestError) {
            throw new DatabaseError(error.message);
        }
        throw error;
    }
};


/***/ }),

/***/ 937440:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ verifyUserRoleAccess),
/* harmony export */   h: () => (/* binding */ canUserAccessOrganization)
/* harmony export */ });
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(733735);
/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(794356);
/* harmony import */ var _membership_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(377968);
/* harmony import */ var _membership_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(159570);
/* harmony import */ var _organization_cache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(530190);
/* harmony import */ var _utils_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(860988);
/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(353687);








const canUserAccessOrganization = (userId, organizationId)=>(0,_cache__WEBPACK_IMPORTED_MODULE_0__/* .cache */ .P)(async ()=>{
        (0,_utils_validate__WEBPACK_IMPORTED_MODULE_1__/* .validateInputs */ .C)([
            userId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_2__/* .ZId */ .i4
        ], [
            organizationId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_2__/* .ZId */ .i4
        ]);
        try {
            const userOrganizations = await (0,_service__WEBPACK_IMPORTED_MODULE_3__/* .getOrganizationsByUserId */ .s8)(userId);
            const givenOrganizationExists = userOrganizations.filter((organization)=>organization.id = organizationId);
            if (!givenOrganizationExists) {
                return false;
            }
            return true;
        } catch (error) {
            throw error;
        }
    }, [
        `canUserAccessOrganization-${userId}-${organizationId}`
    ], {
        tags: [
            _organization_cache__WEBPACK_IMPORTED_MODULE_4__/* .organizationCache */ .S.tag.byId(organizationId)
        ]
    })();
const verifyUserRoleAccess = async (organizationId, userId)=>{
    const accessObject = {
        hasCreateOrUpdateAccess: true,
        hasDeleteAccess: true,
        hasCreateOrUpdateMembersAccess: true,
        hasDeleteMembersAccess: true,
        hasBillingAccess: true
    };
    const currentUserMembership = await (0,_membership_service__WEBPACK_IMPORTED_MODULE_5__/* .getMembershipByUserIdOrganizationId */ .Y)(userId, organizationId);
    const { isOwner, isManager } = (0,_membership_utils__WEBPACK_IMPORTED_MODULE_6__/* .getAccessFlags */ .c)(currentUserMembership?.role);
    if (!isOwner) {
        accessObject.hasCreateOrUpdateAccess = false;
        accessObject.hasDeleteAccess = false;
        accessObject.hasCreateOrUpdateMembersAccess = false;
        accessObject.hasDeleteMembersAccess = false;
        accessObject.hasBillingAccess = false;
    }
    if (isManager) {
        accessObject.hasCreateOrUpdateMembersAccess = true;
        accessObject.hasDeleteMembersAccess = true;
        accessObject.hasBillingAccess = true;
    }
    return accessObject;
};


/***/ }),

/***/ 65405:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KJ: () => (/* binding */ ZEnvironment),
/* harmony export */   fz: () => (/* binding */ ZEnvironmentUpdateInput)
/* harmony export */ });
/* unused harmony exports ZEnvironmentId, ZEnvironmentCreateInput */
/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(545198);

const ZEnvironment = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({
    id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().cuid2(),
    createdAt: zod__WEBPACK_IMPORTED_MODULE_0__.z.date(),
    updatedAt: zod__WEBPACK_IMPORTED_MODULE_0__.z.date(),
    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([
        "development",
        "production"
    ]),
    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),
    appSetupCompleted: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()
});
const ZEnvironmentId = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({
    id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()
});
const ZEnvironmentUpdateInput = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({
    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([
        "development",
        "production"
    ]),
    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),
    appSetupCompleted: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()
});
const ZEnvironmentCreateInput = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({
    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([
        "development",
        "production"
    ]).optional(),
    appSetupCompleted: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()
});


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8079,3073,7863,5069,255,9759,6626,5570,1238,2021,9069,2195,7762,1469,5294,4900,6911,2075,1659,5667,6689,2446,4218,9325,9242,3687,7864,8046,3840,8310], () => (__webpack_exec__(856993)));
module.exports = __webpack_exports__;

})();
(() => {
var exports = {};
exports.id = 3668;
exports.ids = [3668];
exports.modules = {

/***/ 191043:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ 741000:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-presigned-post");

/***/ }),

/***/ 531701:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ 896330:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ 560483:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client/scripts/default-index.js");

/***/ }),

/***/ 710846:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.prod.js");

/***/ }),

/***/ 419121:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ 903295:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ 529294:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ 663033:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ 912412:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 979428:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 455511:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 594735:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 629021:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 79748:
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ 781630:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 55591:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 491645:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 321820:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 333873:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 111723:
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ 927910:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 134631:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 583997:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 379551:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 328354:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 173566:
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ 74075:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 504573:
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ 977598:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 973024:
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ 937067:
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ 344708:
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ 777030:
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ 176760:
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ 1708:
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ 157075:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ 337830:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ 173136:
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ 257975:
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ 638522:
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ 705325:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(290735);
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(291232);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(272914);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(240085);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
const module0 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 86397));
const module1 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 836653));
const module2 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 956791));
const module3 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module4 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module5 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 524160));
const module6 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module7 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module8 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 720017));
const module9 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 473745));
const page10 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 734208));


// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        '(app)',
        {
        children: [
        '(onboarding)',
        {
        children: [
        'organizations',
        {
        children: [
        '[organizationId]',
        {
        children: [
        'projects',
        {
        children: [
        'new',
        {
        children: [
        'settings',
        {
        children: ['__PAGE__', {}, {
          page: [page10, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/projects/new/settings/page.tsx"],
          
        }]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module9, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/projects/new/layout.tsx"],
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module8, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/layout.tsx"],
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module5, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/layout.tsx"],
'forbidden': [module6, "next/dist/client/components/forbidden-error"],
'unauthorized': [module7, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      },
        {
        'layout': [module0, "/Users/kdy1/projects/formbricks/apps/web/app/layout.tsx"],
'error': [module1, "/Users/kdy1/projects/formbricks/apps/web/app/error.tsx"],
'not-found': [module2, "/Users/kdy1/projects/formbricks/apps/web/app/not-found.tsx"],
'forbidden': [module3, "next/dist/client/components/forbidden-error"],
'unauthorized': [module4, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      }.children;
const pages = ["/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/projects/new/settings/page.tsx"];


const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({
    definition: {
        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/(app)/(onboarding)/organizations/[organizationId]/projects/new/settings/page",
        pathname: "/organizations/[organizationId]/projects/new/settings",
        // The following aren't used in production.
        bundlePath: '',
        filename: '',
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 600668:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "7ff72bd16bba50c9761b90847c3fbf910ec67051ad": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_app_app_onboarding_lib_onboarding_ts__WEBPACK_IMPORTED_MODULE_0__.Y)
/* harmony export */ });
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_app_app_onboarding_lib_onboarding_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80104);




/***/ }),

/***/ 362164:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "7f11f2efac37ac84796e6cb223722dbe2e808e177f": () => (/* reexport */ services/* getResponse */.mi),
  "7f12957c3365cc2950bdc48f0118f82439eb6c23ec": () => (/* reexport */ services/* getSurvey */.Dp),
  "7f20db167926d501ff62b9525526548773c8a436d4": () => (/* reexport */ services/* isTeamPartOfOrganization */.l5),
  "7f275305555b0860bfbae18b2e203c55ee40ddaf1a": () => (/* reexport */ action/* getTeamDetailsAction */.qF),
  "7f2d9bf9c77eab701f64bf70db75854fbcd99f2449": () => (/* reexport */ createProjectAction),
  "7f36cf02b548a01d85112f587591e8c1e8390fa538": () => (/* reexport */ services/* isProjectPartOfOrganization */.Xj),
  "7f43cc68cec6dde2548d660aed09d677fb6bf640be": () => (/* reexport */ action/* getTeamRoleAction */.YV),
  "7f4abed3c09a69cb9276f46db77a84c84d3cc2434a": () => (/* reexport */ action/* updateTeamDetailsAction */.$K),
  "7f4f2c9c8b657cf906e9a25e65dafac6ec65967916": () => (/* reexport */ services/* getWebhook */.O0),
  "7f540889be00b7aa8c6ff1edc5cd79ece876954fd3": () => (/* reexport */ services/* getInvite */.I_),
  "7f60061b4b6be335eaa2facd1c5d8129b87f6923f4": () => (/* reexport */ services/* getActionClass */.Bx),
  "7f670a0537f96de8b5156e1b206124b2a990484370": () => (/* reexport */ services/* getApiKey */.CG),
  "7f74bd40a1f82de833915085152910f3ebd525b356": () => (/* reexport */ services/* getTeam */.Uo),
  "7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e": () => (/* reexport */ services/* getResponseNote */.Wy),
  "7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1": () => (/* reexport */ services/* getTag */.bH),
  "7fc6abb0838b6422ef7e81141fd6603883cd1990cf": () => (/* reexport */ services/* getDocument */.YE),
  "7fc856fe5dd5f698d2f54dacf4280d447336780427": () => (/* reexport */ services/* getLanguage */.Z0),
  "7fcb6302bee020bf7d696519228772c9d19427880f": () => (/* reexport */ action/* createTeamAction */.w6),
  "7fcda0e6bf50febdf861015e25ebdf74068a488dde": () => (/* reexport */ services/* getContact */.bl),
  "7fcfea9518c327899180b23cb3055005ba65cdef33": () => (/* reexport */ services/* getIntegration */.rg),
  "7fdb06c584a2145e0f48be9ead409fc7f774731fde": () => (/* reexport */ services/* getEnvironment */.uc),
  "7fdc59fabffb1d3ec063140a781847f4dcbb0bd037": () => (/* reexport */ action/* deleteTeamAction */.de),
  "7fdcbaf3445e783557d350b55d91be1398fafca7d3": () => (/* reexport */ services/* getInsight */.zv),
  "7fe763f2c0d5f307cc75c26f23c693a54ac24a3112": () => (/* reexport */ services/* getProject */.U1),
  "7ffb22c619704253744e9b5fea4eccca8b0808fb64": () => (/* reexport */ services/* getSegment */.kn)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js
var server_reference = __webpack_require__(286055);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/app-render/encryption.js
var encryption = __webpack_require__(770767);
// EXTERNAL MODULE: ./lib/utils/action-client.ts
var action_client = __webpack_require__(308046);
// EXTERNAL MODULE: ./lib/utils/action-client-middleware.ts
var action_client_middleware = __webpack_require__(729455);
// EXTERNAL MODULE: ./modules/ee/license-check/lib/utils.ts + 1 modules
var utils = __webpack_require__(725322);
// EXTERNAL MODULE: ./modules/projects/settings/lib/project.ts
var lib_project = __webpack_require__(908740);
// EXTERNAL MODULE: ../../node_modules/zod/lib/index.mjs
var lib = __webpack_require__(283131);
// EXTERNAL MODULE: ../../packages/lib/organization/service.ts
var service = __webpack_require__(167440);
// EXTERNAL MODULE: ../../packages/lib/project/service.ts
var project_service = __webpack_require__(28492);
// EXTERNAL MODULE: ../../packages/lib/user/service.ts
var user_service = __webpack_require__(717080);
// EXTERNAL MODULE: ../../packages/types/common.ts
var common = __webpack_require__(552224);
// EXTERNAL MODULE: ../../packages/types/errors.ts
var errors = __webpack_require__(207798);
// EXTERNAL MODULE: ../../packages/types/project.ts
var types_project = __webpack_require__(773518);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js
var action_validate = __webpack_require__(429931);
;// ./app/(app)/environments/[environmentId]/actions.ts
/* __next_internal_action_entry_do_not_use__ {"7f2d9bf9c77eab701f64bf70db75854fbcd99f2449":"createProjectAction"} */ 












const ZCreateProjectAction = lib.z.object({
    organizationId: common/* ZId */.i4,
    data: types_project/* ZProjectUpdateInput */.RQ
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ createProjectAction = action_client/* authenticatedActionClient */.D.schema(ZCreateProjectAction).action(async ({ parsedInput, ctx })=>{
    const { user } = ctx;
    const organizationId = parsedInput.organizationId;
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: user.id,
        organizationId: parsedInput.organizationId,
        access: [
            {
                data: parsedInput.data,
                schema: types_project/* ZProjectUpdateInput */.RQ,
                type: "organization",
                roles: [
                    "owner",
                    "manager"
                ]
            }
        ]
    });
    const organization = await (0,service/* getOrganization */.SA)(organizationId);
    if (!organization) {
        throw new Error("Organization not found");
    }
    const organizationProjectsLimit = await (0,utils/* getOrganizationProjectsLimit */.Df)(organization);
    const organizationProjectsCount = await (0,project_service/* getOrganizationProjectsCount */.$v)(organization.id);
    if (organizationProjectsCount >= organizationProjectsLimit) {
        throw new errors/* OperationNotAllowedError */.J4("Organization project limit reached");
    }
    if (parsedInput.data.teamIds && parsedInput.data.teamIds.length > 0) {
        const canDoRoleManagement = await (0,utils/* getRoleManagementPermission */.rQ)(organization);
        if (!canDoRoleManagement) {
            throw new errors/* OperationNotAllowedError */.J4("You do not have permission to manage roles");
        }
    }
    const project = await (0,lib_project/* createProject */.gA)(parsedInput.organizationId, parsedInput.data);
    const updatedNotificationSettings = {
        ...user.notificationSettings,
        alert: {
            ...user.notificationSettings?.alert
        },
        weeklySummary: {
            ...user.notificationSettings?.weeklySummary,
            [project.id]: true
        }
    };
    await (0,user_service/* updateUser */.TK)(user.id, {
        notificationSettings: updatedNotificationSettings
    });
    return project;
});

(0,action_validate/* ensureServerEntryExports */.D)([
    createProjectAction
]);
(0,server_reference/* registerServerReference */.A)(createProjectAction, "7f2d9bf9c77eab701f64bf70db75854fbcd99f2449", null);

// EXTERNAL MODULE: ./lib/utils/services.ts
var services = __webpack_require__(883212);
// EXTERNAL MODULE: ./modules/ee/teams/team-list/action.ts + 3 modules
var action = __webpack_require__(304175);
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fapp%2F(app)%2Fenvironments%2F%5BenvironmentId%5D%2Factions.ts%22%2C%5B%5B%227f2d9bf9c77eab701f64bf70db75854fbcd99f2449%22%2C%22createProjectAction%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Flib%2Futils%2Fservices.ts%22%2C%5B%5B%227f11f2efac37ac84796e6cb223722dbe2e808e177f%22%2C%22getResponse%22%5D%2C%5B%227f12957c3365cc2950bdc48f0118f82439eb6c23ec%22%2C%22getSurvey%22%5D%2C%5B%227f20db167926d501ff62b9525526548773c8a436d4%22%2C%22isTeamPartOfOrganization%22%5D%2C%5B%227f36cf02b548a01d85112f587591e8c1e8390fa538%22%2C%22isProjectPartOfOrganization%22%5D%2C%5B%227f4f2c9c8b657cf906e9a25e65dafac6ec65967916%22%2C%22getWebhook%22%5D%2C%5B%227f540889be00b7aa8c6ff1edc5cd79ece876954fd3%22%2C%22getInvite%22%5D%2C%5B%227f60061b4b6be335eaa2facd1c5d8129b87f6923f4%22%2C%22getActionClass%22%5D%2C%5B%227f670a0537f96de8b5156e1b206124b2a990484370%22%2C%22getApiKey%22%5D%2C%5B%227f74bd40a1f82de833915085152910f3ebd525b356%22%2C%22getTeam%22%5D%2C%5B%227fb9a3e6cbebea226c9a3678f31bfebf532ca7321e%22%2C%22getResponseNote%22%5D%2C%5B%227fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1%22%2C%22getTag%22%5D%2C%5B%227fc6abb0838b6422ef7e81141fd6603883cd1990cf%22%2C%22getDocument%22%5D%2C%5B%227fc856fe5dd5f698d2f54dacf4280d447336780427%22%2C%22getLanguage%22%5D%2C%5B%227fcda0e6bf50febdf861015e25ebdf74068a488dde%22%2C%22getContact%22%5D%2C%5B%227fcfea9518c327899180b23cb3055005ba65cdef33%22%2C%22getIntegration%22%5D%2C%5B%227fdb06c584a2145e0f48be9ead409fc7f774731fde%22%2C%22getEnvironment%22%5D%2C%5B%227fdcbaf3445e783557d350b55d91be1398fafca7d3%22%2C%22getInsight%22%5D%2C%5B%227fe763f2c0d5f307cc75c26f23c693a54ac24a3112%22%2C%22getProject%22%5D%2C%5B%227ffb22c619704253744e9b5fea4eccca8b0808fb64%22%2C%22getSegment%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fmodules%2Fee%2Fteams%2Fteam-list%2Faction.ts%22%2C%5B%5B%227f275305555b0860bfbae18b2e203c55ee40ddaf1a%22%2C%22getTeamDetailsAction%22%5D%2C%5B%227f43cc68cec6dde2548d660aed09d677fb6bf640be%22%2C%22getTeamRoleAction%22%5D%2C%5B%227f4abed3c09a69cb9276f46db77a84c84d3cc2434a%22%2C%22updateTeamDetailsAction%22%5D%2C%5B%227fcb6302bee020bf7d696519228772c9d19427880f%22%2C%22createTeamAction%22%5D%2C%5B%227fdc59fabffb1d3ec063140a781847f4dcbb0bd037%22%2C%22deleteTeamAction%22%5D%5D%5D%5D&__client_imported__=true!




























/***/ }),

/***/ 55464:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 391132));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 853648, 23));


/***/ }),

/***/ 342312:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 281665));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 36888, 23));


/***/ }),

/***/ 566300:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 921074));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 69427));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 483819));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 695353));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 300620));


/***/ }),

/***/ 24444:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 276386));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 101907));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 125963));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 489521));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 961060));


/***/ }),

/***/ 142912:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 776741));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 300620));


/***/ }),

/***/ 6464:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 104061));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 961060));


/***/ }),

/***/ 281665:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  ProjectSettings: () => (/* binding */ ProjectSettings)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(642725);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js
var action_client_wrapper = __webpack_require__(308441);
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7f2d9bf9c77eab701f64bf70db75854fbcd99f2449&name=createProjectAction!

const createProjectAction = /*#__PURE__*/(0,action_client_wrapper.createServerReference)("7f2d9bf9c77eab701f64bf70db75854fbcd99f2449", action_client_wrapper.callServer, undefined, action_client_wrapper.findSourceMapURL, "createProjectAction")
// EXTERNAL MODULE: ./app/lib/templates.ts
var templates = __webpack_require__(893902);
// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(856763);
// EXTERNAL MODULE: ./modules/ee/teams/team-list/components/create-team-modal.tsx + 1 modules
var create_team_modal = __webpack_require__(862449);
// EXTERNAL MODULE: ./modules/ui/components/button/index.tsx
var components_button = __webpack_require__(248852);
// EXTERNAL MODULE: ./modules/ui/components/color-picker/index.tsx + 1 modules
var color_picker = __webpack_require__(30574);
// EXTERNAL MODULE: ./modules/ui/components/form/index.tsx
var components_form = __webpack_require__(184142);
// EXTERNAL MODULE: ./modules/ui/components/input/index.tsx
var input = __webpack_require__(438624);
// EXTERNAL MODULE: ./modules/ui/components/multi-select/index.tsx + 1 modules
var multi_select = __webpack_require__(608264);
// EXTERNAL MODULE: ./modules/ui/components/survey/index.tsx
var survey = __webpack_require__(965694);
// EXTERNAL MODULE: ../../node_modules/@hookform/resolvers/zod/dist/zod.mjs + 1 modules
var zod = __webpack_require__(311159);
// EXTERNAL MODULE: ../../node_modules/@tolgee/react/dist/tolgee-react.esm.js
var tolgee_react_esm = __webpack_require__(397674);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/image.js
var api_image = __webpack_require__(134088);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/navigation.js
var navigation = __webpack_require__(470207);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js
var react = __webpack_require__(891616);
// EXTERNAL MODULE: ../../node_modules/react-hook-form/dist/index.esm.mjs
var index_esm = __webpack_require__(200667);
// EXTERNAL MODULE: ../../node_modules/react-hot-toast/dist/index.mjs + 1 modules
var dist = __webpack_require__(986090);
// EXTERNAL MODULE: ../../packages/types/project.ts + 1 modules
var project = __webpack_require__(19059);
;// ./app/(app)/(onboarding)/organizations/[organizationId]/projects/new/settings/components/ProjectSettings.tsx
/* __next_internal_client_entry_do_not_use__ ProjectSettings auto */ 



















const ProjectSettings = ({ organizationId, projectMode, channel, industry, defaultBrandColor, organizationTeams, canDoRoleManagement = false, userProjectsCount })=>{
    const [createTeamModalOpen, setCreateTeamModalOpen] = (0,react.useState)(false);
    const router = (0,navigation.useRouter)();
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const addProject = async (data)=>{
        try {
            const createProjectResponse = await createProjectAction({
                organizationId,
                data: {
                    ...data,
                    config: {
                        channel,
                        industry
                    },
                    teamIds: data.teamIds
                }
            });
            if (createProjectResponse?.data) {
                // get production environment
                const productionEnvironment = createProjectResponse.data.environments.find((environment)=>environment.type === "production");
                if (productionEnvironment) {
                    if (false) {}
                }
                if (channel === "app" || channel === "website") {
                    router.push(`/environments/${productionEnvironment?.id}/connect`);
                } else if (channel === "link") {
                    router.push(`/environments/${productionEnvironment?.id}/surveys`);
                } else if (projectMode === "cx") {
                    router.push(`/environments/${productionEnvironment?.id}/xm-templates`);
                }
            } else {
                const errorMessage = (0,helper/* getFormattedErrorMessage */.g3)(createProjectResponse);
                dist/* toast */.oR.error(errorMessage);
            }
        } catch (error) {
            dist/* toast */.oR.error(t("organizations.projects.new.settings.project_creation_failed"));
            console.error(error);
        }
    };
    const form = (0,index_esm/* useForm */.mN)({
        defaultValues: {
            name: "",
            styling: {
                allowStyleOverwrite: true,
                brandColor: {
                    light: defaultBrandColor
                }
            },
            teamIds: []
        },
        resolver: (0,zod/* zodResolver */.u)(project/* ZProjectUpdateInput */.RQ)
    });
    const projectName = form.watch("name");
    const logoUrl = form.watch("logo.url");
    const brandColor = form.watch("styling.brandColor.light") ?? defaultBrandColor;
    const { isSubmitting } = form.formState;
    const organizationTeamsOptions = organizationTeams.map((team)=>({
            label: team.name,
            value: team.id
        }));
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "mt-6 flex w-5/6 space-x-10 lg:w-2/3 2xl:w-1/2",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                className: "flex w-1/2 flex-col space-y-4",
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormProvider */.Op, {
                    ...form,
                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("form", {
                        onSubmit: form.handleSubmit(addProject),
                        className: "w-full space-y-4",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormField */.zB, {
                                control: form.control,
                                name: "styling.brandColor.light",
                                render: ({ field, fieldState: { error } })=>/*#__PURE__*/ (0,react_jsx_runtime.jsxs)(components_form/* FormItem */.eI, {
                                        className: "w-full space-y-4",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormLabel */.lR, {
                                                        children: t("organizations.projects.new.settings.brand_color")
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormDescription */.Rr, {
                                                        children: t("organizations.projects.new.settings.brand_color_description")
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormControl */.MJ, {
                                                children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)(color_picker/* ColorPicker */.s, {
                                                            color: field.value || defaultBrandColor,
                                                            onChange: (color)=>field.onChange(color)
                                                        }),
                                                        error?.message && /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormError */.jQ, {
                                                            className: "text-left",
                                                            children: error.message
                                                        })
                                                    ]
                                                })
                                            })
                                        ]
                                    })
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormField */.zB, {
                                control: form.control,
                                name: "name",
                                render: ({ field, fieldState: { error } })=>/*#__PURE__*/ (0,react_jsx_runtime.jsxs)(components_form/* FormItem */.eI, {
                                        className: "w-full space-y-4",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormLabel */.lR, {
                                                        children: t("organizations.projects.new.settings.project_name")
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormDescription */.Rr, {
                                                        children: t("organizations.projects.new.settings.project_name_description")
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormControl */.MJ, {
                                                children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)(input/* Input */.p, {
                                                            value: field.value,
                                                            onChange: (name)=>field.onChange(name),
                                                            placeholder: "e.g. Formbricks",
                                                            className: "bg-white",
                                                            autoFocus: true
                                                        }),
                                                        error?.message && /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormError */.jQ, {
                                                            className: "text-left",
                                                            children: error.message
                                                        })
                                                    ]
                                                })
                                            })
                                        ]
                                    })
                            }),
                            canDoRoleManagement && userProjectsCount > 0 && /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormField */.zB, {
                                control: form.control,
                                name: "teamIds",
                                render: ({ field, fieldState: { error } })=>/*#__PURE__*/ (0,react_jsx_runtime.jsxs)(components_form/* FormItem */.eI, {
                                        className: "w-full space-y-4",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                className: "flex items-center justify-between",
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                        children: [
                                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormLabel */.lR, {
                                                                children: t("common.teams")
                                                            }),
                                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormDescription */.Rr, {
                                                                children: t("organizations.projects.new.settings.team_description")
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                                        variant: "secondary",
                                                        size: "sm",
                                                        type: "button",
                                                        onClick: ()=>setCreateTeamModalOpen(true),
                                                        children: t("organizations.projects.new.settings.create_new_team")
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormControl */.MJ, {
                                                children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                    children: [
                                                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)(multi_select/* MultiSelect */.K, {
                                                            value: field.value,
                                                            options: organizationTeamsOptions,
                                                            onChange: (teamIds)=>field.onChange(teamIds)
                                                        }),
                                                        error?.message && /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_form/* FormError */.jQ, {
                                                            className: "text-left",
                                                            children: error.message
                                                        })
                                                    ]
                                                })
                                            })
                                        ]
                                    })
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                className: "flex w-full justify-end",
                                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                    loading: isSubmitting,
                                    type: "submit",
                                    id: "form-next-button",
                                    children: t("common.next")
                                })
                            })
                        ]
                    })
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                className: "relative flex h-[30rem] w-1/2 flex-col items-center justify-center space-y-2 rounded-lg border bg-slate-200 shadow",
                children: [
                    logoUrl && /*#__PURE__*/ (0,react_jsx_runtime.jsx)(api_image["default"], {
                        src: logoUrl,
                        alt: "Logo",
                        width: 256,
                        height: 56,
                        className: "absolute left-2 top-2 -mb-6 h-20 w-auto max-w-64 rounded-lg border object-contain p-1"
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                        className: "text-sm text-slate-400",
                        children: t("common.preview")
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                        className: "z-0 h-3/4 w-3/4",
                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(survey/* SurveyInline */.K, {
                            survey: (0,templates/* previewSurvey */.rb)(projectName || "my Product", t),
                            styling: {
                                brandColor: {
                                    light: brandColor
                                }
                            },
                            isBrandingEnabled: false,
                            languageCode: "default",
                            onFileUpload: async (file)=>file.name,
                            autoFocus: false
                        })
                    })
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(create_team_modal/* CreateTeamModal */.H, {
                open: createTeamModalOpen,
                setOpen: setCreateTeamModalOpen,
                organizationId: organizationId,
                onCreate: (teamId)=>{
                    form.setValue("teamIds", [
                        ...form.getValues("teamIds") || [],
                        teamId
                    ]);
                }
            })
        ]
    });
};


/***/ }),

/***/ 276386:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormbricksClient: () => (/* binding */ FormbricksClient)
/* harmony export */ });
/* harmony import */ var _app_lib_formbricks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(909013);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(470207);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
Object(function webpackMissingModule() { var e = new Error("Cannot find module '@formbricks/js'"); e.code = 'MODULE_NOT_FOUND'; throw e; }());
/* harmony import */ var _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(168109);
/* __next_internal_client_entry_do_not_use__ FormbricksClient auto */ 




const FormbricksClient = ({ userId, email })=>{
    const pathname = (0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.usePathname)();
    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useSearchParams)();
    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{
        if (_app_lib_formbricks__WEBPACK_IMPORTED_MODULE_0__/* .formbricksEnabled */ .K && userId) {
            Object(function webpackMissingModule() { var e = new Error("Cannot find module '@formbricks/js'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({
                environmentId: _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_4__/* .env */ ._.NEXT_PUBLIC_FORMBRICKS_ENVIRONMENT_ID || "",
                apiHost: _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_4__/* .env */ ._.NEXT_PUBLIC_FORMBRICKS_API_HOST || "",
                userId
            });
            Object(function webpackMissingModule() { var e = new Error("Cannot find module '@formbricks/js'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(email);
        }
    }, [
        userId,
        email
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{
        if (_app_lib_formbricks__WEBPACK_IMPORTED_MODULE_0__/* .formbricksEnabled */ .K) {
            Object(function webpackMissingModule() { var e = new Error("Cannot find module '@formbricks/js'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();
        }
    }, [
        pathname,
        searchParams
    ]);
    return null;
};


/***/ }),

/***/ 104061:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PosthogIdentify: () => (/* binding */ PosthogIdentify)
/* harmony export */ });
/* harmony import */ var posthog_js_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(700645);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(168109);
/* __next_internal_client_entry_do_not_use__ PosthogIdentify auto */ 


const posthogEnabled = _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_2__/* .env */ ._.NEXT_PUBLIC_POSTHOG_API_KEY && _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_2__/* .env */ ._.NEXT_PUBLIC_POSTHOG_API_HOST;
const PosthogIdentify = ({ session, user, environmentId, organizationId, organizationName, organizationBilling })=>{
    const posthog = (0,posthog_js_react__WEBPACK_IMPORTED_MODULE_0__/* .usePostHog */ .sf)();
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (posthogEnabled && session.user && posthog) {
            posthog.identify(session.user.id, {
                name: user.name,
                email: user.email,
                role: user.role,
                objective: user.objective
            });
            if (environmentId) {
                posthog.group("environment", environmentId, {
                    name: environmentId
                });
            }
            if (organizationId) {
                posthog.group("organization", organizationId, {
                    name: organizationName,
                    plan: organizationBilling?.plan,
                    responseLimit: organizationBilling?.limits.monthly.responses,
                    miuLimit: organizationBilling?.limits.monthly.miu
                });
            }
        }
    }, [
        posthog,
        session.user,
        environmentId,
        organizationId,
        organizationName,
        organizationBilling,
        user.name,
        user.email,
        user.role,
        user.objective
    ]);
    return null;
};


/***/ }),

/***/ 101907:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IntercomClient: () => (/* binding */ IntercomClient)
/* harmony export */ });
/* harmony import */ var _intercom_messenger_js_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19061);
/* harmony import */ var _intercom_messenger_js_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_intercom_messenger_js_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(455511);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(168109);
/* __next_internal_client_entry_do_not_use__ IntercomClient auto */ 



const intercomAppId = _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_3__/* .env */ ._.NEXT_PUBLIC_INTERCOM_APP_ID;
const IntercomClient = ({ user, intercomSecretKey, isIntercomConfigured })=>{
    const initializeIntercom = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(()=>{
        let initParams = {};
        if (user) {
            const { id, name, email, createdAt } = user;
            const hash = (0,crypto__WEBPACK_IMPORTED_MODULE_1__.createHmac)("sha256", intercomSecretKey).update(user?.id).digest("hex");
            initParams = {
                user_id: id,
                user_hash: hash,
                name,
                email,
                created_at: createdAt ? Math.floor(createdAt.getTime() / 1000) : undefined
            };
        }
        _intercom_messenger_js_sdk__WEBPACK_IMPORTED_MODULE_0___default()({
            app_id: intercomAppId,
            ...initParams
        });
    }, [
        user,
        intercomSecretKey
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{
        try {
            if (isIntercomConfigured) initializeIntercom();
            return ()=>{
                // Shutdown Intercom when component unmounts
                if (false) {}
            };
        } catch (error) {
            console.error("Failed to initialize Intercom:", error);
        }
    }, [
        isIntercomConfigured,
        initializeIntercom
    ]);
    return null;
};


/***/ }),

/***/ 909013:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ formbricksEnabled),
/* harmony export */   X: () => (/* binding */ formbricksLogout)
/* harmony export */ });
Object(function webpackMissingModule() { var e = new Error("Cannot find module '@formbricks/js'"); e.code = 'MODULE_NOT_FOUND'; throw e; }());
/* harmony import */ var _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(168109);
/* harmony import */ var _formbricks_lib_localStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(563896);



const formbricksEnabled = typeof _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_1__/* .env */ ._.NEXT_PUBLIC_FORMBRICKS_API_HOST && _formbricks_lib_env__WEBPACK_IMPORTED_MODULE_1__/* .env */ ._.NEXT_PUBLIC_FORMBRICKS_ENVIRONMENT_ID;
const formbricksLogout = async ()=>{
    const loggedInWith = localStorage.getItem(_formbricks_lib_localStorage__WEBPACK_IMPORTED_MODULE_2__/* .FORMBRICKS_LOGGED_IN_WITH_LS */ .b9);
    localStorage.clear();
    if (loggedInWith) {
        localStorage.setItem(_formbricks_lib_localStorage__WEBPACK_IMPORTED_MODULE_2__/* .FORMBRICKS_LOGGED_IN_WITH_LS */ .b9, loggedInWith);
    }
    return await Object(function webpackMissingModule() { var e = new Error("Cannot find module '@formbricks/js'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();
};


/***/ }),

/***/ 30574:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  s: () => (/* binding */ ColorPicker)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(642725);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js
var react = __webpack_require__(891616);
// EXTERNAL MODULE: ../../node_modules/react-colorful/dist/index.mjs
var dist = __webpack_require__(516846);
// EXTERNAL MODULE: ../../packages/lib/utils/hooks/useClickOutside.ts
var useClickOutside = __webpack_require__(593827);
;// ./modules/ui/components/color-picker/components/popover-picker.tsx




const PopoverPicker = ({ color, onChange, disabled = false })=>{
    const popover = (0,react.useRef)(null);
    const [isOpen, toggle] = (0,react.useState)(false);
    const close = (0,react.useCallback)(()=>toggle(false), []);
    (0,useClickOutside/* useClickOutside */.L)(popover, close);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "picker relative",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                id: "color-picker",
                className: "h-6 w-10 cursor-pointer rounded border border-slate-200",
                style: {
                    backgroundColor: color,
                    opacity: disabled ? 0.5 : 1
                },
                onClick: ()=>{
                    if (!disabled) {
                        toggle(!isOpen);
                    }
                }
            }),
            isOpen && /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                className: "absolute right-0 z-20 mt-2 origin-top-right",
                ref: popover,
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                    className: "rounded bg-white p-2 shadow-lg",
                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(dist/* HexColorPicker */.jI, {
                        color: color,
                        onChange: onChange
                    })
                })
            })
        ]
    });
};

// EXTERNAL MODULE: ../../packages/lib/cn.ts
var cn = __webpack_require__(983773);
;// ./modules/ui/components/color-picker/index.tsx
/* __next_internal_client_entry_do_not_use__ ColorPicker auto */ 



const ColorPicker = ({ color, onChange, containerClass, disabled = false })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
        className: (0,cn.cn)("my-2", containerClass),
        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
            className: "flex w-full items-center justify-between space-x-1 rounded-md border border-slate-300 bg-white px-2 text-sm text-slate-400",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                    className: "flex w-full items-center",
                    children: [
                        "#",
                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)(dist/* HexColorInput */.HC, {
                            className: "ml-2 mr-2 h-10 w-32 flex-1 border-0 bg-transparent text-slate-500 outline-none focus:border-none",
                            color: color,
                            onChange: onChange,
                            id: "color",
                            "aria-label": "Primary color",
                            disabled: disabled
                        })
                    ]
                }),
                /*#__PURE__*/ (0,react_jsx_runtime.jsx)(PopoverPicker, {
                    color: color,
                    onChange: onChange,
                    disabled: disabled
                })
            ]
        })
    });
};


/***/ }),

/***/ 454319:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G7: () => (/* binding */ CommandInput),
/* harmony export */   L$: () => (/* binding */ CommandGroup),
/* harmony export */   fx: () => (/* binding */ CommandSeparator),
/* harmony export */   h_: () => (/* binding */ CommandItem),
/* harmony export */   oI: () => (/* binding */ CommandList),
/* harmony export */   uB: () => (/* binding */ Command),
/* harmony export */   xL: () => (/* binding */ CommandEmpty)
/* harmony export */ });
/* unused harmony exports CommandDialog, CommandShortcut */
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_ui_components_dialog__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(728364);
/* harmony import */ var cmdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(153779);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(983773);
/* __next_internal_client_entry_do_not_use__ Command,CommandDialog,CommandEmpty,CommandGroup,CommandInput,CommandItem,CommandList,CommandSeparator,CommandShortcut auto */ 




const Command = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-auto rounded-md", className),
        ...props
    }));
Command.displayName = cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.displayName;
const CommandDialog = ({ children, ...props })=>{
    return /*#__PURE__*/ _jsx(Dialog, {
        ...props,
        children: /*#__PURE__*/ _jsx(DialogContent, {
            className: "overflow-hidden p-0 shadow-2xl",
            children: /*#__PURE__*/ _jsx(Command, {
                className: "[&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",
                children: children
            })
        })
    });
};
const CommandInput = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        className: "flex items-center",
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Input, {
            ref: ref,
            className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__.cn)("placeholder:text-muted-foreground flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50", className),
            ...props
        })
    }));
CommandInput.displayName = cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Input.displayName;
const CommandList = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.List, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__.cn)("max-h-full overflow-y-auto overflow-x-hidden", className),
        ...props
    }));
CommandList.displayName = cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.List.displayName;
const CommandEmpty = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.forwardRef((props, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Empty, {
        ref: ref,
        className: "py-6 text-center",
        ...props
    }));
CommandEmpty.displayName = cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Empty.displayName;
const CommandGroup = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Group, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__.cn)("text-foreground overflow-hidden [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-semibold [&_[cmdk-group-heading]]:text-slate-500", className),
        ...props
    }));
CommandGroup.displayName = cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Group.displayName;
const CommandSeparator = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Separator, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__.cn)("bg-border -mx-1 h-px", className),
        ...props
    }));
CommandSeparator.displayName = cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Separator.displayName;
const CommandItem = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_2__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Item, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__.cn)("relative flex cursor-default select-none items-center rounded-md px-2 py-1.5 text-sm font-medium text-slate-700 outline-none hover:bg-slate-100 data-[disabled='true']:pointer-events-none data-[disabled='true']:opacity-50", className),
        ...props
    }));
CommandItem.displayName = cmdk__WEBPACK_IMPORTED_MODULE_3__/* .Command */ .uB.Item.displayName;
const CommandShortcut = ({ className, ...props })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_4__.cn)("text-muted-foreground ml-auto text-xs tracking-widest", className),
        ...props
    });
};
CommandShortcut.displayName = "CommandShortcut";



/***/ }),

/***/ 728364:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cf: () => (/* binding */ DialogContent),
/* harmony export */   L3: () => (/* binding */ DialogTitle),
/* harmony export */   lG: () => (/* binding */ Dialog),
/* harmony export */   rr: () => (/* binding */ DialogDescription)
/* harmony export */ });
/* unused harmony exports DialogFooter, DialogHeader, DialogTrigger */
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(374560);
/* harmony import */ var _barrel_optimize_names_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(673766);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(983773);
/* __next_internal_client_entry_do_not_use__ Dialog,DialogContent,DialogDescription,DialogFooter,DialogHeader,DialogTitle,DialogTrigger auto */ 




const Dialog = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Root */ .bL;
const DialogTrigger = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Trigger */ .l9;
const DialogPortal = ({ children, ...props })=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Portal */ .ZL, {
        ...props,
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
            className: "fixed inset-0 z-50 flex items-start justify-center sm:items-center",
            children: children
        })
    });
DialogPortal.displayName = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Portal */ .ZL.displayName;
const DialogOverlay = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Overlay */ .hJ, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("bg-background/80 data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in fixed inset-0 z-50 backdrop-blur-sm transition-all duration-100", className),
        ...props
    }));
DialogOverlay.displayName = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Overlay */ .hJ.displayName;
const DialogContent = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, children, hideCloseButton, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(DialogPortal, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DialogOverlay, {}),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .UC, {
                ref: ref,
                className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("bg-background animate-in data-[state=open]:fade-in-90 data-[state=open]:slide-in-from-bottom-10 sm:zoom-in-90 data-[state=open]:sm:slide-in-from-bottom-0 fixed z-50 grid gap-4 rounded-b-lg border p-6 shadow-lg sm:rounded-lg", className),
                ...props,
                children: [
                    children,
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Close */ .bm, {
                        className: "ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",
                        children: [
                            !hideCloseButton ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A, {
                                className: "h-4 w-4"
                            }) : null,
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                className: "sr-only",
                                children: "Close"
                            })
                        ]
                    })
                ]
            })
        ]
    }));
DialogContent.displayName = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .UC.displayName;
const DialogHeader = ({ className, ...props })=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("flex flex-col space-y-1.5 text-center sm:text-left", className),
        ...props
    });
DialogHeader.displayName = "DialogHeader";
const DialogFooter = ({ className, ...props })=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className),
        ...props
    });
DialogFooter.displayName = "DialogFooter";
const DialogTitle = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Title */ .hE, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("text-lg font-semibold leading-none tracking-tight", className),
        ...props
    }));
DialogTitle.displayName = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Title */ .hE.displayName;
const DialogDescription = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Description */ .VY, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("text-muted-foreground text-sm", className),
        ...props
    }));
DialogDescription.displayName = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Description */ .VY.displayName;



/***/ }),

/***/ 438624:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ Input)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(983773);



const Input = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, isInvalid, ...props }, ref)=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input", {
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_2__.cn)("focus:border-brand-dark flex h-10 w-full rounded-md border border-slate-300 bg-transparent px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-500 dark:text-slate-300", className, isInvalid && "border border-red-500 focus:border-red-500"),
        ref: ref,
        ...props
    });
});
Input.displayName = "Input";



/***/ }),

/***/ 61330:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ Label)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _radix_ui_react_label__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(446470);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(983773);
/* __next_internal_client_entry_do_not_use__ Label auto */ 



const Label = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_2__/* .Root */ .b, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("text-sm font-medium leading-none text-slate-800 disabled:opacity-70 peer-disabled:cursor-not-allowed peer-disabled:opacity-70 dark:text-slate-400 dark:peer-disabled:opacity-70", className),
        ...props
    }));
Label.displayName = _radix_ui_react_label__WEBPACK_IMPORTED_MODULE_2__/* .Root */ .b.displayName;



/***/ }),

/***/ 383207:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ Modal)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(374560);
/* harmony import */ var _barrel_optimize_names_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(673766);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(983773);





const DialogPortal = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Portal */ .ZL;
const DialogOverlay = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, blur, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Overlay */ .hJ, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)(blur && "backdrop-blur-md", "fixed inset-0 z-50 bg-slate-500 bg-opacity-30", "data-[state='closed']:animate-fadeOut data-[state='open']:animate-fadeIn"),
        ...props
    }));
DialogOverlay.displayName = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Overlay */ .hJ.displayName;
const sizeClassName = {
    md: "sm:max-w-xl",
    lg: "sm:max-w-[820px]",
    xl: "sm:max-w-[960px] sm:max-h-[640px]",
    xxl: "sm:max-w-[1240px] sm:max-h-[760px]"
};
const DialogContent = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, children, blur, noPadding, size, hideCloseButton, restrictOverflow = false, closeOnOutsideClick, title, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(DialogPortal, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DialogOverlay, {
                blur: blur
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .UC, {
                ref: ref,
                className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("fixed left-[50%] top-[50%] z-50 translate-x-[-50%] translate-y-[-50%] transform rounded-lg bg-white text-left shadow-xl transition-all sm:my-2 sm:w-full sm:max-w-xl", `${noPadding ? "" : "px-4 pb-4 pt-5 sm:p-6"}`, "data-[state='closed']:animate-fadeOut data-[state='open']:animate-fadeIn", size && sizeClassName && sizeClassName[size], !restrictOverflow && "overflow-hidden", className),
                ...props,
                onPointerDownOutside: (e)=>{
                    if (!closeOnOutsideClick) {
                        e.preventDefault();
                    }
                },
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .DialogTitle */ .L3, {
                        children: title && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                            className: "mb-4 text-xl font-bold text-slate-500",
                            children: title
                        })
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .DialogDescription */ .rr, {}),
                    children,
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Close */ .bm, {
                        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("absolute right-0 top-0 hidden pr-4 pt-4 text-slate-400 hover:text-slate-500 focus:outline-none focus:ring-0 sm:block", hideCloseButton && "!hidden"),
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A, {
                                className: "h-6 w-6 rounded-md bg-white"
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                className: "sr-only",
                                children: "Close"
                            })
                        ]
                    })
                ]
            })
        ]
    }));
DialogContent.displayName = _radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Content */ .UC.displayName;
const Modal = ({ open, setOpen, children, blur = true, size = "md", noPadding, hideCloseButton = false, closeOnOutsideClick = true, title, className, restrictOverflow = false })=>{
    if (!open) return null;
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_2__/* .Root */ .bL, {
        open: open,
        onOpenChange: (open)=>setOpen(open),
        modal: true,
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DialogContent, {
            blur: blur,
            size: size,
            noPadding: noPadding,
            hideCloseButton: hideCloseButton,
            closeOnOutsideClick: closeOnOutsideClick,
            title: title,
            className: className,
            restrictOverflow: restrictOverflow,
            children: children
        })
    });
};


/***/ }),

/***/ 125963:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NoMobileOverlay: () => (/* binding */ NoMobileOverlay)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _tolgee_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(397674);
/* harmony import */ var _barrel_optimize_names_SmartphoneIcon_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(673766);
/* harmony import */ var _barrel_optimize_names_SmartphoneIcon_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(366947);
/* __next_internal_client_entry_do_not_use__ NoMobileOverlay auto */ 


const NoMobileOverlay = ()=>{
    const { t } = (0,_tolgee_react__WEBPACK_IMPORTED_MODULE_1__/* .useTranslate */ .WD)();
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: "fixed inset-0 z-[9999] flex items-center justify-center sm:hidden",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                    className: "relative h-full w-full bg-slate-50"
                }),
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: "bg-slate-850 absolute mx-8 flex flex-col items-center gap-6 rounded-lg px-8 py-10 text-center",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_SmartphoneIcon_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A, {
                            className: "absolute top-14 h-8 w-8 text-slate-500"
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_SmartphoneIcon_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A, {
                            className: "h-16 w-16 text-slate-500"
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                            className: "text-slate-500",
                            children: t("common.mobile_overlay_text")
                        })
                    ]
                })
            ]
        })
    });
};


/***/ }),

/***/ 965694:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ SurveyInline)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


const createContainerId = ()=>`formbricks-survey-container`;
const SurveyInline = (props)=>{
    const containerId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>createContainerId(), []);
    const renderInline = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>window.formbricksSurveys.renderSurveyInline({
            ...props,
            containerId
        }), [
        containerId,
        props
    ]);
    const [isScriptLoaded, setIsScriptLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const loadSurveyScript = async ()=>{
        try {
            const response = await fetch("/js/surveys.umd.cjs");
            if (!response.ok) {
                throw new Error("Failed to load the surveys package");
            }
            const scriptContent = await response.text();
            const scriptElement = document.createElement("script");
            scriptElement.textContent = scriptContent;
            document.head.appendChild(scriptElement);
            setIsScriptLoaded(true);
        } catch (error) {
            throw error;
        }
    };
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        const loadScript = async ()=>{
            if (!window.formbricksSurveys) {
                try {
                    await loadSurveyScript();
                } catch (error) {
                    console.error("Failed to load the surveys package: ", error);
                }
            } else {
                renderInline();
            }
        };
        loadScript();
    }, [
        containerId,
        props,
        renderInline
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (isScriptLoaded) {
            renderInline();
        }
    }, [
        isScriptLoaded,
        renderInline
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        id: containerId,
        className: "h-full w-full"
    });
};


/***/ }),

/***/ 961060:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ToasterClient: () => (/* binding */ ToasterClient)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(986090);
/* __next_internal_client_entry_do_not_use__ ToasterClient auto */ 

const ToasterClient = ()=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_hot_toast__WEBPACK_IMPORTED_MODULE_1__.Toaster, {
        toastOptions: {
            success: {
                className: "formbricks__toast__success"
            },
            error: {
                className: "formbricks__toast__error"
            }
        }
    });
};


/***/ }),

/***/ 547380:
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.regionAPIs = void 0;
exports.regionAPIs = new Map([
    ["us", "https://api-iam.intercom.io"],
    ["eu", "https://api-iam.eu.intercom.io"],
    ["ap", "https://api-iam.au.intercom.io"]
]);


/***/ }),

/***/ 19061:
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.onUserEmailSupplied = exports.showConversation = exports.showTicket = exports.startChecklist = exports.startSurvey = exports.showNews = exports.showArticle = exports.startTour = exports.getVisitorId = exports.trackEvent = exports.onUnreadCountChange = exports.onShow = exports.onHide = exports.showNewMessage = exports.showMessages = exports.showSpace = exports.show = exports.hide = exports.update = exports.shutdown = exports.boot = exports.Intercom = void 0;
const constants_1 = __webpack_require__(547380);
const instance_manager_1 = __webpack_require__(40384);
const callIntercomMethod = (method, ...args) => {
    // window is undefined on server-side and this breaks our widget
    if (typeof window !== undefined && window.Intercom) {
        window.Intercom(method, ...args);
    }
    else {
        console.warn("Please ensure Intercom is setup and running on client-side!");
    }
};
const Intercom = (props) => {
    if (typeof props !== "object") {
        console.warn("Intercom initialiser called with invalid parameters.");
        return;
    }
    const { region = "us" } = props, args = __rest(props, ["region"]);
    if (typeof window !== "undefined" && !instance_manager_1.ref) {
        window.intercomSettings = Object.assign(Object.assign({}, args), { api_base: constants_1.regionAPIs.get(region) });
        (0, instance_manager_1.init)();
    }
};
exports.Intercom = Intercom;
// Public functions that can be called from outside the module
exports["default"] = exports.Intercom;
const boot = (arg) => callIntercomMethod("boot", arg);
exports.boot = boot;
const shutdown = () => callIntercomMethod("shutdown");
exports.shutdown = shutdown;
const update = (arg) => callIntercomMethod("update", arg);
exports.update = update;
const hide = () => callIntercomMethod("hide");
exports.hide = hide;
const show = () => callIntercomMethod("show");
exports.show = show;
const showSpace = (spaceName) => callIntercomMethod("showSpace", spaceName);
exports.showSpace = showSpace;
const showMessages = () => callIntercomMethod("showMessages");
exports.showMessages = showMessages;
const showNewMessage = (prePopulatedContent) => callIntercomMethod("showNewMessage", prePopulatedContent);
exports.showNewMessage = showNewMessage;
const onHide = (callback) => callIntercomMethod("onHide", callback);
exports.onHide = onHide;
const onShow = (callback) => callIntercomMethod("onShow", callback);
exports.onShow = onShow;
const onUnreadCountChange = (callback) => callIntercomMethod("onUnreadCountChange", callback);
exports.onUnreadCountChange = onUnreadCountChange;
const trackEvent = (...args) => callIntercomMethod("trackEvent", ...args);
exports.trackEvent = trackEvent;
const getVisitorId = () => callIntercomMethod("getVisitorId");
exports.getVisitorId = getVisitorId;
const startTour = (tourId) => callIntercomMethod("startTour", tourId);
exports.startTour = startTour;
const showArticle = (articleId) => callIntercomMethod("showArticle", articleId);
exports.showArticle = showArticle;
const showNews = (newsItemId) => callIntercomMethod("showNews", newsItemId);
exports.showNews = showNews;
const startSurvey = (surveyId) => callIntercomMethod("startSurvey", surveyId);
exports.startSurvey = startSurvey;
const startChecklist = (checklistId) => callIntercomMethod("startChecklist", checklistId);
exports.startChecklist = startChecklist;
const showTicket = (ticketId) => callIntercomMethod("showTicket", ticketId);
exports.showTicket = showTicket;
const showConversation = (conversationId) => callIntercomMethod("showConversation", conversationId);
exports.showConversation = showConversation;
const onUserEmailSupplied = (callback) => callIntercomMethod("onUserEmailSupplied", callback);
exports.onUserEmailSupplied = onUserEmailSupplied;


/***/ }),

/***/ 40384:
/***/ (function(__unused_webpack_module, exports) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ref = exports.init = void 0;
const scriptElementId = "_intercom_npm_loader";
// This holds a queue of commands to be passed to the messenger widget API after it is added to the page
const queueHolder = function () {
    queueHolder.loaderQueue(arguments);
};
queueHolder.q = [];
queueHolder.loaderQueue = function (args) {
    queueHolder.q.push(args);
};
const addWidgetToPage = function () {
    var _a, _b;
    var d = document;
    if (d.getElementById(scriptElementId)) {
        // script is already in DOM
        return;
    }
    var s = d.createElement("script");
    s.type = "text/javascript";
    s.async = true;
    s.id = scriptElementId;
    s.src =
        "https://widget.intercom.io/widget/" + ((_a = window.intercomSettings) === null || _a === void 0 ? void 0 : _a.app_id);
    var x = d.getElementsByTagName("script")[0];
    (_b = x.parentNode) === null || _b === void 0 ? void 0 : _b.insertBefore(s, x);
};
const isDocumentReady = () => document.readyState === "complete" || document.readyState === "interactive";
const init = () => __awaiter(void 0, void 0, void 0, function* () {
    var w = window;
    var ic = w.Intercom;
    if (w.intercomSettings) {
        w.intercomSettings.installation_type = "npm-package";
    }
    if (typeof ic === "function") {
        ic("reattach_activator");
        ic("update", w.intercomSettings);
    }
    else {
        w.Intercom = queueHolder;
        if (isDocumentReady()) {
            addWidgetToPage();
        }
        else {
            document.addEventListener("readystatechange", function () {
                if (isDocumentReady()) {
                    addWidgetToPage();
                }
            });
            if (w.attachEvent) {
                w.attachEvent("onload", addWidgetToPage);
            }
            else {
                w.addEventListener("load", addWidgetToPage, false);
            }
        }
    }
});
exports.init = init;
exports.ref = undefined;


/***/ }),

/***/ 969614:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Users)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Users = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Users", [
    [
        "path",
        {
            d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",
            key: "1yyitq"
        }
    ],
    [
        "circle",
        {
            cx: "9",
            cy: "7",
            r: "4",
            key: "nufk8"
        }
    ],
    [
        "path",
        {
            d: "M22 21v-2a4 4 0 0 0-3-3.87",
            key: "kshegd"
        }
    ],
    [
        "path",
        {
            d: "M16 3.13a4 4 0 0 1 0 7.75",
            key: "1da9ce"
        }
    ]
]);
 //# sourceMappingURL=users.js.map


/***/ }),

/***/ 134088:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport default from dynamic */ _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0___default.a)
/* harmony export */ });
/* harmony import */ var _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(243051);
/* harmony import */ var _shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_shared_lib_image_external__WEBPACK_IMPORTED_MODULE_0__);



//# sourceMappingURL=image.js.map

/***/ }),

/***/ 243051:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
0 && (0);
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    default: function() {
        return _default;
    },
    getImageProps: function() {
        return getImageProps;
    }
});
const _interop_require_default = __webpack_require__(748375);
const _getimgprops = __webpack_require__(267331);
const _imagecomponent = __webpack_require__(501659);
const _imageloader = /*#__PURE__*/ _interop_require_default._(__webpack_require__(487763));
function getImageProps(imgProps) {
    const { props } = (0, _getimgprops.getImgProps)(imgProps, {
        defaultLoader: _imageloader.default,
        // This is replaced by webpack define plugin
        imgConf: {"deviceSizes":[640,750,828,1080,1200,1920,2048,3840],"imageSizes":[16,32,48,64,96,128,256,384],"path":"/_next/image","loader":"default","dangerouslyAllowSVG":false,"unoptimized":false}
    });
    // Normally we don't care about undefined props because we pass to JSX,
    // but this exported function could be used by the end user for anything
    // so we delete undefined props to clean it up a little.
    for (const [key, value] of Object.entries(props)){
        if (value === undefined) {
            delete props[key];
        }
    }
    return {
        props
    };
}
const _default = _imagecomponent.Image; //# sourceMappingURL=image-external.js.map


/***/ }),

/***/ 983773:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cn: () => (/* binding */ cn)
/* harmony export */ });
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(553626);
/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(550186);


const cn = (...inputs)=>{
    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__/* .twMerge */ .QP)((0,clsx__WEBPACK_IMPORTED_MODULE_1__/* .clsx */ .$)(inputs));
};


/***/ }),

/***/ 563896:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $w: () => (/* binding */ FORMBRICKS_SURVEYS_FILTERS_KEY_LS),
/* harmony export */   b9: () => (/* binding */ FORMBRICKS_LOGGED_IN_WITH_LS),
/* harmony export */   x9: () => (/* binding */ FORMBRICKS_ENVIRONMENT_ID_LS)
/* harmony export */ });
const FORMBRICKS_SURVEYS_FILTERS_KEY_LS = "formbricks-surveys-filters";
const FORMBRICKS_ENVIRONMENT_ID_LS = "formbricks-environment-id";
const FORMBRICKS_LOGGED_IN_WITH_LS = "formbricks-logged-in-with";


/***/ }),

/***/ 593827:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ useClickOutside)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

// Improved version of https://usehooks.com/useOnClickOutside/
const useClickOutside = (ref, handler)=>{
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        let startedInside = false;
        let startedWhenMounted = false;
        const listener = (event)=>{
            // Do nothing if `mousedown` or `touchstart` started inside ref element
            if (startedInside || !startedWhenMounted) return;
            // Do nothing if clicking ref's element or descendent elements
            if (!ref.current || ref.current.contains(event.target)) return;
            handler(event);
        };
        const validateEventStart = (event)=>{
            startedWhenMounted = ref.current !== null;
            startedInside = ref.current !== null && ref.current.contains(event.target);
        };
        document.addEventListener("mousedown", validateEventStart);
        document.addEventListener("touchstart", validateEventStart);
        document.addEventListener("click", listener);
        return ()=>{
            document.removeEventListener("mousedown", validateEventStart);
            document.removeEventListener("touchstart", validateEventStart);
            document.removeEventListener("click", listener);
        };
    }, [
        ref,
        handler
    ]);
};


/***/ }),

/***/ 80104:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ getTeamsByOrganizationId)
/* harmony export */ });
/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(910330);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(208706);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_cache_team__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(441215);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(896330);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(922728);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _formbricks_database__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(527610);
/* harmony import */ var _formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(794356);
/* harmony import */ var _formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(860988);
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(733735);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(470641);
/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(7262);
/* __next_internal_action_entry_do_not_use__ {"7ff72bd16bba50c9761b90847c3fbf910ec67051ad":"getTeamsByOrganizationId"} */ 









const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getTeamsByOrganizationId = (0,react__WEBPACK_IMPORTED_MODULE_4__.cache)(async (organizationId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_6__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_7__/* .validateInputs */ .C)([
            organizationId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_8__/* .ZId */ .i4
        ]);
        try {
            const teams = await _formbricks_database__WEBPACK_IMPORTED_MODULE_5__/* .prisma */ .z.team.findMany({
                where: {
                    organizationId
                },
                select: {
                    id: true,
                    name: true
                }
            });
            const projectTeams = teams.map((team)=>({
                    id: team.id,
                    name: team.name
                }));
            return projectTeams;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_9__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `getTeamsByOrganizationId-${organizationId}`
    ], {
        tags: [
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_2__/* .teamCache */ .g.tag.byOrganizationId(organizationId)
        ]
    })());

(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_10__/* .ensureServerEntryExports */ .D)([
    getTeamsByOrganizationId
]);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getTeamsByOrganizationId, "7ff72bd16bba50c9761b90847c3fbf910ec67051ad", null);


/***/ }),

/***/ 720017:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_app_environments_environmentId_components_PosthogIdentify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(776741);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(136015);
/* harmony import */ var _modules_ui_components_toaster_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(300620);
/* harmony import */ var _tolgee_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(186184);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(145796);
/* harmony import */ var _formbricks_lib_organization_auth__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(937440);
/* harmony import */ var _formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(353687);
/* harmony import */ var _formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(184511);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(470641);











const ProjectOnboardingLayout = async (props)=>{
    const params = await props.params;
    const { children } = props;
    const t = await (0,_tolgee_server__WEBPACK_IMPORTED_MODULE_4__/* .getTranslate */ .r)();
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_5__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__/* .authOptions */ .N);
    if (!session || !session.user) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_6__.redirect)(`/auth/login`);
    }
    const user = await (0,_formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_7__/* .getUser */ .wz)(session.user.id);
    if (!user) {
        throw new Error(t("common.user_not_found"));
    }
    const isAuthorized = await (0,_formbricks_lib_organization_auth__WEBPACK_IMPORTED_MODULE_8__/* .canUserAccessOrganization */ .h)(session.user.id, params.organizationId);
    if (!isAuthorized) {
        throw _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_9__/* .AuthorizationError */ .yi;
    }
    const organization = await (0,_formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_10__/* .getOrganization */ .SA)(params.organizationId);
    if (!organization) {
        throw new Error(t("common.organization_not_found"));
    }
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "flex-1 bg-slate-50",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_app_environments_environmentId_components_PosthogIdentify__WEBPACK_IMPORTED_MODULE_1__.PosthogIdentify, {
                session: session,
                user: user,
                organizationId: organization.id,
                organizationName: organization.name,
                organizationBilling: organization.billing
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_toaster_client__WEBPACK_IMPORTED_MODULE_3__.ToasterClient, {}),
            children
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ProjectOnboardingLayout);


/***/ }),

/***/ 473745:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(136015);
/* harmony import */ var _modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(532077);
/* harmony import */ var _tolgee_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(186184);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(145796);
/* harmony import */ var _formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(377968);
/* harmony import */ var _formbricks_lib_membership_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(159570);
/* harmony import */ var _formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(353687);
/* harmony import */ var _formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(529987);










const OnboardingLayout = async (props)=>{
    const params = await props.params;
    const { children } = props;
    const t = await (0,_tolgee_server__WEBPACK_IMPORTED_MODULE_3__/* .getTranslate */ .r)();
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_4__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_1__/* .authOptions */ .N);
    if (!session || !session.user) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_5__.redirect)(`/auth/login`);
    }
    const membership = await (0,_formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_6__/* .getMembershipByUserIdOrganizationId */ .Y)(session.user.id, params.organizationId);
    const { isMember, isBilling } = (0,_formbricks_lib_membership_utils__WEBPACK_IMPORTED_MODULE_7__/* .getAccessFlags */ .c)(membership?.role);
    if (isMember || isBilling) return (0,next_navigation__WEBPACK_IMPORTED_MODULE_5__.notFound)();
    const organization = await (0,_formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_8__/* .getOrganization */ .SA)(params.organizationId);
    if (!organization) {
        throw new Error(t("common.organization_not_found"));
    }
    const organizationProjectsLimit = await (0,_modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_2__/* .getOrganizationProjectsLimit */ .Df)(organization);
    const organizationProjectsCount = await (0,_formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_9__/* .getOrganizationProjectsCount */ .$v)(organization.id);
    if (organizationProjectsCount >= organizationProjectsLimit) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_5__.redirect)(`/`);
    }
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: children
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (OnboardingLayout);


/***/ }),

/***/ 391132:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ProjectSettings: () => (/* binding */ ProjectSettings)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const ProjectSettings = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call ProjectSettings() from the server but ProjectSettings is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/organizations/[organizationId]/projects/new/settings/components/ProjectSettings.tsx",
"ProjectSettings",
);

/***/ }),

/***/ 734208:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_app_onboarding_lib_onboarding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(80104);
/* harmony import */ var _app_app_onboarding_organizations_organizationId_projects_new_settings_components_ProjectSettings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(391132);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(136015);
/* harmony import */ var _modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(532077);
/* harmony import */ var _modules_ui_components_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(474292);
/* harmony import */ var _modules_ui_components_header__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(27287);
/* harmony import */ var _tolgee_server__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(186184);
/* harmony import */ var _barrel_optimize_names_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(438150);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(853648);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(145796);
/* harmony import */ var _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(836919);
/* harmony import */ var _formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(353687);
/* harmony import */ var _formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(529987);















const Page = async (props)=>{
    const searchParams = await props.searchParams;
    const params = await props.params;
    const t = await (0,_tolgee_server__WEBPACK_IMPORTED_MODULE_7__/* .getTranslate */ .r)();
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_8__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_3__/* .authOptions */ .N);
    if (!session || !session.user) {
        return (0,next_navigation__WEBPACK_IMPORTED_MODULE_10__.redirect)(`/auth/login`);
    }
    const channel = searchParams.channel || null;
    const industry = searchParams.industry || null;
    const mode = searchParams.mode || "surveys";
    const projects = await (0,_formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_11__/* .getUserProjects */ ._P)(session.user.id, params.organizationId);
    const organizationTeams = await (0,_app_app_onboarding_lib_onboarding__WEBPACK_IMPORTED_MODULE_1__/* .getTeamsByOrganizationId */ .Y)(params.organizationId);
    const organization = await (0,_formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_12__/* .getOrganization */ .SA)(params.organizationId);
    if (!organization) {
        throw new Error(t("common.organization_not_found"));
    }
    const canDoRoleManagement = await (0,_modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_4__/* .getRoleManagementPermission */ .rQ)(organization);
    if (!organizationTeams) {
        throw new Error(t("common.organization_teams_not_found"));
    }
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "flex min-h-full min-w-full flex-col items-center justify-center space-y-12",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_header__WEBPACK_IMPORTED_MODULE_6__/* .Header */ .Y, {
                title: t("organizations.projects.new.settings.project_settings_title"),
                subtitle: t("organizations.projects.new.settings.project_settings_subtitle")
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_app_onboarding_organizations_organizationId_projects_new_settings_components_ProjectSettings__WEBPACK_IMPORTED_MODULE_2__.ProjectSettings, {
                organizationId: params.organizationId,
                projectMode: mode,
                channel: channel,
                industry: industry,
                defaultBrandColor: _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_13__/* .DEFAULT_BRAND_COLOR */ .iw,
                organizationTeams: organizationTeams,
                canDoRoleManagement: canDoRoleManagement,
                userProjectsCount: projects.length
            }),
            projects.length >= 1 && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_button__WEBPACK_IMPORTED_MODULE_5__/* .Button */ .$, {
                className: "absolute right-5 top-5 !mt-0 text-slate-500 hover:text-slate-700",
                variant: "ghost",
                asChild: true,
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)((next_link__WEBPACK_IMPORTED_MODULE_9___default()), {
                    href: "/",
                    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_XIcon_lucide_react__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .A, {
                        className: "h-7 w-7",
                        strokeWidth: 1.5
                    })
                })
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Page);


/***/ }),

/***/ 921074:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormbricksClient: () => (/* binding */ FormbricksClient)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const FormbricksClient = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call FormbricksClient() from the server but FormbricksClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/(app)/components/FormbricksClient.tsx",
"FormbricksClient",
);

/***/ }),

/***/ 776741:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PosthogIdentify: () => (/* binding */ PosthogIdentify)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const PosthogIdentify = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call PosthogIdentify() from the server but PosthogIdentify is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/components/PosthogIdentify.tsx",
"PosthogIdentify",
);

/***/ }),

/***/ 524160:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_app_components_FormbricksClient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(921074);
/* harmony import */ var _app_IntercomClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(69427);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(136015);
/* harmony import */ var _modules_ui_components_no_mobile_overlay__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(483819);
/* harmony import */ var _modules_ui_components_post_hog_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(695353);
/* harmony import */ var _modules_ui_components_toaster_client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(300620);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(922728);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(836919);
/* harmony import */ var _formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(184511);











const AppLayout = async ({ children })=>{
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_7__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_3__/* .authOptions */ .N);
    const user = session?.user?.id ? await (0,_formbricks_lib_user_service__WEBPACK_IMPORTED_MODULE_9__/* .getUser */ .wz)(session.user.id) : null;
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_no_mobile_overlay__WEBPACK_IMPORTED_MODULE_4__.NoMobileOverlay, {}),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_8__.Suspense, {
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_post_hog_client__WEBPACK_IMPORTED_MODULE_5__.PostHogPageview, {})
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_post_hog_client__WEBPACK_IMPORTED_MODULE_5__.PHProvider, {
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                    children: [
                        user ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_app_components_FormbricksClient__WEBPACK_IMPORTED_MODULE_1__.FormbricksClient, {
                            userId: user.id,
                            email: user.email
                        }) : null,
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_IntercomClient__WEBPACK_IMPORTED_MODULE_2__.IntercomClient, {
                            isIntercomConfigured: _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_10__/* .IS_INTERCOM_CONFIGURED */ .Oz,
                            intercomSecretKey: _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_10__/* .INTERCOM_SECRET_KEY */ .rU,
                            user: user
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_toaster_client__WEBPACK_IMPORTED_MODULE_6__.ToasterClient, {}),
                        children
                    ]
                })
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AppLayout);


/***/ }),

/***/ 69427:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IntercomClient: () => (/* binding */ IntercomClient)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const IntercomClient = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call IntercomClient() from the server but IntercomClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/IntercomClient.tsx",
"IntercomClient",
);

/***/ }),

/***/ 441215:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ teamCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const teamCache = {
    tag: {
        byId (id) {
            return `team-${id}`;
        },
        byProjectId (projectId) {
            return `project-teams-${projectId}`;
        },
        byUserId (userId) {
            return `user-${userId}-teams`;
        },
        byOrganizationId (organizationId) {
            return `organization-${organizationId}-teams`;
        }
    },
    revalidate: ({ id, projectId, userId, organizationId })=>{
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byId(id));
        }
        if (projectId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byProjectId(projectId));
        }
        if (userId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byUserId(userId));
        }
        if (organizationId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byOrganizationId(organizationId));
        }
    }
};


/***/ }),

/***/ 729455:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ checkAuthorizationUpdated)
/* harmony export */ });
/* harmony import */ var _modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(562147);
/* harmony import */ var next_safe_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(717921);
/* harmony import */ var _formbricks_lib_membership_hooks_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(895856);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(207798);




const formatErrors = (issues)=>{
    return {
        ...issues.reduce((acc, issue)=>{
            acc[issue.path.join(".")] = {
                _errors: [
                    issue.message
                ]
            };
            return acc;
        }, {})
    };
};
const teamPermissionWeight = {
    read: 1,
    readWrite: 2,
    manage: 3
};
const teamRoleWeight = {
    contributor: 1,
    admin: 2
};
const checkAuthorizationUpdated = async ({ userId, organizationId, access })=>{
    const role = await (0,_formbricks_lib_membership_hooks_actions__WEBPACK_IMPORTED_MODULE_2__/* .getMembershipRole */ .J)(userId, organizationId);
    for (const accessItem of access){
        if (accessItem.type === "organization") {
            if (accessItem.schema) {
                const resultSchema = accessItem.schema.strict();
                const parsedResult = resultSchema.safeParse(accessItem.data);
                if (!parsedResult.success) {
                    // @ts-expect-error -- TODO: match dynamic next-safe-action types
                    return (0,next_safe_action__WEBPACK_IMPORTED_MODULE_1__/* .returnValidationErrors */ .Di)(resultSchema, formatErrors(parsedResult.error.issues));
                }
            }
            if (accessItem.roles.includes(role)) {
                return true;
            }
        } else {
            if (accessItem.type === "projectTeam") {
                const projectPermission = await (0,_modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_0__/* .getProjectPermissionByUserId */ ._)(userId, accessItem.projectId);
                if (!projectPermission || accessItem.minPermission !== undefined && teamPermissionWeight[projectPermission] < teamPermissionWeight[accessItem.minPermission]) {
                    continue;
                }
            } else {
                const teamRole = await (0,_modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_0__/* .getTeamRoleByTeamIdUserId */ .b)(accessItem.teamId, userId);
                if (!teamRole || accessItem.minPermission !== undefined && teamRoleWeight[teamRole] < teamRoleWeight[accessItem.minPermission]) {
                    continue;
                }
            }
            return true;
        }
    }
    throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_3__/* .AuthorizationError */ .yi("Not authorized");
};


/***/ }),

/***/ 440388:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DU: () => (/* binding */ getProjectIdFromEnvironmentId),
/* harmony export */   EI: () => (/* binding */ getEnvironmentIdFromInsightId),
/* harmony export */   GT: () => (/* binding */ getProjectIdFromLanguageId),
/* harmony export */   HY: () => (/* binding */ getProjectIdFromApiKeyId),
/* harmony export */   IO: () => (/* binding */ getEnvironmentIdFromTagId),
/* harmony export */   Ie: () => (/* binding */ getOrganizationIdFromContactId),
/* harmony export */   M0: () => (/* binding */ getProjectIdFromTagId),
/* harmony export */   Mm: () => (/* binding */ getProjectIdFromInsightId),
/* harmony export */   ND: () => (/* binding */ getOrganizationIdFromResponseNoteId),
/* harmony export */   NZ: () => (/* binding */ getOrganizationIdFromApiKeyId),
/* harmony export */   O$: () => (/* binding */ getOrganizationIdFromLanguageId),
/* harmony export */   PO: () => (/* binding */ getEnvironmentIdFromSegmentId),
/* harmony export */   RM: () => (/* binding */ getProjectIdFromDocumentId),
/* harmony export */   U5: () => (/* binding */ getProjectIdFromIntegrationId),
/* harmony export */   Vd: () => (/* binding */ getOrganizationIdFromWebhookId),
/* harmony export */   X_: () => (/* binding */ getOrganizationIdFromEnvironmentId),
/* harmony export */   Y: () => (/* binding */ getProjectIdFromSurveyId),
/* harmony export */   Zi: () => (/* binding */ getOrganizationIdFromTeamId),
/* harmony export */   a1: () => (/* binding */ getOrganizationIdFromSurveyId),
/* harmony export */   b5: () => (/* binding */ getOrganizationIdFromInviteId),
/* harmony export */   cE: () => (/* binding */ getEnvironmentIdFromSurveyId),
/* harmony export */   gQ: () => (/* binding */ getOrganizationIdFromInsightId),
/* harmony export */   l$: () => (/* binding */ getProjectIdFromResponseId),
/* harmony export */   lp: () => (/* binding */ getProjectIdFromWebhookId),
/* harmony export */   o: () => (/* binding */ getProjectIdFromContactId),
/* harmony export */   pA: () => (/* binding */ getOrganizationIdFromDocumentId),
/* harmony export */   pH: () => (/* binding */ getProjectIdFromSegmentId),
/* harmony export */   qx: () => (/* binding */ getOrganizationIdFromTagId),
/* harmony export */   sD: () => (/* binding */ getProjectIdFromActionClassId),
/* harmony export */   sx: () => (/* binding */ getOrganizationIdFromActionClassId),
/* harmony export */   t1: () => (/* binding */ getEnvironmentIdFromResponseId),
/* harmony export */   tL: () => (/* binding */ getProjectIdFromResponseNoteId),
/* harmony export */   tT: () => (/* binding */ getOrganizationIdFromSegmentId),
/* harmony export */   vE: () => (/* binding */ getOrganizationIdFromResponseId),
/* harmony export */   x7: () => (/* binding */ getOrganizationIdFromProjectId),
/* harmony export */   yW: () => (/* binding */ getOrganizationIdFromIntegrationId)
/* harmony export */ });
/* unused harmony exports getFormattedErrorMessage, getProductIdFromContactId, isStringMatch */
/* harmony import */ var _lib_utils_services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(883212);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(207798);


const getFormattedErrorMessage = (result)=>{
    let message = "";
    if (result.serverError) {
        message = result.serverError;
    } else {
        const errors = result.validationErrors;
        message = Object.keys(errors || {}).map((key)=>{
            if (key === "_errors") return errors[key].join(", ");
            return `${key ? `${key}` : ""}${errors?.[key]?._errors?.join(", ")}`;
        }).join("\n");
    }
    return message;
};
/**
 * GET organization ID from RESOURCE ID
 */ const getOrganizationIdFromProjectId = async (projectId)=>{
    const project = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getProject */ .U1)(projectId);
    if (!project) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("project", projectId);
    }
    return project.organizationId;
};
const getOrganizationIdFromEnvironmentId = async (environmentId)=>{
    const environment = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getEnvironment */ .uc)(environmentId);
    if (!environment) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("environment", environmentId);
    }
    return await getOrganizationIdFromProjectId(environment.projectId);
};
const getOrganizationIdFromSurveyId = async (surveyId)=>{
    const survey = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getSurvey */ .Dp)(surveyId);
    if (!survey) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("survey", surveyId);
    }
    return await getOrganizationIdFromEnvironmentId(survey.environmentId);
};
const getOrganizationIdFromResponseId = async (responseId)=>{
    const response = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getResponse */ .mi)(responseId);
    if (!response) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("response", responseId);
    }
    return await getOrganizationIdFromSurveyId(response.surveyId);
};
const getOrganizationIdFromContactId = async (contactId)=>{
    const contact = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getContact */ .bl)(contactId);
    if (!contact) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("contact", contactId);
    }
    return await getOrganizationIdFromEnvironmentId(contact.environmentId);
};
const getProjectIdFromContactId = async (contactId)=>{
    const contact = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getContact */ .bl)(contactId);
    if (!contact) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("contact", contactId);
    }
    return await getProjectIdFromEnvironmentId(contact.environmentId);
};
const getOrganizationIdFromTagId = async (tagId)=>{
    const tag = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getTag */ .bH)(tagId);
    if (!tag) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("tag", tagId);
    }
    return await getOrganizationIdFromEnvironmentId(tag.environmentId);
};
const getOrganizationIdFromResponseNoteId = async (responseNoteId)=>{
    const responseNote = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getResponseNote */ .Wy)(responseNoteId);
    if (!responseNote) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("responseNote", responseNoteId);
    }
    return await getOrganizationIdFromResponseId(responseNote.responseId);
};
const getOrganizationIdFromSegmentId = async (segmentId)=>{
    const segment = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getSegment */ .kn)(segmentId);
    if (!segment) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("segment", segmentId);
    }
    return await getOrganizationIdFromEnvironmentId(segment.environmentId);
};
const getOrganizationIdFromActionClassId = async (actionClassId)=>{
    const actionClass = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getActionClass */ .Bx)(actionClassId);
    if (!actionClass) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("actionClass", actionClassId);
    }
    return await getOrganizationIdFromEnvironmentId(actionClass.environmentId);
};
const getOrganizationIdFromIntegrationId = async (integrationId)=>{
    const integration = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getIntegration */ .rg)(integrationId);
    if (!integration) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("integration", integrationId);
    }
    return await getOrganizationIdFromEnvironmentId(integration.environmentId);
};
const getOrganizationIdFromWebhookId = async (webhookId)=>{
    const webhook = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getWebhook */ .O0)(webhookId);
    if (!webhook) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("webhook", webhookId);
    }
    return await getOrganizationIdFromEnvironmentId(webhook.environmentId);
};
const getOrganizationIdFromApiKeyId = async (apiKeyId)=>{
    const apiKeyFromServer = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getApiKey */ .CG)(apiKeyId);
    if (!apiKeyFromServer) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("apiKey", apiKeyId);
    }
    return await getOrganizationIdFromEnvironmentId(apiKeyFromServer.environmentId);
};
const getOrganizationIdFromInviteId = async (inviteId)=>{
    const invite = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getInvite */ .I_)(inviteId);
    if (!invite) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("invite", inviteId);
    }
    return invite.organizationId;
};
const getOrganizationIdFromLanguageId = async (languageId)=>{
    const language = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getLanguage */ .Z0)(languageId);
    if (!language) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("language", languageId);
    }
    return await getOrganizationIdFromProjectId(language.projectId);
};
const getOrganizationIdFromTeamId = async (teamId)=>{
    const team = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getTeam */ .Uo)(teamId);
    if (!team) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("team", teamId);
    }
    return team.organizationId;
};
const getOrganizationIdFromInsightId = async (insightId)=>{
    const insight = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getInsight */ .zv)(insightId);
    if (!insight) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("insight", insightId);
    }
    return await getOrganizationIdFromEnvironmentId(insight.environmentId);
};
const getOrganizationIdFromDocumentId = async (documentId)=>{
    const document = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getDocument */ .YE)(documentId);
    if (!document) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("document", documentId);
    }
    return await getOrganizationIdFromEnvironmentId(document.environmentId);
};
// project id helpers
const getProjectIdFromEnvironmentId = async (environmentId)=>{
    const environment = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getEnvironment */ .uc)(environmentId);
    if (!environment) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("environment", environmentId);
    }
    return environment.projectId;
};
const getProjectIdFromSurveyId = async (surveyId)=>{
    const survey = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getSurvey */ .Dp)(surveyId);
    if (!survey) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("survey", surveyId);
    }
    return await getProjectIdFromEnvironmentId(survey.environmentId);
};
const getProjectIdFromInsightId = async (insightId)=>{
    const insight = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getInsight */ .zv)(insightId);
    if (!insight) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("insight", insightId);
    }
    return await getProjectIdFromEnvironmentId(insight.environmentId);
};
const getProjectIdFromSegmentId = async (segmentId)=>{
    const segment = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getSegment */ .kn)(segmentId);
    if (!segment) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("segment", segmentId);
    }
    return await getProjectIdFromEnvironmentId(segment.environmentId);
};
const getProjectIdFromApiKeyId = async (apiKeyId)=>{
    const apiKey = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getApiKey */ .CG)(apiKeyId);
    if (!apiKey) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("apiKey", apiKeyId);
    }
    return await getProjectIdFromEnvironmentId(apiKey.environmentId);
};
const getProjectIdFromActionClassId = async (actionClassId)=>{
    const actionClass = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getActionClass */ .Bx)(actionClassId);
    if (!actionClass) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("actionClass", actionClassId);
    }
    return await getProjectIdFromEnvironmentId(actionClass.environmentId);
};
const getProjectIdFromTagId = async (tagId)=>{
    const tag = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getTag */ .bH)(tagId);
    if (!tag) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("tag", tagId);
    }
    return await getProjectIdFromEnvironmentId(tag.environmentId);
};
const getProjectIdFromLanguageId = async (languageId)=>{
    const language = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getLanguage */ .Z0)(languageId);
    if (!language) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("language", languageId);
    }
    return language.projectId;
};
const getProjectIdFromResponseId = async (responseId)=>{
    const response = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getResponse */ .mi)(responseId);
    if (!response) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("response", responseId);
    }
    return await getProjectIdFromSurveyId(response.surveyId);
};
const getProjectIdFromResponseNoteId = async (responseNoteId)=>{
    const responseNote = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getResponseNote */ .Wy)(responseNoteId);
    if (!responseNote) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("responseNote", responseNoteId);
    }
    return await getProjectIdFromResponseId(responseNote.responseId);
};
const getProductIdFromContactId = async (contactId)=>{
    const contact = await getContact(contactId);
    if (!contact) {
        throw new ResourceNotFoundError("contact", contactId);
    }
    return await getProjectIdFromEnvironmentId(contact.environmentId);
};
const getProjectIdFromDocumentId = async (documentId)=>{
    const document = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getDocument */ .YE)(documentId);
    if (!document) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("document", documentId);
    }
    return await getProjectIdFromEnvironmentId(document.environmentId);
};
const getProjectIdFromIntegrationId = async (integrationId)=>{
    const integration = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getIntegration */ .rg)(integrationId);
    if (!integration) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("integration", integrationId);
    }
    return await getProjectIdFromEnvironmentId(integration.environmentId);
};
const getProjectIdFromWebhookId = async (webhookId)=>{
    const webhook = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getWebhook */ .O0)(webhookId);
    if (!webhook) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("webhook", webhookId);
    }
    return await getProjectIdFromEnvironmentId(webhook.environmentId);
};
// environment id helpers
const getEnvironmentIdFromSurveyId = async (surveyId)=>{
    const survey = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getSurvey */ .Dp)(surveyId);
    if (!survey) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("survey", surveyId);
    }
    return survey.environmentId;
};
const getEnvironmentIdFromResponseId = async (responseId)=>{
    const response = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getResponse */ .mi)(responseId);
    if (!response) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("response", responseId);
    }
    return await getEnvironmentIdFromSurveyId(response.surveyId);
};
const getEnvironmentIdFromInsightId = async (insightId)=>{
    const insight = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getInsight */ .zv)(insightId);
    if (!insight) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("insight", insightId);
    }
    return insight.environmentId;
};
const getEnvironmentIdFromSegmentId = async (segmentId)=>{
    const segment = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getSegment */ .kn)(segmentId);
    if (!segment) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("segment", segmentId);
    }
    return segment.environmentId;
};
const getEnvironmentIdFromTagId = async (tagId)=>{
    const tag = await (0,_lib_utils_services__WEBPACK_IMPORTED_MODULE_0__/* .getTag */ .bH)(tagId);
    if (!tag) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_1__/* .ResourceNotFoundError */ .CE("tag", tagId);
    }
    return tag.environmentId;
};
const isStringMatch = (query, value)=>{
    // lowercase both query and value
    // replace all spaces with empty string
    // replace all underscores with empty string
    // replace all dashes with empty string
    const queryModified = query.toLowerCase().replace(/ /g, "").replace(/_/g, "").replace(/-/g, "");
    const valueModified = value.toLowerCase().replace(/ /g, "").replace(/_/g, "").replace(/-/g, "");
    return valueModified.includes(queryModified);
};


/***/ }),

/***/ 725322:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  KH: () => (/* binding */ getIsAIEnabled),
  dZ: () => (/* binding */ getIsContactsEnabled),
  pn: () => (/* binding */ getIsMultiOrgEnabled),
  PN: () => (/* binding */ getIsOrganizationAIReady),
  LO: () => (/* binding */ getIsTwoFactorAuthEnabled),
  x: () => (/* binding */ getMultiLanguagePermission),
  Df: () => (/* binding */ getOrganizationProjectsLimit),
  tr: () => (/* binding */ getRemoveBrandingPermission),
  rQ: () => (/* binding */ getRoleManagementPermission),
  nX: () => (/* binding */ getWhiteLabelPermission)
});

// UNUSED EXPORTS: fetchLicense, getBiggerUploadFileSizePermission, getEnterpriseLicense, getIsSSOEnabled, getLicenseFeatures

// EXTERNAL MODULE: ../../node_modules/https-proxy-agent/dist/index.js
var dist = __webpack_require__(876930);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/server.js
var server = __webpack_require__(995971);
// EXTERNAL MODULE: ./node_modules/node-fetch/src/index.js + 12 modules
var src = __webpack_require__(11886);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js
var react = __webpack_require__(645625);
// EXTERNAL MODULE: ../../packages/database/src/index.ts + 1 modules
var database_src = __webpack_require__(482859);
// EXTERNAL MODULE: ../../packages/lib/cache.ts
var cache = __webpack_require__(48165);
// EXTERNAL MODULE: ../../node_modules/next/cache.js
var next_cache = __webpack_require__(310256);
// EXTERNAL MODULE: ../../packages/lib/constants.ts
var constants = __webpack_require__(711344);
// EXTERNAL MODULE: ../../packages/lib/env.ts
var env = __webpack_require__(333258);
// EXTERNAL MODULE: external "crypto"
var external_crypto_ = __webpack_require__(455511);
var external_crypto_default = /*#__PURE__*/__webpack_require__.n(external_crypto_);
;// ../../packages/lib/hashString.ts

const hashString = (string)=>{
    return external_crypto_default().createHash("sha256").update(string).digest("hex");
};

;// ./modules/ee/license-check/lib/utils.ts










const hashedKey = constants/* ENTERPRISE_LICENSE_KEY */.an ? hashString(constants/* ENTERPRISE_LICENSE_KEY */.an) : undefined;
const PREVIOUS_RESULTS_CACHE_TAG_KEY = `getPreviousResult-${hashedKey}`;
// This function is used to get the previous result of the license check from the cache
// This might seem confusing at first since we only return the default value from this function,
// but since we are using a cache and the cache key is the same, the cache will return the previous result - so this function acts as a cache getter
const getPreviousResult = ()=>(0,cache/* cache */.P)(async ()=>({
            active: null,
            lastChecked: new Date(0),
            features: null
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
// This function is used to set the previous result of the license check to the cache so that we can use it in the next call
// Uses the same cache key as the getPreviousResult function
const setPreviousResult = async (previousResult)=>{
    const { lastChecked, active, features } = previousResult;
    await (0,cache/* cache */.P)(async ()=>({
            active,
            lastChecked,
            features
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
    (0,server.after)(()=>{
        (0,next_cache.revalidateTag)(PREVIOUS_RESULTS_CACHE_TAG_KEY);
    });
};
const fetchLicenseForE2ETesting = async ()=>{
    const currentTime = new Date();
    try {
        const previousResult = await getPreviousResult();
        if (previousResult.lastChecked.getTime() === new Date(0).getTime()) {
            // first call
            const newResult = {
                active: true,
                features: {
                    isMultiOrgEnabled: true,
                    twoFactorAuth: true,
                    sso: true,
                    contacts: true,
                    projects: 3,
                    whitelabel: true,
                    removeBranding: true,
                    ai: true
                },
                lastChecked: currentTime
            };
            await setPreviousResult(newResult);
            return newResult;
        } else if (currentTime.getTime() - previousResult.lastChecked.getTime() > 60 * 60 * 1000) {
            // Fail after 1 hour
            console.log("E2E_TESTING is enabled. Enterprise license was revoked after 1 hour.");
            return null;
        }
        return previousResult;
    } catch (error) {
        console.error("Error fetching license: ", error);
        return null;
    }
};
const getEnterpriseLicense = async ()=>{
    if (!constants/* ENTERPRISE_LICENSE_KEY */.an || constants/* ENTERPRISE_LICENSE_KEY */.an.length === 0) {
        return {
            active: false,
            features: null,
            lastChecked: new Date()
        };
    }
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return {
            active: previousResult?.active ?? false,
            features: previousResult ? previousResult.features : null,
            lastChecked: previousResult ? previousResult.lastChecked : new Date()
        };
    }
    // if the server responds with a boolean, we return it
    // if the server errors, we return null
    // null signifies an error
    const license = await fetchLicense();
    const isValid = license ? license.status === "active" : null;
    const threeDaysInMillis = 3 * 24 * 60 * 60 * 1000;
    const currentTime = new Date();
    const previousResult = await getPreviousResult();
    // Case: First time checking license and the server errors out
    if (previousResult.active === null) {
        if (isValid === null) {
            const newResult = {
                active: false,
                features: {
                    isMultiOrgEnabled: false,
                    projects: 3,
                    twoFactorAuth: false,
                    sso: false,
                    whitelabel: false,
                    removeBranding: false,
                    contacts: false,
                    ai: false
                },
                lastChecked: new Date()
            };
            await setPreviousResult(newResult);
            return newResult;
        }
    }
    if (isValid !== null && license) {
        const newResult = {
            active: isValid,
            features: license.features,
            lastChecked: new Date()
        };
        await setPreviousResult(newResult);
        return newResult;
    } else {
        // if result is undefined -> error
        // if the last check was less than 72 hours, return the previous value:
        const elapsedTime = currentTime.getTime() - previousResult.lastChecked.getTime();
        if (elapsedTime < threeDaysInMillis) {
            return {
                active: previousResult.active !== null ? previousResult.active : false,
                features: previousResult.features,
                lastChecked: previousResult.lastChecked,
                isPendingDowngrade: true
            };
        }
        // Log error only after 72 hours
        console.error("Error while checking license: The license check failed");
        return {
            active: false,
            features: null,
            lastChecked: previousResult.lastChecked,
            isPendingDowngrade: true
        };
    }
};
const getLicenseFeatures = async ()=>{
    const previousResult = await getPreviousResult();
    if (previousResult.features) {
        return previousResult.features;
    } else {
        const license = await fetchLicense();
        if (!license || !license.features) return null;
        return license.features;
    }
};
const fetchLicense = (0,react.cache)(async ()=>(0,cache/* cache */.P)(async ()=>{
        if (!env/* env */._.ENTERPRISE_LICENSE_KEY) return null;
        try {
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 1); // January 1st of the current year
            const endOfYear = new Date(now.getFullYear() + 1, 0, 0); // December 31st of the current year
            const responseCount = await database_src/* prisma */.z.response.count({
                where: {
                    createdAt: {
                        gte: startOfYear,
                        lt: endOfYear
                    }
                }
            });
            const proxyUrl = env/* env */._.HTTPS_PROXY || env/* env */._.HTTP_PROXY;
            const agent = proxyUrl ? new dist.HttpsProxyAgent(proxyUrl) : undefined;
            const res = await (0,src/* default */.Ay)("https://ee.formbricks.com/api/licenses/check", {
                body: JSON.stringify({
                    licenseKey: constants/* ENTERPRISE_LICENSE_KEY */.an,
                    usage: {
                        responseCount: responseCount
                    }
                }),
                headers: {
                    "Content-Type": "application/json"
                },
                method: "POST",
                agent
            });
            if (res.ok) {
                const responseJson = await res.json();
                return responseJson.data;
            }
            return null;
        } catch (error) {
            console.error("Error while checking license: ", error);
            return null;
        }
    }, [
        `fetchLicense-${hashedKey}`
    ], {
        revalidate: 60 * 60 * 24
    })());
const getRemoveBrandingPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.removeBranding ?? false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.removeBranding;
    }
};
const getWhiteLabelPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.whitelabel ?? false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.whitelabel;
    }
};
const getRoleManagementPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getBiggerUploadFileSizePermission = async (organization)=>{
    if (IS_FORMBRICKS_CLOUD) return organization.billing.plan !== PROJECT_FEATURE_KEYS.FREE;
    else if (!IS_FORMBRICKS_CLOUD) return (await getEnterpriseLicense()).active;
    return false;
};
const getMultiLanguagePermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getIsMultiOrgEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.isMultiOrgEnabled : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.isMultiOrgEnabled;
};
const getIsContactsEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.contacts : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.contacts;
};
const getIsTwoFactorAuthEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.twoFactorAuth : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.twoFactorAuth;
};
const getIsSSOEnabled = async ()=>{
    if (E2E_TESTING) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.sso : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.sso;
};
const getIsOrganizationAIReady = async (billingPlan)=>{
    if (!constants/* IS_AI_CONFIGURED */.T1) return false;
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.ai : false;
    }
    const license = await getEnterpriseLicense();
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) {
        return Boolean(license.features?.ai && billingPlan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE);
    }
    return Boolean(license.features?.ai);
};
const getIsAIEnabled = async (organization)=>{
    return organization.isAIEnabled && await getIsOrganizationAIReady(organization.billing.plan);
};
const getOrganizationProjectsLimit = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.projects ?? Infinity : 3;
    }
    let limit;
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        limit = organization.billing.limits.projects ?? Infinity;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) {
            limit = 3;
        } else {
            limit = licenseFeatures.projects ?? Infinity;
        }
    }
    return limit;
};


/***/ }),

/***/ 532077:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  AM: () => (/* binding */ getBiggerUploadFileSizePermission),
  Zd: () => (/* binding */ getEnterpriseLicense),
  KH: () => (/* binding */ getIsAIEnabled),
  dZ: () => (/* binding */ getIsContactsEnabled),
  pn: () => (/* binding */ getIsMultiOrgEnabled),
  PN: () => (/* binding */ getIsOrganizationAIReady),
  xT: () => (/* binding */ getIsSSOEnabled),
  LO: () => (/* binding */ getIsTwoFactorAuthEnabled),
  x: () => (/* binding */ getMultiLanguagePermission),
  Df: () => (/* binding */ getOrganizationProjectsLimit),
  rQ: () => (/* binding */ getRoleManagementPermission),
  nX: () => (/* binding */ getWhiteLabelPermission)
});

// UNUSED EXPORTS: fetchLicense, getLicenseFeatures, getRemoveBrandingPermission

// EXTERNAL MODULE: ../../node_modules/https-proxy-agent/dist/index.js
var dist = __webpack_require__(599069);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/server.js
var server = __webpack_require__(861238);
// EXTERNAL MODULE: ./node_modules/node-fetch/src/index.js + 12 modules
var src = __webpack_require__(817762);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js
var react = __webpack_require__(922728);
// EXTERNAL MODULE: ../../packages/database/src/index.ts + 1 modules
var database_src = __webpack_require__(527610);
// EXTERNAL MODULE: ../../packages/lib/cache.ts
var cache = __webpack_require__(794356);
// EXTERNAL MODULE: ../../node_modules/next/cache.js
var next_cache = __webpack_require__(87863);
// EXTERNAL MODULE: ../../packages/lib/constants.ts
var constants = __webpack_require__(836919);
// EXTERNAL MODULE: ../../packages/lib/env.ts
var env = __webpack_require__(162437);
// EXTERNAL MODULE: external "crypto"
var external_crypto_ = __webpack_require__(455511);
var external_crypto_default = /*#__PURE__*/__webpack_require__.n(external_crypto_);
;// ../../packages/lib/hashString.ts

const hashString = (string)=>{
    return external_crypto_default().createHash("sha256").update(string).digest("hex");
};

;// ./modules/ee/license-check/lib/utils.ts










const hashedKey = constants/* ENTERPRISE_LICENSE_KEY */.an ? hashString(constants/* ENTERPRISE_LICENSE_KEY */.an) : undefined;
const PREVIOUS_RESULTS_CACHE_TAG_KEY = `getPreviousResult-${hashedKey}`;
// This function is used to get the previous result of the license check from the cache
// This might seem confusing at first since we only return the default value from this function,
// but since we are using a cache and the cache key is the same, the cache will return the previous result - so this function acts as a cache getter
const getPreviousResult = ()=>(0,cache/* cache */.P)(async ()=>({
            active: null,
            lastChecked: new Date(0),
            features: null
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
// This function is used to set the previous result of the license check to the cache so that we can use it in the next call
// Uses the same cache key as the getPreviousResult function
const setPreviousResult = async (previousResult)=>{
    const { lastChecked, active, features } = previousResult;
    await (0,cache/* cache */.P)(async ()=>({
            active,
            lastChecked,
            features
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
    (0,server.after)(()=>{
        (0,next_cache.revalidateTag)(PREVIOUS_RESULTS_CACHE_TAG_KEY);
    });
};
const fetchLicenseForE2ETesting = async ()=>{
    const currentTime = new Date();
    try {
        const previousResult = await getPreviousResult();
        if (previousResult.lastChecked.getTime() === new Date(0).getTime()) {
            // first call
            const newResult = {
                active: true,
                features: {
                    isMultiOrgEnabled: true,
                    twoFactorAuth: true,
                    sso: true,
                    contacts: true,
                    projects: 3,
                    whitelabel: true,
                    removeBranding: true,
                    ai: true
                },
                lastChecked: currentTime
            };
            await setPreviousResult(newResult);
            return newResult;
        } else if (currentTime.getTime() - previousResult.lastChecked.getTime() > 60 * 60 * 1000) {
            // Fail after 1 hour
            console.log("E2E_TESTING is enabled. Enterprise license was revoked after 1 hour.");
            return null;
        }
        return previousResult;
    } catch (error) {
        console.error("Error fetching license: ", error);
        return null;
    }
};
const getEnterpriseLicense = async ()=>{
    if (!constants/* ENTERPRISE_LICENSE_KEY */.an || constants/* ENTERPRISE_LICENSE_KEY */.an.length === 0) {
        return {
            active: false,
            features: null,
            lastChecked: new Date()
        };
    }
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return {
            active: previousResult?.active ?? false,
            features: previousResult ? previousResult.features : null,
            lastChecked: previousResult ? previousResult.lastChecked : new Date()
        };
    }
    // if the server responds with a boolean, we return it
    // if the server errors, we return null
    // null signifies an error
    const license = await fetchLicense();
    const isValid = license ? license.status === "active" : null;
    const threeDaysInMillis = 3 * 24 * 60 * 60 * 1000;
    const currentTime = new Date();
    const previousResult = await getPreviousResult();
    // Case: First time checking license and the server errors out
    if (previousResult.active === null) {
        if (isValid === null) {
            const newResult = {
                active: false,
                features: {
                    isMultiOrgEnabled: false,
                    projects: 3,
                    twoFactorAuth: false,
                    sso: false,
                    whitelabel: false,
                    removeBranding: false,
                    contacts: false,
                    ai: false
                },
                lastChecked: new Date()
            };
            await setPreviousResult(newResult);
            return newResult;
        }
    }
    if (isValid !== null && license) {
        const newResult = {
            active: isValid,
            features: license.features,
            lastChecked: new Date()
        };
        await setPreviousResult(newResult);
        return newResult;
    } else {
        // if result is undefined -> error
        // if the last check was less than 72 hours, return the previous value:
        const elapsedTime = currentTime.getTime() - previousResult.lastChecked.getTime();
        if (elapsedTime < threeDaysInMillis) {
            return {
                active: previousResult.active !== null ? previousResult.active : false,
                features: previousResult.features,
                lastChecked: previousResult.lastChecked,
                isPendingDowngrade: true
            };
        }
        // Log error only after 72 hours
        console.error("Error while checking license: The license check failed");
        return {
            active: false,
            features: null,
            lastChecked: previousResult.lastChecked,
            isPendingDowngrade: true
        };
    }
};
const getLicenseFeatures = async ()=>{
    const previousResult = await getPreviousResult();
    if (previousResult.features) {
        return previousResult.features;
    } else {
        const license = await fetchLicense();
        if (!license || !license.features) return null;
        return license.features;
    }
};
const fetchLicense = (0,react.cache)(async ()=>(0,cache/* cache */.P)(async ()=>{
        if (!env/* env */._.ENTERPRISE_LICENSE_KEY) return null;
        try {
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 1); // January 1st of the current year
            const endOfYear = new Date(now.getFullYear() + 1, 0, 0); // December 31st of the current year
            const responseCount = await database_src/* prisma */.z.response.count({
                where: {
                    createdAt: {
                        gte: startOfYear,
                        lt: endOfYear
                    }
                }
            });
            const proxyUrl = env/* env */._.HTTPS_PROXY || env/* env */._.HTTP_PROXY;
            const agent = proxyUrl ? new dist.HttpsProxyAgent(proxyUrl) : undefined;
            const res = await (0,src/* default */.Ay)("https://ee.formbricks.com/api/licenses/check", {
                body: JSON.stringify({
                    licenseKey: constants/* ENTERPRISE_LICENSE_KEY */.an,
                    usage: {
                        responseCount: responseCount
                    }
                }),
                headers: {
                    "Content-Type": "application/json"
                },
                method: "POST",
                agent
            });
            if (res.ok) {
                const responseJson = await res.json();
                return responseJson.data;
            }
            return null;
        } catch (error) {
            console.error("Error while checking license: ", error);
            return null;
        }
    }, [
        `fetchLicense-${hashedKey}`
    ], {
        revalidate: 60 * 60 * 24
    })());
const getRemoveBrandingPermission = async (organization)=>{
    if (E2E_TESTING) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.removeBranding ?? false;
    }
    if (IS_FORMBRICKS_CLOUD && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== PROJECT_FEATURE_KEYS.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.removeBranding;
    }
};
const getWhiteLabelPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.whitelabel ?? false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.whitelabel;
    }
};
const getRoleManagementPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getBiggerUploadFileSizePermission = async (organization)=>{
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getMultiLanguagePermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getIsMultiOrgEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.isMultiOrgEnabled : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.isMultiOrgEnabled;
};
const getIsContactsEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.contacts : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.contacts;
};
const getIsTwoFactorAuthEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.twoFactorAuth : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.twoFactorAuth;
};
const getIsSSOEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.sso : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.sso;
};
const getIsOrganizationAIReady = async (billingPlan)=>{
    if (!constants/* IS_AI_CONFIGURED */.T1) return false;
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.ai : false;
    }
    const license = await getEnterpriseLicense();
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) {
        return Boolean(license.features?.ai && billingPlan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE);
    }
    return Boolean(license.features?.ai);
};
const getIsAIEnabled = async (organization)=>{
    return organization.isAIEnabled && await getIsOrganizationAIReady(organization.billing.plan);
};
const getOrganizationProjectsLimit = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.projects ?? Infinity : 3;
    }
    let limit;
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        limit = organization.billing.limits.projects ?? Infinity;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) {
            limit = 3;
        } else {
            limit = licenseFeatures.projects ?? Infinity;
        }
    }
    return limit;
};


/***/ }),

/***/ 562147:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _: () => (/* binding */ getProjectPermissionByUserId),
/* harmony export */   b: () => (/* binding */ getTeamRoleByTeamIdUserId)
/* harmony export */ });
/* harmony import */ var _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(753304);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(896330);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(645625);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _formbricks_database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(482859);
/* harmony import */ var _formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(48165);
/* harmony import */ var _formbricks_lib_membership_cache__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(920318);
/* harmony import */ var _formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(472749);
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(552224);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(207798);










const getProjectPermissionByUserId = (0,react__WEBPACK_IMPORTED_MODULE_2__.cache)(async (userId, projectId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_4__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_5__/* .validateInputs */ .C)([
            userId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZString */ .eI
        ], [
            projectId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZString */ .eI
        ]);
        try {
            const projectMemberships = await _formbricks_database__WEBPACK_IMPORTED_MODULE_3__/* .prisma */ .z.projectTeam.findMany({
                where: {
                    projectId,
                    team: {
                        teamUsers: {
                            some: {
                                userId
                            }
                        }
                    }
                }
            });
            if (!projectMemberships) return null;
            let highestPermission = null;
            for (const membership of projectMemberships){
                if (membership.permission === "manage") {
                    highestPermission = "manage";
                } else if (membership.permission === "readWrite" && highestPermission !== "manage") {
                    highestPermission = "readWrite";
                } else if (membership.permission === "read" && highestPermission !== "manage" && highestPermission !== "readWrite") {
                    highestPermission = "read";
                }
            }
            return highestPermission;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.PrismaClientKnownRequestError) {
                console.error(error);
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__/* .DatabaseError */ .a$(error.message);
            }
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__/* .UnknownError */ .Bk("Error while fetching membership");
        }
    }, [
        `getProjectPermissionByUserId-${userId}-${projectId}`
    ], {
        tags: [
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__/* .teamCache */ .g.tag.byUserId(userId),
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__/* .teamCache */ .g.tag.byProjectId(projectId)
        ]
    })());
const getTeamRoleByTeamIdUserId = (0,react__WEBPACK_IMPORTED_MODULE_2__.cache)(async (teamId, userId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_4__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_5__/* .validateInputs */ .C)([
            teamId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZId */ .i4
        ], [
            userId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZId */ .i4
        ]);
        try {
            const teamUser = await _formbricks_database__WEBPACK_IMPORTED_MODULE_3__/* .prisma */ .z.teamUser.findUnique({
                where: {
                    teamId_userId: {
                        teamId,
                        userId
                    }
                }
            });
            if (!teamUser) {
                return null;
            }
            return teamUser.role;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `getTeamMembershipByTeamIdUserId-${teamId}-${userId}`
    ], {
        tags: [
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__/* .teamCache */ .g.tag.byId(teamId),
            _formbricks_lib_membership_cache__WEBPACK_IMPORTED_MODULE_8__/* .membershipCache */ .r.tag.byUserId(userId)
        ]
    })());


/***/ }),

/***/ 908740:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   gA: () => (/* binding */ createProject),
/* harmony export */   vr: () => (/* binding */ updateProject),
/* harmony export */   xx: () => (/* binding */ deleteProject)
/* harmony export */ });
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(896330);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(283131);
/* harmony import */ var _formbricks_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(482859);
/* harmony import */ var _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(711344);
/* harmony import */ var _formbricks_lib_environment_cache__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(37483);
/* harmony import */ var _formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(43264);
/* harmony import */ var _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(595111);
/* harmony import */ var _formbricks_lib_storage_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(117396);
/* harmony import */ var _formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(472749);
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(552224);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(207798);
/* harmony import */ var _formbricks_types_project__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(773518);













const selectProject = {
    id: true,
    createdAt: true,
    updatedAt: true,
    name: true,
    organizationId: true,
    languages: true,
    recontactDays: true,
    linkSurveyBranding: true,
    inAppSurveyBranding: true,
    config: true,
    placement: true,
    clickOutsideClose: true,
    darkOverlay: true,
    environments: true,
    styling: true,
    logo: true
};
const updateProject = async (projectId, inputProject)=>{
    (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_2__/* .validateInputs */ .C)([
        projectId,
        _formbricks_types_common__WEBPACK_IMPORTED_MODULE_3__/* .ZId */ .i4
    ], [
        inputProject,
        _formbricks_types_project__WEBPACK_IMPORTED_MODULE_4__/* .ZProjectUpdateInput */ .RQ
    ]);
    const { environments, ...data } = inputProject;
    let updatedProject;
    try {
        updatedProject = await _formbricks_database__WEBPACK_IMPORTED_MODULE_1__/* .prisma */ .z.project.update({
            where: {
                id: projectId
            },
            data: {
                ...data,
                environments: {
                    connect: environments?.map((environment)=>({
                            id: environment.id
                        })) ?? []
                }
            },
            select: selectProject
        });
    } catch (error) {
        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError) {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__/* .DatabaseError */ .a$(error.message);
        }
        throw error;
    }
    try {
        const project = _formbricks_types_project__WEBPACK_IMPORTED_MODULE_4__/* .ZProject */ .AK.parse(updatedProject);
        _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_6__/* .projectCache */ .E.revalidate({
            id: project.id,
            organizationId: project.organizationId
        });
        project.environments.forEach((environment)=>{
            // revalidate environment cache
            _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_6__/* .projectCache */ .E.revalidate({
                environmentId: environment.id
            });
        });
        return project;
    } catch (error) {
        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_7__.z.ZodError) {
            console.error(JSON.stringify(error.errors, null, 2));
        }
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__/* .ValidationError */ .yI("Data validation of project failed");
    }
};
const createProject = async (organizationId, projectInput)=>{
    (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_2__/* .validateInputs */ .C)([
        organizationId,
        _formbricks_types_common__WEBPACK_IMPORTED_MODULE_3__/* .ZString */ .eI
    ], [
        projectInput,
        _formbricks_types_project__WEBPACK_IMPORTED_MODULE_4__/* .ZProjectUpdateInput */ .RQ.partial()
    ]);
    if (!projectInput.name) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__/* .ValidationError */ .yI("Project Name is required");
    }
    const { environments, teamIds, ...data } = projectInput;
    try {
        let project = await _formbricks_database__WEBPACK_IMPORTED_MODULE_1__/* .prisma */ .z.project.create({
            data: {
                config: {
                    channel: null,
                    industry: null
                },
                ...data,
                name: projectInput.name,
                organizationId
            },
            select: selectProject
        });
        if (teamIds) {
            await _formbricks_database__WEBPACK_IMPORTED_MODULE_1__/* .prisma */ .z.projectTeam.createMany({
                data: teamIds.map((teamId)=>({
                        projectId: project.id,
                        teamId
                    }))
            });
        }
        _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_6__/* .projectCache */ .E.revalidate({
            id: project.id,
            organizationId: project.organizationId
        });
        const devEnvironment = await (0,_formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_8__/* .createEnvironment */ .MO)(project.id, {
            type: "development"
        });
        const prodEnvironment = await (0,_formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_8__/* .createEnvironment */ .MO)(project.id, {
            type: "production"
        });
        const updatedProject = await updateProject(project.id, {
            environments: [
                devEnvironment,
                prodEnvironment
            ]
        });
        return updatedProject;
    } catch (error) {
        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError && error.code === "P2002") {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__/* .InvalidInputError */ .oC("A project with this name already exists in your organization");
        }
        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError) {
            if (error.code === "P2002") {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__/* .InvalidInputError */ .oC("A project with this name already exists in this organization");
            }
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__/* .DatabaseError */ .a$(error.message);
        }
        throw error;
    }
};
const deleteProject = async (projectId)=>{
    try {
        const project = await _formbricks_database__WEBPACK_IMPORTED_MODULE_1__/* .prisma */ .z.project.delete({
            where: {
                id: projectId
            },
            select: selectProject
        });
        if (project) {
            // delete all files from storage related to this project
            if ((0,_formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_9__/* .isS3Configured */ .$Y)()) {
                const s3FilesPromises = project.environments.map(async (environment)=>{
                    return (0,_formbricks_lib_storage_service__WEBPACK_IMPORTED_MODULE_10__/* .deleteS3FilesByEnvironmentId */ .A6)(environment.id);
                });
                try {
                    await Promise.all(s3FilesPromises);
                } catch (err) {
                    // fail silently because we don't want to throw an error if the files are not deleted
                    console.error(err);
                }
            } else {
                const localFilesPromises = project.environments.map(async (environment)=>{
                    return (0,_formbricks_lib_storage_service__WEBPACK_IMPORTED_MODULE_10__/* .deleteLocalFilesByEnvironmentId */ .Z5)(environment.id);
                });
                try {
                    await Promise.all(localFilesPromises);
                } catch (err) {
                    // fail silently because we don't want to throw an error if the files are not deleted
                    console.error(err);
                }
            }
            _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_6__/* .projectCache */ .E.revalidate({
                id: project.id,
                organizationId: project.organizationId
            });
            _formbricks_lib_environment_cache__WEBPACK_IMPORTED_MODULE_11__/* .environmentCache */ .e.revalidate({
                projectId: project.id
            });
            project.environments.forEach((environment)=>{
                // revalidate project cache
                _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_6__/* .projectCache */ .E.revalidate({
                    environmentId: environment.id
                });
                _formbricks_lib_environment_cache__WEBPACK_IMPORTED_MODULE_11__/* .environmentCache */ .e.revalidate({
                    id: environment.id
                });
            });
        }
        return project;
    } catch (error) {
        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError) {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_5__/* .DatabaseError */ .a$(error.message);
        }
        throw error;
    }
};


/***/ }),

/***/ 27287:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ Header)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(922728);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


const Header = ({ title, subtitle })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "space-y-8 text-center",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                className: "text-4xl font-medium text-slate-800",
                children: title
            }),
            subtitle && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                className: "text-slate-500",
                children: subtitle
            })
        ]
    });
};


/***/ }),

/***/ 483819:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NoMobileOverlay: () => (/* binding */ NoMobileOverlay)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const NoMobileOverlay = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call NoMobileOverlay() from the server but NoMobileOverlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/modules/ui/components/no-mobile-overlay/index.tsx",
"NoMobileOverlay",
);

/***/ }),

/***/ 300620:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ToasterClient: () => (/* binding */ ToasterClient)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const ToasterClient = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call ToasterClient() from the server but ToasterClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/modules/ui/components/toaster-client/index.tsx",
"ToasterClient",
);

/***/ }),

/***/ 438150:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ X)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(652793);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const X = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("X", [
    [
        "path",
        {
            d: "M18 6 6 18",
            key: "1bl5f8"
        }
    ],
    [
        "path",
        {
            d: "m6 6 12 12",
            key: "d8bk6v"
        }
    ]
]);
 //# sourceMappingURL=x.js.map


/***/ }),

/***/ 7262:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
var __webpack_unused_export__;
// This function ensures that all the exported values are valid server actions,
// during the runtime. By definition all actions are required to be async
// functions, but here we can only check that they are functions.

__webpack_unused_export__ = ({
    value: true
});
Object.defineProperty(exports, "D", ({
    enumerable: true,
    get: function() {
        return ensureServerEntryExports;
    }
}));
function ensureServerEntryExports(actions) {
    for(let i = 0; i < actions.length; i++){
        const action = actions[i];
        if (typeof action !== 'function') {
            throw new Error(`A "use server" file can only export async functions, found ${typeof action}.\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`);
        }
    }
} //# sourceMappingURL=action-validate.js.map


/***/ }),

/***/ 910330:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var __webpack_unused_export__;
/* eslint-disable import/no-extraneous-dependencies */ 
__webpack_unused_export__ = ({
    value: true
});
Object.defineProperty(exports, "A", ({
    enumerable: true,
    get: function() {
        return _serveredge.registerServerReference;
    }
}));
const _serveredge = __webpack_require__(672771);

//# sourceMappingURL=server-reference.js.map

/***/ }),

/***/ 438658:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
0 && (0);
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    arrayBufferToString: function() {
        return arrayBufferToString;
    },
    decrypt: function() {
        return decrypt;
    },
    encrypt: function() {
        return encrypt;
    },
    getActionEncryptionKey: function() {
        return getActionEncryptionKey;
    },
    getClientReferenceManifestForRsc: function() {
        return getClientReferenceManifestForRsc;
    },
    getServerModuleMap: function() {
        return getServerModuleMap;
    },
    setReferenceManifestsSingleton: function() {
        return setReferenceManifestsSingleton;
    },
    stringToUint8Array: function() {
        return stringToUint8Array;
    }
});
const _invarianterror = __webpack_require__(260233);
const _apppaths = __webpack_require__(789322);
const _workasyncstorageexternal = __webpack_require__(529294);
let __next_loaded_action_key;
function arrayBufferToString(buffer) {
    const bytes = new Uint8Array(buffer);
    const len = bytes.byteLength;
    // @anonrig: V8 has a limit of 65535 arguments in a function.
    // For len < 65535, this is faster.
    // https://github.com/vercel/next.js/pull/56377#pullrequestreview-1656181623
    if (len < 65535) {
        return String.fromCharCode.apply(null, bytes);
    }
    let binary = '';
    for(let i = 0; i < len; i++){
        binary += String.fromCharCode(bytes[i]);
    }
    return binary;
}
function stringToUint8Array(binary) {
    const len = binary.length;
    const arr = new Uint8Array(len);
    for(let i = 0; i < len; i++){
        arr[i] = binary.charCodeAt(i);
    }
    return arr;
}
function encrypt(key, iv, data) {
    return crypto.subtle.encrypt({
        name: 'AES-GCM',
        iv
    }, key, data);
}
function decrypt(key, iv, data) {
    return crypto.subtle.decrypt({
        name: 'AES-GCM',
        iv
    }, key, data);
}
// This is a global singleton that is used to encode/decode the action bound args from
// the closure. This can't be using a AsyncLocalStorage as it might happen on the module
// level. Since the client reference manifest won't be mutated, let's use a global singleton
// to keep it.
const SERVER_ACTION_MANIFESTS_SINGLETON = Symbol.for('next.server.action-manifests');
function setReferenceManifestsSingleton({ page, clientReferenceManifest, serverActionsManifest, serverModuleMap }) {
    var _globalThis_SERVER_ACTION_MANIFESTS_SINGLETON;
    // @ts-expect-error
    const clientReferenceManifestsPerPage = (_globalThis_SERVER_ACTION_MANIFESTS_SINGLETON = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON]) == null ? void 0 : _globalThis_SERVER_ACTION_MANIFESTS_SINGLETON.clientReferenceManifestsPerPage;
    // @ts-expect-error
    globalThis[SERVER_ACTION_MANIFESTS_SINGLETON] = {
        clientReferenceManifestsPerPage: {
            ...clientReferenceManifestsPerPage,
            [(0, _apppaths.normalizeAppPath)(page)]: clientReferenceManifest
        },
        serverActionsManifest,
        serverModuleMap
    };
}
function getServerModuleMap() {
    const serverActionsManifestSingleton = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON];
    if (!serverActionsManifestSingleton) {
        throw new _invarianterror.InvariantError('Missing manifest for Server Actions.');
    }
    return serverActionsManifestSingleton.serverModuleMap;
}
function getClientReferenceManifestForRsc() {
    const serverActionsManifestSingleton = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON];
    if (!serverActionsManifestSingleton) {
        throw new _invarianterror.InvariantError('Missing manifest for Server Actions.');
    }
    const { clientReferenceManifestsPerPage } = serverActionsManifestSingleton;
    const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();
    if (!workStore) {
        // If there's no work store defined, we can assume that a client reference
        // manifest is needed during module evaluation, e.g. to create a server
        // action using a higher-order function. This might also use client
        // components which need to be serialized by Flight, and therefore client
        // references need to be resolvable. To make this work, we're returning a
        // merged manifest across all pages. This is fine as long as the module IDs
        // are not page specific, which they are not for Webpack. TODO: Fix this in
        // Turbopack.
        return mergeClientReferenceManifests(clientReferenceManifestsPerPage);
    }
    const clientReferenceManifest = clientReferenceManifestsPerPage[workStore.route];
    if (!clientReferenceManifest) {
        throw new _invarianterror.InvariantError(`Missing Client Reference Manifest for ${workStore.route}.`);
    }
    return clientReferenceManifest;
}
async function getActionEncryptionKey() {
    if (__next_loaded_action_key) {
        return __next_loaded_action_key;
    }
    const serverActionsManifestSingleton = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON];
    if (!serverActionsManifestSingleton) {
        throw new _invarianterror.InvariantError('Missing manifest for Server Actions.');
    }
    const rawKey = process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY || serverActionsManifestSingleton.serverActionsManifest.encryptionKey;
    if (rawKey === undefined) {
        throw new _invarianterror.InvariantError('Missing encryption key for Server Actions');
    }
    __next_loaded_action_key = await crypto.subtle.importKey('raw', stringToUint8Array(atob(rawKey)), 'AES-GCM', true, [
        'encrypt',
        'decrypt'
    ]);
    return __next_loaded_action_key;
}
function mergeClientReferenceManifests(clientReferenceManifestsPerPage) {
    const clientReferenceManifests = Object.values(clientReferenceManifestsPerPage);
    const mergedClientReferenceManifest = {
        clientModules: {},
        edgeRscModuleMapping: {},
        rscModuleMapping: {}
    };
    for (const clientReferenceManifest of clientReferenceManifests){
        mergedClientReferenceManifest.clientModules = {
            ...mergedClientReferenceManifest.clientModules,
            ...clientReferenceManifest.clientModules
        };
        mergedClientReferenceManifest.edgeRscModuleMapping = {
            ...mergedClientReferenceManifest.edgeRscModuleMapping,
            ...clientReferenceManifest.edgeRscModuleMapping
        };
        mergedClientReferenceManifest.rscModuleMapping = {
            ...mergedClientReferenceManifest.rscModuleMapping,
            ...clientReferenceManifest.rscModuleMapping
        };
    }
    return mergedClientReferenceManifest;
} //# sourceMappingURL=encryption-utils.js.map


/***/ }),

/***/ 208706:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* eslint-disable import/no-extraneous-dependencies */ 
Object.defineProperty(exports, "__esModule", ({
    value: true
}));
0 && (0);
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    decryptActionBoundArgs: function() {
        return decryptActionBoundArgs;
    },
    encryptActionBoundArgs: function() {
        return encryptActionBoundArgs;
    }
});
__webpack_require__(47598);
const _serveredge = __webpack_require__(672771);
const _clientedge = __webpack_require__(979625);
const _nodewebstreamshelper = __webpack_require__(886023);
const _encryptionutils = __webpack_require__(438658);
const _workunitasyncstorageexternal = __webpack_require__(663033);
const isEdgeRuntime = "nodejs" === 'edge';
const textEncoder = new TextEncoder();
const textDecoder = new TextDecoder();
async function decodeActionBoundArg(actionId, arg) {
    const key = await (0, _encryptionutils.getActionEncryptionKey)();
    if (typeof key === 'undefined') {
        throw new Error(`Missing encryption key for Server Action. This is a bug in Next.js`);
    }
    // Get the iv (16 bytes) and the payload from the arg.
    const originalPayload = atob(arg);
    const ivValue = originalPayload.slice(0, 16);
    const payload = originalPayload.slice(16);
    const decrypted = textDecoder.decode(await (0, _encryptionutils.decrypt)(key, (0, _encryptionutils.stringToUint8Array)(ivValue), (0, _encryptionutils.stringToUint8Array)(payload)));
    if (!decrypted.startsWith(actionId)) {
        throw new Error('Invalid Server Action payload: failed to decrypt.');
    }
    return decrypted.slice(actionId.length);
}
/**
 * Encrypt the serialized string with the action id as the salt. Add a prefix to
 * later ensure that the payload is correctly decrypted, similar to a checksum.
 */ async function encodeActionBoundArg(actionId, arg) {
    const key = await (0, _encryptionutils.getActionEncryptionKey)();
    if (key === undefined) {
        throw new Error(`Missing encryption key for Server Action. This is a bug in Next.js`);
    }
    // Get 16 random bytes as iv.
    const randomBytes = new Uint8Array(16);
    _workunitasyncstorageexternal.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(randomBytes));
    const ivValue = (0, _encryptionutils.arrayBufferToString)(randomBytes.buffer);
    const encrypted = await (0, _encryptionutils.encrypt)(key, randomBytes, textEncoder.encode(actionId + arg));
    return btoa(ivValue + (0, _encryptionutils.arrayBufferToString)(encrypted));
}
async function encryptActionBoundArgs(actionId, args) {
    const { clientModules } = (0, _encryptionutils.getClientReferenceManifestForRsc)();
    // Create an error before any asynchrounous calls, to capture the original
    // call stack in case we need it when the serialization errors.
    const error = new Error();
    Error.captureStackTrace(error, encryptActionBoundArgs);
    let didCatchError = false;
    // Using Flight to serialize the args into a string.
    const serialized = await (0, _nodewebstreamshelper.streamToString)((0, _serveredge.renderToReadableStream)(args, clientModules, {
        onError (err) {
            // We're only reporting one error at a time, starting with the first.
            if (didCatchError) {
                return;
            }
            didCatchError = true;
            // Use the original error message together with the previously created
            // stack, because err.stack is a useless Flight Server call stack.
            error.message = err instanceof Error ? err.message : String(err);
        }
    }));
    if (didCatchError) {
        if (false) {}
        throw error;
    }
    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();
    if (!workUnitStore) {
        return encodeActionBoundArg(actionId, serialized);
    }
    const prerenderResumeDataCache = (0, _workunitasyncstorageexternal.getPrerenderResumeDataCache)(workUnitStore);
    const renderResumeDataCache = (0, _workunitasyncstorageexternal.getRenderResumeDataCache)(workUnitStore);
    const cacheKey = actionId + serialized;
    const cachedEncrypted = (prerenderResumeDataCache == null ? void 0 : prerenderResumeDataCache.encryptedBoundArgs.get(cacheKey)) ?? (renderResumeDataCache == null ? void 0 : renderResumeDataCache.encryptedBoundArgs.get(cacheKey));
    if (cachedEncrypted) {
        return cachedEncrypted;
    }
    const cacheSignal = workUnitStore.type === 'prerender' ? workUnitStore.cacheSignal : undefined;
    cacheSignal == null ? void 0 : cacheSignal.beginRead();
    const encrypted = await encodeActionBoundArg(actionId, serialized);
    cacheSignal == null ? void 0 : cacheSignal.endRead();
    prerenderResumeDataCache == null ? void 0 : prerenderResumeDataCache.encryptedBoundArgs.set(cacheKey, encrypted);
    return encrypted;
}
async function decryptActionBoundArgs(actionId, encrypted) {
    const { edgeRscModuleMapping, rscModuleMapping } = (0, _encryptionutils.getClientReferenceManifestForRsc)();
    // Decrypt the serialized string with the action id as the salt.
    const decrypted = await decodeActionBoundArg(actionId, await encrypted);
    // Using Flight to deserialize the args from the string.
    const deserialized = await (0, _clientedge.createFromReadableStream)(new ReadableStream({
        start (controller) {
            controller.enqueue(textEncoder.encode(decrypted));
            controller.close();
        }
    }), {
        serverConsumerManifest: {
            // moduleLoading must be null because we don't want to trigger preloads of ClientReferences
            // to be added to the current execution. Instead, we'll wait for any ClientReference
            // to be emitted which themselves will handle the preloading.
            moduleLoading: null,
            moduleMap: isEdgeRuntime ? edgeRscModuleMapping : rscModuleMapping,
            serverModuleMap: (0, _encryptionutils.getServerModuleMap)()
        }
    });
    return deserialized;
}

//# sourceMappingURL=encryption.js.map

/***/ }),

/***/ 895856:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ getMembershipRole),
/* harmony export */   U: () => (/* binding */ getMembershipByUserIdOrganizationIdAction)
/* harmony export */ });
/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(286055);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(770767);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(207798);
/* harmony import */ var _organization_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(167440);
/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(575361);
/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(429931);
/* __next_internal_action_entry_do_not_use__ {"7f7e22b5cdd09e77d8f7cd2b1aa54674e257258f9f":"getMembershipRole","7fb1462c71ceac762f633a204a6fc049ffbeab8261":"getMembershipByUserIdOrganizationIdAction"} */ 





const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getMembershipByUserIdOrganizationIdAction = async (environmentId, userId)=>{
    const organization = await (0,_organization_service__WEBPACK_IMPORTED_MODULE_2__/* .getOrganizationByEnvironmentId */ .TK)(environmentId);
    if (!organization) {
        throw new Error("Organization not found");
    }
    const currentUserMembership = await getMembershipRole(userId, organization.id);
    return currentUserMembership;
};
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getMembershipRole = async (userId, organizationId)=>{
    const membership = await (0,_service__WEBPACK_IMPORTED_MODULE_3__/* .getMembershipByUserIdOrganizationId */ .Y)(userId, organizationId);
    if (!membership) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_4__/* .AuthorizationError */ .yi("Not authorized");
    }
    return membership.role;
};

(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__/* .ensureServerEntryExports */ .D)([
    getMembershipByUserIdOrganizationIdAction,
    getMembershipRole
]);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getMembershipByUserIdOrganizationIdAction, "7fb1462c71ceac762f633a204a6fc049ffbeab8261", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getMembershipRole, "7f7e22b5cdd09e77d8f7cd2b1aa54674e257258f9f", null);


/***/ }),

/***/ 159570:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ getAccessFlags)
/* harmony export */ });
const getAccessFlags = (role)=>{
    const isOwner = role === "owner";
    const isManager = role === "manager";
    const isBilling = role === "billing";
    const isMember = role === "member";
    return {
        isManager,
        isOwner,
        isBilling,
        isMember
    };
};


/***/ }),

/***/ 937440:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ verifyUserRoleAccess),
/* harmony export */   h: () => (/* binding */ canUserAccessOrganization)
/* harmony export */ });
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(733735);
/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(794356);
/* harmony import */ var _membership_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(377968);
/* harmony import */ var _membership_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(159570);
/* harmony import */ var _organization_cache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(530190);
/* harmony import */ var _utils_validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(860988);
/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(353687);








const canUserAccessOrganization = (userId, organizationId)=>(0,_cache__WEBPACK_IMPORTED_MODULE_0__/* .cache */ .P)(async ()=>{
        (0,_utils_validate__WEBPACK_IMPORTED_MODULE_1__/* .validateInputs */ .C)([
            userId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_2__/* .ZId */ .i4
        ], [
            organizationId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_2__/* .ZId */ .i4
        ]);
        try {
            const userOrganizations = await (0,_service__WEBPACK_IMPORTED_MODULE_3__/* .getOrganizationsByUserId */ .s8)(userId);
            const givenOrganizationExists = userOrganizations.filter((organization)=>organization.id = organizationId);
            if (!givenOrganizationExists) {
                return false;
            }
            return true;
        } catch (error) {
            throw error;
        }
    }, [
        `canUserAccessOrganization-${userId}-${organizationId}`
    ], {
        tags: [
            _organization_cache__WEBPACK_IMPORTED_MODULE_4__/* .organizationCache */ .S.tag.byId(organizationId)
        ]
    })();
const verifyUserRoleAccess = async (organizationId, userId)=>{
    const accessObject = {
        hasCreateOrUpdateAccess: true,
        hasDeleteAccess: true,
        hasCreateOrUpdateMembersAccess: true,
        hasDeleteMembersAccess: true,
        hasBillingAccess: true
    };
    const currentUserMembership = await (0,_membership_service__WEBPACK_IMPORTED_MODULE_5__/* .getMembershipByUserIdOrganizationId */ .Y)(userId, organizationId);
    const { isOwner, isManager } = (0,_membership_utils__WEBPACK_IMPORTED_MODULE_6__/* .getAccessFlags */ .c)(currentUserMembership?.role);
    if (!isOwner) {
        accessObject.hasCreateOrUpdateAccess = false;
        accessObject.hasDeleteAccess = false;
        accessObject.hasCreateOrUpdateMembersAccess = false;
        accessObject.hasDeleteMembersAccess = false;
        accessObject.hasBillingAccess = false;
    }
    if (isManager) {
        accessObject.hasCreateOrUpdateMembersAccess = true;
        accessObject.hasDeleteMembersAccess = true;
        accessObject.hasBillingAccess = true;
    }
    return accessObject;
};


/***/ }),

/***/ 117396:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A6: () => (/* binding */ deleteS3FilesByEnvironmentId),
/* harmony export */   UN: () => (/* binding */ putFile),
/* harmony export */   Ww: () => (/* binding */ deleteFile),
/* harmony export */   Z5: () => (/* binding */ deleteLocalFilesByEnvironmentId)
/* harmony export */ });
/* unused harmony exports getS3Client, testS3BucketAccess, getS3File, getLocalFile, getUploadSignedUrl, getS3UploadSignedUrl, putFileToLocalStorage, deleteLocalFile, deleteS3File */
/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(191043);
/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _aws_sdk_s3_presigned_post__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(741000);
/* harmony import */ var _aws_sdk_s3_presigned_post__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_s3_presigned_post__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(531701);
/* harmony import */ var _aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(455511);
/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(79748);
/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var mime_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(564937);
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(333873);
/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(711344);










// S3Client Singleton
let s3ClientInstance = null;
const getS3Client = ()=>{
    if (!s3ClientInstance) {
        const credentials = _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_ACCESS_KEY */ .Ik && _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_SECRET_KEY */ .Wg ? {
            accessKeyId: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_ACCESS_KEY */ .Ik,
            secretAccessKey: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_SECRET_KEY */ .Wg
        } : undefined;
        s3ClientInstance = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.S3Client({
            credentials,
            region: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_REGION */ .Yj,
            ..._constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_ENDPOINT_URL */ .Xc && {
                endpoint: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_ENDPOINT_URL */ .Xc
            },
            forcePathStyle: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_FORCE_PATH_STYLE */ .vh
        });
    }
    return s3ClientInstance;
};
const testS3BucketAccess = async ()=>{
    const s3Client = getS3Client();
    try {
        // Attempt to retrieve metadata about the bucket
        const headBucketCommand = new HeadBucketCommand({
            Bucket: S3_BUCKET_NAME
        });
        await s3Client.send(headBucketCommand);
        return true;
    } catch (error) {
        console.error(`Failed to access S3 bucket: ${error}`);
        throw new Error(`S3 Bucket Access Test Failed: ${error}`);
    }
};
const ensureDirectoryExists = async (dirPath)=>{
    try {
        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_4__.access)(dirPath);
    } catch (error) {
        if (error.code === "ENOENT") {
            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_4__.mkdir)(dirPath, {
                recursive: true
            });
        } else {
            throw error;
        }
    }
};
const getS3SignedUrl = async (fileKey)=>{
    const [_, accessType] = fileKey.split("/");
    const expiresIn = accessType === "public" ? 60 * 60 : 10 * 60;
    const getObjectCommand = new GetObjectCommand({
        Bucket: S3_BUCKET_NAME,
        Key: fileKey
    });
    try {
        const s3Client = getS3Client();
        return await getSignedUrl(s3Client, getObjectCommand, {
            expiresIn
        });
    } catch (err) {
        throw err;
    }
};
const getS3File = async (fileKey)=>{
    const signedUrl = await getS3SignedUrl(fileKey);
    return signedUrl;
};
const getLocalFile = async (filePath)=>{
    try {
        const safeFilePath = path.resolve(process.cwd(), filePath);
        const file = await readFile(safeFilePath);
        let contentType = "";
        try {
            contentType = lookup(filePath) || "";
        } catch (err) {
            throw err;
        }
        return {
            fileBuffer: file,
            metaData: {
                contentType: contentType ?? ""
            }
        };
    } catch (err) {
        throw err;
    }
};
// a single service for generating a signed url based on user's environment variables
const getUploadSignedUrl = async (fileName, environmentId, fileType, accessType, isBiggerFileUploadAllowed = false)=>{
    // add a unique id to the file name
    const fileExtension = fileName.split(".").pop();
    const fileNameWithoutExtension = fileName.split(".").slice(0, -1).join(".");
    if (!fileExtension) {
        throw new Error("File extension not found");
    }
    const updatedFileName = `${fileNameWithoutExtension}--fid--${randomUUID()}.${fileExtension}`;
    // handle the local storage case first
    if (!isS3Configured()) {
        try {
            const { signature, timestamp, uuid } = generateLocalSignedUrl(updatedFileName, environmentId, fileType);
            return {
                signedUrl: accessType === "private" ? new URL(`${WEBAPP_URL}/api/v1/client/${environmentId}/storage/local`).href : new URL(`${WEBAPP_URL}/api/v1/management/storage/local`).href,
                signingData: {
                    signature,
                    timestamp,
                    uuid
                },
                updatedFileName,
                fileUrl: new URL(`${WEBAPP_URL}/storage/${environmentId}/${accessType}/${updatedFileName}`).href
            };
        } catch (err) {
            throw err;
        }
    }
    try {
        const { presignedFields, signedUrl } = await getS3UploadSignedUrl(updatedFileName, fileType, accessType, environmentId, isBiggerFileUploadAllowed);
        return {
            signedUrl,
            presignedFields,
            fileUrl: new URL(`${WEBAPP_URL}/storage/${environmentId}/${accessType}/${updatedFileName}`).href
        };
    } catch (err) {
        throw err;
    }
};
const getS3UploadSignedUrl = async (fileName, contentType, accessType, environmentId, isBiggerFileUploadAllowed = false)=>{
    const maxSize = IS_FORMBRICKS_CLOUD ? isBiggerFileUploadAllowed ? MAX_SIZES.big : MAX_SIZES.standard : Infinity;
    const postConditions = IS_FORMBRICKS_CLOUD ? [
        [
            "content-length-range",
            0,
            maxSize
        ]
    ] : undefined;
    try {
        const s3Client = getS3Client();
        const { fields, url } = await createPresignedPost(s3Client, {
            Expires: 10 * 60,
            Bucket: env.S3_BUCKET_NAME,
            Key: `${environmentId}/${accessType}/${fileName}`,
            Fields: {
                "Content-Type": contentType,
                "Content-Encoding": "base64"
            },
            Conditions: postConditions
        });
        return {
            signedUrl: url,
            presignedFields: fields
        };
    } catch (err) {
        throw err;
    }
};
const putFileToLocalStorage = async (fileName, fileBuffer, accessType, environmentId, rootDir, isBiggerFileUploadAllowed = false)=>{
    try {
        await ensureDirectoryExists(`${rootDir}/${environmentId}/${accessType}`);
        const uploadPath = `${rootDir}/${environmentId}/${accessType}/${fileName}`;
        const buffer = Buffer.from(fileBuffer);
        const bufferBytes = buffer.byteLength;
        const maxSize = _constants__WEBPACK_IMPORTED_MODULE_7__/* .IS_FORMBRICKS_CLOUD */ .Si ? isBiggerFileUploadAllowed ? _constants__WEBPACK_IMPORTED_MODULE_7__/* .MAX_SIZES */ .gB.big : _constants__WEBPACK_IMPORTED_MODULE_7__/* .MAX_SIZES */ .gB.standard : Infinity;
        if (bufferBytes > maxSize) {
            const err = new Error(`File size exceeds the ${maxSize / (1024 * 1024)} MB limit`);
            err.name = "FileTooLargeError";
            throw err;
        }
        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_4__.writeFile)(uploadPath, buffer);
    } catch (err) {
        throw err;
    }
};
// a single service to put file in the storage(local or S3), based on the S3 configuration
const putFile = async (fileName, fileBuffer, accessType, environmentId)=>{
    try {
        if (!(0,_constants__WEBPACK_IMPORTED_MODULE_7__/* .isS3Configured */ .$Y)()) {
            await putFileToLocalStorage(fileName, fileBuffer, accessType, environmentId, _constants__WEBPACK_IMPORTED_MODULE_7__/* .UPLOADS_DIR */ .xG);
            return {
                success: true,
                message: "File uploaded"
            };
        } else {
            const input = {
                Body: fileBuffer,
                Bucket: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_BUCKET_NAME */ .MT,
                Key: `${environmentId}/${accessType}/${fileName}`
            };
            const command = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.PutObjectCommand(input);
            const s3Client = getS3Client();
            await s3Client.send(command);
            return {
                success: true,
                message: "File uploaded"
            };
        }
    } catch (err) {
        throw err;
    }
};
const deleteFile = async (environmentId, accessType, fileName)=>{
    if (!(0,_constants__WEBPACK_IMPORTED_MODULE_7__/* .isS3Configured */ .$Y)()) {
        try {
            await deleteLocalFile(path__WEBPACK_IMPORTED_MODULE_6___default().join(_constants__WEBPACK_IMPORTED_MODULE_7__/* .UPLOADS_DIR */ .xG, environmentId, accessType, fileName));
            return {
                success: true,
                message: "File deleted"
            };
        } catch (err) {
            if (err.code !== "ENOENT") {
                return {
                    success: false,
                    message: err.message ?? "Something went wrong"
                };
            }
            return {
                success: false,
                message: "File not found",
                code: 404
            };
        }
    }
    try {
        await deleteS3File(`${environmentId}/${accessType}/${fileName}`);
        return {
            success: true,
            message: "File deleted"
        };
    } catch (err) {
        if (err.name === "NoSuchKey") {
            return {
                success: false,
                message: "File not found",
                code: 404
            };
        } else {
            return {
                success: false,
                message: err.message ?? "Something went wrong"
            };
        }
    }
};
const deleteLocalFile = async (filePath)=>{
    try {
        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_4__.unlink)(filePath);
    } catch (err) {
        throw err;
    }
};
const deleteS3File = async (fileKey)=>{
    const deleteObjectCommand = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.DeleteObjectCommand({
        Bucket: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_BUCKET_NAME */ .MT,
        Key: fileKey
    });
    try {
        const s3Client = getS3Client();
        await s3Client.send(deleteObjectCommand);
    } catch (err) {
        throw err;
    }
};
const deleteS3FilesByEnvironmentId = async (environmentId)=>{
    try {
        // List all objects in the bucket with the prefix of environmentId
        const s3Client = getS3Client();
        const listObjectsOutput = await s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.ListObjectsCommand({
            Bucket: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_BUCKET_NAME */ .MT,
            Prefix: environmentId
        }));
        if (listObjectsOutput.Contents) {
            const objectsToDelete = listObjectsOutput.Contents.map((obj)=>{
                return {
                    Key: obj.Key
                };
            });
            if (!objectsToDelete.length) {
                // no objects to delete
                return null;
            }
            // Delete the objects
            await s3Client.send(new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_0__.DeleteObjectsCommand({
                Bucket: _constants__WEBPACK_IMPORTED_MODULE_7__/* .S3_BUCKET_NAME */ .MT,
                Delete: {
                    Objects: objectsToDelete
                }
            }));
        } else {
            // no objects to delete
            return null;
        }
    } catch (err) {
        throw err;
    }
};
const deleteLocalFilesByEnvironmentId = async (environmentId)=>{
    const dirPath = (0,path__WEBPACK_IMPORTED_MODULE_6__.join)(_constants__WEBPACK_IMPORTED_MODULE_7__/* .UPLOADS_DIR */ .xG, environmentId);
    try {
        await ensureDirectoryExists(dirPath);
        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_4__.rmdir)(dirPath, {
            recursive: true
        });
    } catch (err) {
        throw err;
    }
};


/***/ }),

/***/ 879977:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Ay: () => (/* binding */ esm)
});

// UNUSED EXPORTS: deserialize, serialize

;// ../../node_modules/@ungap/structured-clone/esm/types.js
const VOID       = -1;
const PRIMITIVE  = 0;
const ARRAY      = 1;
const OBJECT     = 2;
const DATE       = 3;
const REGEXP     = 4;
const MAP        = 5;
const SET        = 6;
const ERROR      = 7;
const BIGINT     = 8;
// export const SYMBOL = 9;

;// ../../node_modules/@ungap/structured-clone/esm/deserialize.js


const env = typeof self === 'object' ? self : globalThis;

const deserializer = ($, _) => {
  const as = (out, index) => {
    $.set(index, out);
    return out;
  };

  const unpair = index => {
    if ($.has(index))
      return $.get(index);

    const [type, value] = _[index];
    switch (type) {
      case PRIMITIVE:
      case VOID:
        return as(value, index);
      case ARRAY: {
        const arr = as([], index);
        for (const index of value)
          arr.push(unpair(index));
        return arr;
      }
      case OBJECT: {
        const object = as({}, index);
        for (const [key, index] of value)
          object[unpair(key)] = unpair(index);
        return object;
      }
      case DATE:
        return as(new Date(value), index);
      case REGEXP: {
        const {source, flags} = value;
        return as(new RegExp(source, flags), index);
      }
      case MAP: {
        const map = as(new Map, index);
        for (const [key, index] of value)
          map.set(unpair(key), unpair(index));
        return map;
      }
      case SET: {
        const set = as(new Set, index);
        for (const index of value)
          set.add(unpair(index));
        return set;
      }
      case ERROR: {
        const {name, message} = value;
        return as(new env[name](message), index);
      }
      case BIGINT:
        return as(BigInt(value), index);
      case 'BigInt':
        return as(Object(BigInt(value)), index);
      case 'ArrayBuffer':
        return as(new Uint8Array(value).buffer, value);
      case 'DataView': {
        const { buffer } = new Uint8Array(value);
        return as(new DataView(buffer), value);
      }
    }
    return as(new env[type](value), index);
  };

  return unpair;
};

/**
 * @typedef {Array<string,any>} Record a type representation
 */

/**
 * Returns a deserialized value from a serialized array of Records.
 * @param {Record[]} serialized a previously serialized value.
 * @returns {any}
 */
const deserialize = serialized => deserializer(new Map, serialized)(0);

;// ../../node_modules/@ungap/structured-clone/esm/serialize.js


const EMPTY = '';

const {toString: serialize_toString} = {};
const {keys} = Object;

const typeOf = value => {
  const type = typeof value;
  if (type !== 'object' || !value)
    return [PRIMITIVE, type];

  const asString = serialize_toString.call(value).slice(8, -1);
  switch (asString) {
    case 'Array':
      return [ARRAY, EMPTY];
    case 'Object':
      return [OBJECT, EMPTY];
    case 'Date':
      return [DATE, EMPTY];
    case 'RegExp':
      return [REGEXP, EMPTY];
    case 'Map':
      return [MAP, EMPTY];
    case 'Set':
      return [SET, EMPTY];
    case 'DataView':
      return [ARRAY, asString];
  }

  if (asString.includes('Array'))
    return [ARRAY, asString];

  if (asString.includes('Error'))
    return [ERROR, asString];

  return [OBJECT, asString];
};

const shouldSkip = ([TYPE, type]) => (
  TYPE === PRIMITIVE &&
  (type === 'function' || type === 'symbol')
);

const serializer = (strict, json, $, _) => {

  const as = (out, value) => {
    const index = _.push(out) - 1;
    $.set(value, index);
    return index;
  };

  const pair = value => {
    if ($.has(value))
      return $.get(value);

    let [TYPE, type] = typeOf(value);
    switch (TYPE) {
      case PRIMITIVE: {
        let entry = value;
        switch (type) {
          case 'bigint':
            TYPE = BIGINT;
            entry = value.toString();
            break;
          case 'function':
          case 'symbol':
            if (strict)
              throw new TypeError('unable to serialize ' + type);
            entry = null;
            break;
          case 'undefined':
            return as([VOID], value);
        }
        return as([TYPE, entry], value);
      }
      case ARRAY: {
        if (type) {
          let spread = value;
          if (type === 'DataView') {
            spread = new Uint8Array(value.buffer);
          }
          else if (type === 'ArrayBuffer') {
            spread = new Uint8Array(value);
          }
          return as([type, [...spread]], value);
        }

        const arr = [];
        const index = as([TYPE, arr], value);
        for (const entry of value)
          arr.push(pair(entry));
        return index;
      }
      case OBJECT: {
        if (type) {
          switch (type) {
            case 'BigInt':
              return as([type, value.toString()], value);
            case 'Boolean':
            case 'Number':
            case 'String':
              return as([type, value.valueOf()], value);
          }
        }

        if (json && ('toJSON' in value))
          return pair(value.toJSON());

        const entries = [];
        const index = as([TYPE, entries], value);
        for (const key of keys(value)) {
          if (strict || !shouldSkip(typeOf(value[key])))
            entries.push([pair(key), pair(value[key])]);
        }
        return index;
      }
      case DATE:
        return as([TYPE, value.toISOString()], value);
      case REGEXP: {
        const {source, flags} = value;
        return as([TYPE, {source, flags}], value);
      }
      case MAP: {
        const entries = [];
        const index = as([TYPE, entries], value);
        for (const [key, entry] of value) {
          if (strict || !(shouldSkip(typeOf(key)) || shouldSkip(typeOf(entry))))
            entries.push([pair(key), pair(entry)]);
        }
        return index;
      }
      case SET: {
        const entries = [];
        const index = as([TYPE, entries], value);
        for (const entry of value) {
          if (strict || !shouldSkip(typeOf(entry)))
            entries.push(pair(entry));
        }
        return index;
      }
    }

    const {message} = value;
    return as([TYPE, {name: type, message}], value);
  };

  return pair;
};

/**
 * @typedef {Array<string,any>} Record a type representation
 */

/**
 * Returns an array of serialized Records.
 * @param {any} value a serializable value.
 * @param {{json?: boolean, lossy?: boolean}?} options an object with a `lossy` or `json` property that,
 *  if `true`, will not throw errors on incompatible types, and behave more
 *  like JSON stringify would behave. Symbol and Function will be discarded.
 * @returns {Record[]}
 */
 const serialize = (value, {json, lossy} = {}) => {
  const _ = [];
  return serializer(!(json || lossy), !!json, new Map, _)(value), _;
};

;// ../../node_modules/@ungap/structured-clone/esm/index.js



/**
 * @typedef {Array<string,any>} Record a type representation
 */

/**
 * Returns an array of serialized Records.
 * @param {any} any a serializable value.
 * @param {{transfer?: any[], json?: boolean, lossy?: boolean}?} options an object with
 * a transfer option (ignored when polyfilled) and/or non standard fields that
 * fallback to the polyfill if present.
 * @returns {Record[]}
 */
/* harmony default export */ const esm = (typeof structuredClone === "function" ?
  /* c8 ignore start */
  (any, options) => (
    options && ('json' in options || 'lossy' in options) ?
      deserialize(serialize(any, options)) : structuredClone(any)
  ) :
  (any, options) => deserialize(serialize(any, options)));
  /* c8 ignore stop */




/***/ }),

/***/ 516846:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HC: () => (/* binding */ Oe),
/* harmony export */   jI: () => (/* binding */ Z)
/* harmony export */ });
/* unused harmony exports HexAlphaColorPicker, HslColorPicker, HslStringColorPicker, HslaColorPicker, HslaStringColorPicker, HsvColorPicker, HsvStringColorPicker, HsvaColorPicker, HsvaStringColorPicker, RgbColorPicker, RgbStringColorPicker, RgbaColorPicker, RgbaStringColorPicker, setNonce */
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891616);
function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function c(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(o[t]=e[t]);return o}function i(e){var t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(e),n=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(function(e){t.current&&t.current(e)});return t.current=e,n.current}var s=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=1),e>t?t:e<r?r:e},f=function(e){return"touches"in e},v=function(e){return e&&e.ownerDocument.defaultView||self},d=function(e,r,t){var n=e.getBoundingClientRect(),o=f(r)?function(e,r){for(var t=0;t<e.length;t++)if(e[t].identifier===r)return e[t];return e[0]}(r.touches,t):r;return{left:s((o.pageX-(n.left+v(e).pageXOffset))/n.width),top:s((o.pageY-(n.top+v(e).pageYOffset))/n.height)}},h=function(e){!f(e)&&e.preventDefault()},m=react__WEBPACK_IMPORTED_MODULE_0__.memo(function(o){var a=o.onMove,l=o.onKey,s=c(o,["onMove","onKey"]),m=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),g=i(a),p=i(l),b=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),_=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),x=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function(){var e=function(e){h(e),(f(e)?e.touches.length>0:e.buttons>0)&&m.current?g(d(m.current,e,b.current)):t(!1)},r=function(){return t(!1)};function t(t){var n=_.current,o=v(m.current),a=t?o.addEventListener:o.removeEventListener;a(n?"touchmove":"mousemove",e),a(n?"touchend":"mouseup",r)}return[function(e){var r=e.nativeEvent,n=m.current;if(n&&(h(r),!function(e,r){return r&&!f(e)}(r,_.current)&&n)){if(f(r)){_.current=!0;var o=r.changedTouches||[];o.length&&(b.current=o[0].identifier)}n.focus(),g(d(n,r,b.current)),t(!0)}},function(e){var r=e.which||e.keyCode;r<37||r>40||(e.preventDefault(),p({left:39===r?.05:37===r?-.05:0,top:40===r?.05:38===r?-.05:0}))},t]},[p,g]),C=x[0],E=x[1],H=x[2];return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){return H},[H]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",u({},s,{onTouchStart:C,onMouseDown:C,className:"react-colorful__interactive",ref:m,onKeyDown:E,tabIndex:0,role:"slider"}))}),g=function(e){return e.filter(Boolean).join(" ")},p=function(r){var t=r.color,n=r.left,o=r.top,a=void 0===o?.5:o,l=g(["react-colorful__pointer",r.className]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:l,style:{top:100*a+"%",left:100*n+"%"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},b=function(e,r,t){return void 0===r&&(r=0),void 0===t&&(t=Math.pow(10,r)),Math.round(t*e)/t},_={grad:.9,turn:360,rad:360/(2*Math.PI)},x=function(e){return L(C(e))},C=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?b(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?b(parseInt(e.substring(6,8),16)/255,2):1}},E=function(e,r){return void 0===r&&(r="deg"),Number(e)*(_[r]||1)},H=function(e){var r=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return r?N({h:E(r[1],r[2]),s:Number(r[3]),l:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},M=H,N=function(e){var r=e.s,t=e.l;return{h:e.h,s:(r*=(t<50?t:100-t)/100)>0?2*r/(t+r)*100:0,v:t+r,a:e.a}},w=function(e){return K(I(e))},y=function(e){var r=e.s,t=e.v,n=e.a,o=(200-r)*t/100;return{h:b(e.h),s:b(o>0&&o<200?r*t/100/(o<=100?o:200-o)*100:0),l:b(o/2),a:b(n,2)}},q=function(e){var r=y(e);return"hsl("+r.h+", "+r.s+"%, "+r.l+"%)"},k=function(e){var r=y(e);return"hsla("+r.h+", "+r.s+"%, "+r.l+"%, "+r.a+")"},I=function(e){var r=e.h,t=e.s,n=e.v,o=e.a;r=r/360*6,t/=100,n/=100;var a=Math.floor(r),l=n*(1-t),u=n*(1-(r-a)*t),c=n*(1-(1-r+a)*t),i=a%6;return{r:b(255*[n,u,l,l,c,n][i]),g:b(255*[c,n,n,u,l,l][i]),b:b(255*[l,l,c,n,n,u][i]),a:b(o,2)}},O=function(e){var r=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return r?A({h:E(r[1],r[2]),s:Number(r[3]),v:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)}):{h:0,s:0,v:0,a:1}},j=O,z=function(e){var r=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return r?L({r:Number(r[1])/(r[2]?100/255:1),g:Number(r[3])/(r[4]?100/255:1),b:Number(r[5])/(r[6]?100/255:1),a:void 0===r[7]?1:Number(r[7])/(r[8]?100:1)}):{h:0,s:0,v:0,a:1}},B=z,D=function(e){var r=e.toString(16);return r.length<2?"0"+r:r},K=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=o<1?D(b(255*o)):"";return"#"+D(r)+D(t)+D(n)+a},L=function(e){var r=e.r,t=e.g,n=e.b,o=e.a,a=Math.max(r,t,n),l=a-Math.min(r,t,n),u=l?a===r?(t-n)/l:a===t?2+(n-r)/l:4+(r-t)/l:0;return{h:b(60*(u<0?u+6:u)),s:b(a?l/a*100:0),v:b(a/255*100),a:o}},A=function(e){return{h:b(e.h),s:b(e.s),v:b(e.v),a:b(e.a,2)}},S=react__WEBPACK_IMPORTED_MODULE_0__.memo(function(r){var t=r.hue,n=r.onChange,o=g(["react-colorful__hue",r.className]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:o},react__WEBPACK_IMPORTED_MODULE_0__.createElement(m,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:s(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(t),"aria-valuemax":"360","aria-valuemin":"0"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(p,{className:"react-colorful__hue-pointer",left:t/360,color:q({h:t,s:100,v:100,a:1})})))}),T=react__WEBPACK_IMPORTED_MODULE_0__.memo(function(r){var t=r.hsva,n=r.onChange,o={backgroundColor:q({h:t.h,s:100,v:100,a:1})};return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"react-colorful__saturation",style:o},react__WEBPACK_IMPORTED_MODULE_0__.createElement(m,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:s(t.s+100*e.left,0,100),v:s(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(t.s)+"%, Brightness "+b(t.v)+"%"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(p,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:q(t)})))}),F=function(e,r){if(e===r)return!0;for(var t in e)if(e[t]!==r[t])return!1;return!0},P=function(e,r){return e.replace(/\s/g,"")===r.replace(/\s/g,"")},X=function(e,r){return e.toLowerCase()===r.toLowerCase()||F(C(e),C(r))};function Y(e,t,l){var u=i(l),c=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(function(){return e.toHsva(t)}),s=c[0],f=c[1],v=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({color:t,hsva:s});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){if(!e.equal(t,v.current.color)){var r=e.toHsva(t);v.current={hsva:r,color:t},f(r)}},[t,e]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){var r;F(s,v.current.hsva)||e.equal(r=e.fromHsva(s),v.current.color)||(v.current={hsva:s,color:r},u(r))},[s,e,u]);var d=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(e){f(function(r){return Object.assign({},r,e)})},[]);return[s,d]}var R,V="undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect,$=function(){return R||( true?__webpack_require__.nc:0)},G=function(e){R=e},J=new Map,Q=function(e){V(function(){var r=e.current?e.current.ownerDocument:document;if(void 0!==r&&!J.has(r)){var t=r.createElement("style");t.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',J.set(r,t);var n=$();n&&t.setAttribute("nonce",n),r.head.appendChild(t)}},[])},U=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,["className","colorModel","color","onChange"]),f=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g(["react-colorful",n]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",u({},s,{ref:f,className:m}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(T,{hsva:d,onChange:h}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(S,{hue:d.h,onChange:h,className:"react-colorful__last-control"}))},W={defaultColor:"000",toHsva:x,fromHsva:function(e){return w({h:e.h,s:e.s,v:e.v,a:1})},equal:X},Z=function(r){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(U,u({},r,{colorModel:W}))},ee=function(r){var t=r.className,n=r.hsva,o=r.onChange,a={backgroundImage:"linear-gradient(90deg, "+k(Object.assign({},n,{a:0}))+", "+k(Object.assign({},n,{a:1}))+")"},l=g(["react-colorful__alpha",t]),u=b(100*n.a);return e.createElement("div",{className:l},e.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),e.createElement(m,{onMove:function(e){o({a:e.left})},onKey:function(e){o({a:s(n.a+e.left)})},"aria-label":"Alpha","aria-valuetext":u+"%","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100"},e.createElement(p,{className:"react-colorful__alpha-pointer",left:n.a,color:k(n)})))},re=function(t){var n=t.className,o=t.colorModel,a=t.color,l=void 0===a?o.defaultColor:a,i=t.onChange,s=c(t,["className","colorModel","color","onChange"]),f=r(null);Q(f);var v=Y(o,l,i),d=v[0],h=v[1],m=g(["react-colorful",n]);return e.createElement("div",u({},s,{ref:f,className:m}),e.createElement(T,{hsva:d,onChange:h}),e.createElement(S,{hue:d.h,onChange:h}),e.createElement(ee,{hsva:d,onChange:h,className:"react-colorful__last-control"}))},te={defaultColor:"0001",toHsva:x,fromHsva:w,equal:X},ne=function(r){return e.createElement(re,u({},r,{colorModel:te}))},oe={defaultColor:{h:0,s:0,l:0,a:1},toHsva:N,fromHsva:y,equal:F},ae=function(r){return e.createElement(re,u({},r,{colorModel:oe}))},le={defaultColor:"hsla(0, 0%, 0%, 1)",toHsva:H,fromHsva:k,equal:P},ue=function(r){return e.createElement(re,u({},r,{colorModel:le}))},ce={defaultColor:{h:0,s:0,l:0},toHsva:function(e){return N({h:e.h,s:e.s,l:e.l,a:1})},fromHsva:function(e){return{h:(r=y(e)).h,s:r.s,l:r.l};var r},equal:F},ie=function(r){return e.createElement(U,u({},r,{colorModel:ce}))},se={defaultColor:"hsl(0, 0%, 0%)",toHsva:M,fromHsva:q,equal:P},fe=function(r){return e.createElement(U,u({},r,{colorModel:se}))},ve={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(e){return e},fromHsva:A,equal:F},de=function(r){return e.createElement(re,u({},r,{colorModel:ve}))},he={defaultColor:"hsva(0, 0%, 0%, 1)",toHsva:O,fromHsva:function(e){var r=A(e);return"hsva("+r.h+", "+r.s+"%, "+r.v+"%, "+r.a+")"},equal:P},me=function(r){return e.createElement(re,u({},r,{colorModel:he}))},ge={defaultColor:{h:0,s:0,v:0},toHsva:function(e){return{h:e.h,s:e.s,v:e.v,a:1}},fromHsva:function(e){var r=A(e);return{h:r.h,s:r.s,v:r.v}},equal:F},pe=function(r){return e.createElement(U,u({},r,{colorModel:ge}))},be={defaultColor:"hsv(0, 0%, 0%)",toHsva:j,fromHsva:function(e){var r=A(e);return"hsv("+r.h+", "+r.s+"%, "+r.v+"%)"},equal:P},_e=function(r){return e.createElement(U,u({},r,{colorModel:be}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(r){return e.createElement(re,u({},r,{colorModel:xe}))},Ee={defaultColor:"rgba(0, 0, 0, 1)",toHsva:z,fromHsva:function(e){var r=I(e);return"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")"},equal:P},He=function(r){return e.createElement(re,u({},r,{colorModel:Ee}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return L({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(r=I(e)).r,g:r.g,b:r.b};var r},equal:F},Ne=function(r){return e.createElement(U,u({},r,{colorModel:Me}))},we={defaultColor:"rgb(0, 0, 0)",toHsva:B,fromHsva:function(e){var r=I(e);return"rgb("+r.r+", "+r.g+", "+r.b+")"},equal:P},ye=function(r){return e.createElement(U,u({},r,{colorModel:we}))},qe=/^#?([0-9A-F]{3,8})$/i,ke=function(r){var t=r.color,l=void 0===t?"":t,s=r.onChange,f=r.onBlur,v=r.escape,d=r.validate,h=r.format,m=r.process,g=c(r,["color","onChange","onBlur","escape","validate","format","process"]),p=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(function(){return v(l)}),b=p[0],_=p[1],x=i(s),C=i(f),E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(e){var r=v(e.target.value);_(r),d(r)&&x(m?m(r):r)},[v,m,d,x]),H=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(e){d(e.target.value)||_(v(l)),C(e)},[l,v,d,C]);return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){_(v(l))},[l,v]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",u({},g,{value:h?h(b):b,spellCheck:"false",onChange:E,onBlur:H}))},Ie=function(e){return"#"+e},Oe=function(r){var t=r.prefixed,n=r.alpha,o=c(r,["prefixed","alpha"]),l=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(e){return e.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)},[n]),i=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(e){return function(e,r){var t=qe.exec(e),n=t?t[1].length:0;return 3===n||6===n||!!r&&4===n||!!r&&8===n}(e,n)},[n]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ke,u({},o,{escape:l,format:t?Ie:void 0,process:Ie,validate:i}))};
//# sourceMappingURL=index.module.js.map


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8079,3073,7863,5069,255,9759,6626,5570,1238,2021,9069,2195,7762,1469,5294,4900,6911,2075,1659,5667,6689,497,9415,3687,7864,8046,5752,3840,3902,2171], () => (__webpack_exec__(705325)));
module.exports = __webpack_exports__;

})();
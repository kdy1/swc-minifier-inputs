(() => {
var exports = {};
exports.id = 5386;
exports.ids = [5386];
exports.modules = {

/***/ 896330:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ 560483:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client/scripts/default-index.js");

/***/ }),

/***/ 710846:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.prod.js");

/***/ }),

/***/ 419121:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ 903295:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ 529294:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ 663033:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ 912412:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 979428:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 455511:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 594735:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 629021:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 781630:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 55591:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 491645:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 321820:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 333873:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 111723:
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ 927910:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 134631:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 583997:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 379551:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 328354:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 173566:
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ 74075:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 504573:
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ 977598:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 973024:
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ 937067:
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ 344708:
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ 777030:
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ 176760:
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ 1708:
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ 157075:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ 337830:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ 173136:
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ 257975:
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ 638522:
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ 509781:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(290735);
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(291232);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(272914);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(240085);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
const module0 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 86397));
const module1 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 836653));
const module2 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 956791));
const module3 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module4 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module5 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 524160));
const module6 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module7 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module8 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 980737));
const page9 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 524404));


// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        '(app)',
        {
        children: [
        '(onboarding)',
        {
        children: [
        'environments',
        {
        children: [
        '[environmentId]',
        {
        children: [
        'xm-templates',
        {
        children: ['__PAGE__', {}, {
          page: [page9, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/environments/[environmentId]/xm-templates/page.tsx"],
          
        }]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module8, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/environments/[environmentId]/layout.tsx"],
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module5, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/layout.tsx"],
'forbidden': [module6, "next/dist/client/components/forbidden-error"],
'unauthorized': [module7, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      },
        {
        'layout': [module0, "/Users/kdy1/projects/formbricks/apps/web/app/layout.tsx"],
'error': [module1, "/Users/kdy1/projects/formbricks/apps/web/app/error.tsx"],
'not-found': [module2, "/Users/kdy1/projects/formbricks/apps/web/app/not-found.tsx"],
'forbidden': [module3, "next/dist/client/components/forbidden-error"],
'unauthorized': [module4, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      }.children;
const pages = ["/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/environments/[environmentId]/xm-templates/page.tsx"];


const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({
    definition: {
        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/(app)/(onboarding)/environments/[environmentId]/xm-templates/page",
        pathname: "/environments/[environmentId]/xm-templates",
        // The following aren't used in production.
        bundlePath: '',
        filename: '',
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 580364:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "7f11f2efac37ac84796e6cb223722dbe2e808e177f": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.mi),
/* harmony export */   "7f12957c3365cc2950bdc48f0118f82439eb6c23ec": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Dp),
/* harmony export */   "7f20db167926d501ff62b9525526548773c8a436d4": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.l5),
/* harmony export */   "7f36cf02b548a01d85112f587591e8c1e8390fa538": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Xj),
/* harmony export */   "7f4f2c9c8b657cf906e9a25e65dafac6ec65967916": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.O0),
/* harmony export */   "7f540889be00b7aa8c6ff1edc5cd79ece876954fd3": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.I_),
/* harmony export */   "7f60061b4b6be335eaa2facd1c5d8129b87f6923f4": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Bx),
/* harmony export */   "7f670a0537f96de8b5156e1b206124b2a990484370": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.CG),
/* harmony export */   "7f74bd40a1f82de833915085152910f3ebd525b356": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Uo),
/* harmony export */   "7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Wy),
/* harmony export */   "7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.bH),
/* harmony export */   "7fc6abb0838b6422ef7e81141fd6603883cd1990cf": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.YE),
/* harmony export */   "7fc856fe5dd5f698d2f54dacf4280d447336780427": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.Z0),
/* harmony export */   "7fcda0e6bf50febdf861015e25ebdf74068a488dde": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.bl),
/* harmony export */   "7fcfea9518c327899180b23cb3055005ba65cdef33": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.rg),
/* harmony export */   "7fdb06c584a2145e0f48be9ead409fc7f774731fde": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.uc),
/* harmony export */   "7fdcbaf3445e783557d350b55d91be1398fafca7d3": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.zv),
/* harmony export */   "7fe763f2c0d5f307cc75c26f23c693a54ac24a3112": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.U1),
/* harmony export */   "7ffb22c619704253744e9b5fea4eccca8b0808fb64": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__.kn)
/* harmony export */ });
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(266115);






















/***/ }),

/***/ 577730:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "7ff20090763891981ab1625ad83b771c8ef93748aa": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_modules_surveys_components_TemplateList_actions_ts__WEBPACK_IMPORTED_MODULE_0__.H)
/* harmony export */ });
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_modules_surveys_components_TemplateList_actions_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(590997);




/***/ }),

/***/ 614482:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 331189));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 853648, 23));


/***/ }),

/***/ 238042:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 944877));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 36888, 23));


/***/ }),

/***/ 944877:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  XMTemplateList: () => (/* binding */ XMTemplateList)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(642725);
// EXTERNAL MODULE: ../../packages/lib/utils/templates.ts
var templates = __webpack_require__(93139);
;// ./app/(app)/(onboarding)/environments/[environmentId]/xm-templates/lib/utils.ts

// replace all occurences of projectName with the actual project name in the current template
const replacePresetPlaceholders = (template, project)=>{
    const survey = structuredClone(template);
    survey.name = survey.name.replace("$[projectName]", project.name);
    survey.questions = survey.questions.map((question)=>{
        return (0,templates/* replaceQuestionPresetPlaceholders */.G)(question, project);
    });
    return {
        ...template,
        ...survey
    };
};

// EXTERNAL MODULE: ./app/lib/templates.ts
var lib_templates = __webpack_require__(893902);
// EXTERNAL MODULE: ../../node_modules/@paralleldrive/cuid2/index.js
var cuid2 = __webpack_require__(489415);
// EXTERNAL MODULE: ../../packages/types/surveys/types.ts + 3 modules
var types = __webpack_require__(102379);
;// ./app/(app)/(onboarding)/environments/[environmentId]/xm-templates/lib/xm-templates.ts



function logError(error, context) {
    console.error(`Error in ${context}:`, error);
}
const getXMSurveyDefault = (t)=>{
    try {
        return {
            name: "",
            endings: [
                (0,lib_templates/* getDefaultEndingCard */.V0)([], t)
            ],
            questions: [],
            styling: {
                overwriteThemeStyling: true
            }
        };
    } catch (error) {
        logError(error, "getXMSurveyDefault");
        throw error; // Re-throw after logging
    }
};
const npsSurvey = (t)=>{
    return {
        ...getXMSurveyDefault(t),
        name: t("templates.nps_survey_name"),
        questions: [
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.NPS,
                headline: {
                    default: t("templates.nps_survey_question_1_headline")
                },
                required: true,
                lowerLabel: {
                    default: t("templates.nps_survey_question_1_lower_label")
                },
                upperLabel: {
                    default: t("templates.nps_survey_question_1_upper_label")
                },
                isColorCodingEnabled: true
            },
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.nps_survey_question_2_headline")
                },
                required: false,
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            },
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.nps_survey_question_3_headline")
                },
                required: false,
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            }
        ]
    };
};
const starRatingSurvey = (t)=>{
    const reusableQuestionIds = [
        (0,cuid2/* createId */.sX)(),
        (0,cuid2/* createId */.sX)(),
        (0,cuid2/* createId */.sX)()
    ];
    const defaultSurvey = getXMSurveyDefault(t);
    return {
        ...defaultSurvey,
        name: t("templates.star_rating_survey_name"),
        questions: [
            {
                id: reusableQuestionIds[0],
                type: types/* TSurveyQuestionTypeEnum */.wn.Rating,
                logic: [
                    {
                        id: (0,cuid2/* createId */.sX)(),
                        conditions: {
                            id: (0,cuid2/* createId */.sX)(),
                            connector: "and",
                            conditions: [
                                {
                                    id: (0,cuid2/* createId */.sX)(),
                                    leftOperand: {
                                        value: reusableQuestionIds[0],
                                        type: "question"
                                    },
                                    operator: "isLessThanOrEqual",
                                    rightOperand: {
                                        type: "static",
                                        value: 3
                                    }
                                }
                            ]
                        },
                        actions: [
                            {
                                id: (0,cuid2/* createId */.sX)(),
                                objective: "jumpToQuestion",
                                target: reusableQuestionIds[2]
                            }
                        ]
                    }
                ],
                range: 5,
                scale: "number",
                headline: {
                    default: t("templates.star_rating_survey_question_1_headline")
                },
                required: true,
                lowerLabel: {
                    default: t("templates.star_rating_survey_question_1_lower_label")
                },
                upperLabel: {
                    default: t("templates.star_rating_survey_question_1_upper_label")
                },
                isColorCodingEnabled: false
            },
            {
                id: reusableQuestionIds[1],
                html: {
                    default: t("templates.star_rating_survey_question_2_html")
                },
                type: types/* TSurveyQuestionTypeEnum */.wn.CTA,
                logic: [
                    {
                        id: (0,cuid2/* createId */.sX)(),
                        conditions: {
                            id: (0,cuid2/* createId */.sX)(),
                            connector: "and",
                            conditions: [
                                {
                                    id: (0,cuid2/* createId */.sX)(),
                                    leftOperand: {
                                        value: reusableQuestionIds[1],
                                        type: "question"
                                    },
                                    operator: "isClicked"
                                }
                            ]
                        },
                        actions: [
                            {
                                id: (0,cuid2/* createId */.sX)(),
                                objective: "jumpToQuestion",
                                target: defaultSurvey.endings[0].id
                            }
                        ]
                    }
                ],
                headline: {
                    default: t("templates.star_rating_survey_question_2_headline")
                },
                required: true,
                buttonUrl: "https://formbricks.com/github",
                buttonLabel: {
                    default: t("templates.star_rating_survey_question_2_button_label")
                },
                buttonExternal: true
            },
            {
                id: reusableQuestionIds[2],
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.star_rating_survey_question_3_headline")
                },
                required: true,
                subheader: {
                    default: t("templates.star_rating_survey_question_3_subheader")
                },
                buttonLabel: {
                    default: t("templates.star_rating_survey_question_3_button_label")
                },
                placeholder: {
                    default: t("templates.star_rating_survey_question_3_placeholder")
                },
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            }
        ]
    };
};
const csatSurvey = (t)=>{
    const reusableQuestionIds = [
        (0,cuid2/* createId */.sX)(),
        (0,cuid2/* createId */.sX)(),
        (0,cuid2/* createId */.sX)()
    ];
    const defaultSurvey = getXMSurveyDefault(t);
    return {
        ...defaultSurvey,
        name: t("templates.csat_survey_name"),
        questions: [
            {
                id: reusableQuestionIds[0],
                type: types/* TSurveyQuestionTypeEnum */.wn.Rating,
                logic: [
                    {
                        id: (0,cuid2/* createId */.sX)(),
                        conditions: {
                            id: (0,cuid2/* createId */.sX)(),
                            connector: "and",
                            conditions: [
                                {
                                    id: (0,cuid2/* createId */.sX)(),
                                    leftOperand: {
                                        value: reusableQuestionIds[0],
                                        type: "question"
                                    },
                                    operator: "isLessThanOrEqual",
                                    rightOperand: {
                                        type: "static",
                                        value: 3
                                    }
                                }
                            ]
                        },
                        actions: [
                            {
                                id: (0,cuid2/* createId */.sX)(),
                                objective: "jumpToQuestion",
                                target: reusableQuestionIds[2]
                            }
                        ]
                    }
                ],
                range: 5,
                scale: "smiley",
                headline: {
                    default: t("templates.csat_survey_question_1_headline")
                },
                required: true,
                lowerLabel: {
                    default: t("templates.csat_survey_question_1_lower_label")
                },
                upperLabel: {
                    default: t("templates.csat_survey_question_1_upper_label")
                },
                isColorCodingEnabled: false
            },
            {
                id: reusableQuestionIds[1],
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                logic: [
                    {
                        id: (0,cuid2/* createId */.sX)(),
                        conditions: {
                            id: (0,cuid2/* createId */.sX)(),
                            connector: "and",
                            conditions: [
                                {
                                    id: (0,cuid2/* createId */.sX)(),
                                    leftOperand: {
                                        value: reusableQuestionIds[1],
                                        type: "question"
                                    },
                                    operator: "isSubmitted"
                                }
                            ]
                        },
                        actions: [
                            {
                                id: (0,cuid2/* createId */.sX)(),
                                objective: "jumpToQuestion",
                                target: defaultSurvey.endings[0].id
                            }
                        ]
                    }
                ],
                headline: {
                    default: t("templates.csat_survey_question_2_headline")
                },
                required: false,
                placeholder: {
                    default: t("templates.csat_survey_question_2_placeholder")
                },
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            },
            {
                id: reusableQuestionIds[2],
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.csat_survey_question_3_headline")
                },
                required: false,
                placeholder: {
                    default: t("templates.csat_survey_question_3_placeholder")
                },
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            }
        ]
    };
};
const cessSurvey = (t)=>{
    return {
        ...getXMSurveyDefault(t),
        name: t("templates.cess_survey_name"),
        questions: [
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.Rating,
                range: 5,
                scale: "number",
                headline: {
                    default: t("templates.cess_survey_question_1_headline")
                },
                required: true,
                lowerLabel: {
                    default: t("templates.cess_survey_question_1_lower_label")
                },
                upperLabel: {
                    default: t("templates.cess_survey_question_1_upper_label")
                },
                isColorCodingEnabled: false
            },
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.cess_survey_question_2_headline")
                },
                required: true,
                placeholder: {
                    default: t("templates.cess_survey_question_2_placeholder")
                },
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            }
        ]
    };
};
const smileysRatingSurvey = (t)=>{
    const reusableQuestionIds = [
        (0,cuid2/* createId */.sX)(),
        (0,cuid2/* createId */.sX)(),
        (0,cuid2/* createId */.sX)()
    ];
    const defaultSurvey = getXMSurveyDefault(t);
    return {
        ...defaultSurvey,
        name: t("templates.smileys_survey_name"),
        questions: [
            {
                id: reusableQuestionIds[0],
                type: types/* TSurveyQuestionTypeEnum */.wn.Rating,
                logic: [
                    {
                        id: (0,cuid2/* createId */.sX)(),
                        conditions: {
                            id: (0,cuid2/* createId */.sX)(),
                            connector: "and",
                            conditions: [
                                {
                                    id: (0,cuid2/* createId */.sX)(),
                                    leftOperand: {
                                        value: reusableQuestionIds[0],
                                        type: "question"
                                    },
                                    operator: "isLessThanOrEqual",
                                    rightOperand: {
                                        type: "static",
                                        value: 3
                                    }
                                }
                            ]
                        },
                        actions: [
                            {
                                id: (0,cuid2/* createId */.sX)(),
                                objective: "jumpToQuestion",
                                target: reusableQuestionIds[2]
                            }
                        ]
                    }
                ],
                range: 5,
                scale: "smiley",
                headline: {
                    default: t("templates.smileys_survey_question_1_headline")
                },
                required: true,
                lowerLabel: {
                    default: t("templates.smileys_survey_question_1_lower_label")
                },
                upperLabel: {
                    default: t("templates.smileys_survey_question_1_upper_label")
                },
                isColorCodingEnabled: false
            },
            {
                id: reusableQuestionIds[1],
                html: {
                    default: t("templates.smileys_survey_question_2_html")
                },
                type: types/* TSurveyQuestionTypeEnum */.wn.CTA,
                logic: [
                    {
                        id: (0,cuid2/* createId */.sX)(),
                        conditions: {
                            id: (0,cuid2/* createId */.sX)(),
                            connector: "and",
                            conditions: [
                                {
                                    id: (0,cuid2/* createId */.sX)(),
                                    leftOperand: {
                                        value: reusableQuestionIds[1],
                                        type: "question"
                                    },
                                    operator: "isClicked"
                                }
                            ]
                        },
                        actions: [
                            {
                                id: (0,cuid2/* createId */.sX)(),
                                objective: "jumpToQuestion",
                                target: defaultSurvey.endings[0].id
                            }
                        ]
                    }
                ],
                headline: {
                    default: t("templates.smileys_survey_question_2_headline")
                },
                required: true,
                buttonUrl: "https://formbricks.com/github",
                buttonLabel: {
                    default: t("templates.smileys_survey_question_2_button_label")
                },
                buttonExternal: true
            },
            {
                id: reusableQuestionIds[2],
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.smileys_survey_question_3_headline")
                },
                required: true,
                subheader: {
                    default: t("templates.smileys_survey_question_3_subheader")
                },
                buttonLabel: {
                    default: t("templates.smileys_survey_question_3_button_label")
                },
                placeholder: {
                    default: t("templates.smileys_survey_question_3_placeholder")
                },
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            }
        ]
    };
};
const enpsSurvey = (t)=>{
    return {
        ...getXMSurveyDefault(t),
        name: t("templates.enps_survey_name"),
        questions: [
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.NPS,
                headline: {
                    default: t("templates.enps_survey_question_1_headline")
                },
                required: false,
                lowerLabel: {
                    default: t("templates.enps_survey_question_1_lower_label")
                },
                upperLabel: {
                    default: t("templates.enps_survey_question_1_upper_label")
                },
                isColorCodingEnabled: true
            },
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.enps_survey_question_2_headline")
                },
                required: false,
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            },
            {
                id: (0,cuid2/* createId */.sX)(),
                type: types/* TSurveyQuestionTypeEnum */.wn.OpenText,
                headline: {
                    default: t("templates.enps_survey_question_3_headline")
                },
                required: false,
                inputType: "text",
                charLimit: {
                    enabled: false
                }
            }
        ]
    };
};
const getXMTemplates = (t)=>{
    try {
        return [
            npsSurvey(t),
            starRatingSurvey(t),
            csatSurvey(t),
            cessSurvey(t),
            smileysRatingSurvey(t),
            enpsSurvey(t)
        ];
    } catch (error) {
        logError(error, "getXMTemplates");
        return []; // Return an empty array or handle as needed
    }
};

// EXTERNAL MODULE: ./modules/ui/components/loading-spinner/index.tsx
var loading_spinner = __webpack_require__(829884);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js
var react = __webpack_require__(891616);
;// ./modules/ui/components/option-card/index.tsx



const sizeClasses = {
    sm: "p-4 rounded-lg w-60 shadow-md",
    md: "p-6 rounded-xl w-80  shadow-lg",
    lg: "p-8 rounded-2xl w-100 shadow-xl"
};
const OptionCard = ({ size, title, description, children, onSelect, loading, cssId })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "relative h-full",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                id: cssId,
                className: `flex cursor-pointer flex-col items-center justify-center border border-slate-200 bg-white transition-transform duration-200 hover:scale-[1.03] hover:border-slate-300 ${sizeClasses[size]}`,
                onClick: onSelect,
                role: "button",
                tabIndex: 0,
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                    className: "flex flex-col items-center space-y-4",
                    children: [
                        children,
                        /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                            className: "text-center",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                    className: "text-lg font-medium text-slate-800",
                                    children: title
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                    className: "text-sm text-slate-500",
                                    children: description
                                })
                            ]
                        })
                    ]
                })
            }),
            loading && /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                className: "absolute inset-0 flex items-center justify-center bg-slate-100/70",
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(loading_spinner.LoadingSpinner, {})
            })
        ]
    });
};

// EXTERNAL MODULE: ../../node_modules/next/dist/client/app-dir/link.js
var app_dir_link = __webpack_require__(36888);
var link_default = /*#__PURE__*/__webpack_require__.n(app_dir_link);
;// ./app/(app)/(onboarding)/organizations/components/OnboardingOptionsContainer.tsx



const OnboardingOptionsContainer = ({ options })=>{
    const getOptionCard = (option)=>{
        const Icon = option.icon;
        return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(OptionCard, {
            size: "md",
            title: option.title,
            onSelect: option.onClick,
            description: option.description,
            loading: option.isLoading || false,
            children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                className: "flex flex-col items-center",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(Icon, {
                        className: "h-16 w-16 text-slate-600",
                        strokeWidth: 1
                    }),
                    option.iconText && /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                        className: "mt-4 w-fit rounded-xl bg-slate-200 px-4 text-sm text-slate-700",
                        children: option.iconText
                    })
                ]
            })
        }, option.title);
    };
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
        className: "flex w-full max-w-5xl flex-wrap justify-center gap-8 text-center",
        children: options.map((option)=>option.href ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)((link_default()), {
                href: option.href,
                children: getOptionCard(option)
            }, option.title) : getOptionCard(option))
    });
};

// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(856763);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7ff20090763891981ab1625ad83b771c8ef93748aa&name=createSurveyAction!
var next_flight_server_reference_proxy_loaderid_7ff20090763891981ab1625ad83b771c8ef93748aa_name_createSurveyAction_ = __webpack_require__(182711);
// EXTERNAL MODULE: ../../node_modules/@tolgee/react/dist/tolgee-react.esm.js
var tolgee_react_esm = __webpack_require__(397674);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/createLucideIcon.js + 3 modules
var createLucideIcon = __webpack_require__(58303);
;// ../../node_modules/lucide-react/dist/esm/icons/shopping-cart.js
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const ShoppingCart = (0,createLucideIcon/* default */.A)("ShoppingCart", [
    [
        "circle",
        {
            cx: "8",
            cy: "21",
            r: "1",
            key: "jimo8o"
        }
    ],
    [
        "circle",
        {
            cx: "19",
            cy: "21",
            r: "1",
            key: "13723u"
        }
    ],
    [
        "path",
        {
            d: "M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",
            key: "9zh506"
        }
    ]
]);
 //# sourceMappingURL=shopping-cart.js.map

// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/star.js
var star = __webpack_require__(696340);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/thumbs-up.js
var thumbs_up = __webpack_require__(787823);
;// ../../node_modules/lucide-react/dist/esm/icons/activity.js
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Activity = (0,createLucideIcon/* default */.A)("Activity", [
    [
        "path",
        {
            d: "M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",
            key: "169zse"
        }
    ]
]);
 //# sourceMappingURL=activity.js.map

// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/smile.js
var smile = __webpack_require__(691794);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/users.js
var users = __webpack_require__(969614);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/navigation.js
var navigation = __webpack_require__(470207);
// EXTERNAL MODULE: ../../node_modules/react-hot-toast/dist/index.mjs + 1 modules
var dist = __webpack_require__(986090);
;// ./app/(app)/(onboarding)/environments/[environmentId]/xm-templates/components/XMTemplateList.tsx
/* __next_internal_client_entry_do_not_use__ XMTemplateList auto */ 










const XMTemplateList = ({ project, user, environmentId })=>{
    const [activeTemplateId, setActiveTemplateId] = (0,react.useState)(null);
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const router = (0,navigation.useRouter)();
    const createSurvey = async (activeTemplate)=>{
        const augmentedTemplate = {
            ...activeTemplate,
            type: "link",
            createdBy: user.id
        };
        const createSurveyResponse = await (0,next_flight_server_reference_proxy_loaderid_7ff20090763891981ab1625ad83b771c8ef93748aa_name_createSurveyAction_/* createSurveyAction */.H)({
            environmentId: environmentId,
            surveyBody: augmentedTemplate
        });
        if (createSurveyResponse?.data) {
            router.push(`/environments/${environmentId}/surveys/${createSurveyResponse.data.id}/edit?mode=cx`);
        } else {
            const errorMessage = (0,helper/* getFormattedErrorMessage */.g3)(createSurveyResponse);
            dist/* default */.Ay.error(errorMessage);
        }
    };
    const handleTemplateClick = (templateIdx)=>{
        setActiveTemplateId(templateIdx);
        const template = getXMTemplates(t)[templateIdx];
        const newTemplate = replacePresetPlaceholders(template, project);
        createSurvey(newTemplate);
    };
    const XMTemplateOptions = [
        {
            title: t("environments.xm-templates.nps"),
            description: t("environments.xm-templates.nps_description"),
            icon: ShoppingCart,
            onClick: ()=>handleTemplateClick(0),
            isLoading: activeTemplateId === 0
        },
        {
            title: t("environments.xm-templates.five_star_rating"),
            description: t("environments.xm-templates.five_star_rating_description"),
            icon: star/* default */.A,
            onClick: ()=>handleTemplateClick(1),
            isLoading: activeTemplateId === 1
        },
        {
            title: t("environments.xm-templates.csat"),
            description: t("environments.xm-templates.csat_description"),
            icon: thumbs_up/* default */.A,
            onClick: ()=>handleTemplateClick(2),
            isLoading: activeTemplateId === 2
        },
        {
            title: t("environments.xm-templates.ces"),
            description: t("environments.xm-templates.ces_description"),
            icon: Activity,
            onClick: ()=>handleTemplateClick(3),
            isLoading: activeTemplateId === 3
        },
        {
            title: t("environments.xm-templates.smileys"),
            description: t("environments.xm-templates.smileys_description"),
            icon: smile/* default */.A,
            onClick: ()=>handleTemplateClick(4),
            isLoading: activeTemplateId === 4
        },
        {
            title: t("environments.xm-templates.enps"),
            description: t("environments.xm-templates.enps_description"),
            icon: users/* default */.A,
            onClick: ()=>handleTemplateClick(5),
            isLoading: activeTemplateId === 5
        }
    ];
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(OnboardingOptionsContainer, {
        options: XMTemplateOptions
    });
};


/***/ }),

/***/ 829884:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingSpinner: () => (/* binding */ LoadingSpinner)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(983773);
/* __next_internal_client_entry_do_not_use__ LoadingSpinner auto */ 

const LoadingSpinner = ({ className = "h-6 w-6" })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        className: "flex h-full w-full items-center justify-center",
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", {
            className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__.cn)("m-2 animate-spin text-slate-700", className),
            xmlns: "http://www.w3.org/2000/svg",
            fill: "none",
            viewBox: "0 0 24 24",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("circle", {
                    className: "opacity-25",
                    cx: "12",
                    cy: "12",
                    r: "10",
                    stroke: "currentColor",
                    strokeWidth: "4"
                }),
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
                    className: "opacity-75",
                    fill: "currentColor",
                    d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                })
            ]
        })
    });
};


/***/ }),

/***/ 691794:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Smile)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Smile = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Smile", [
    [
        "circle",
        {
            cx: "12",
            cy: "12",
            r: "10",
            key: "1mglay"
        }
    ],
    [
        "path",
        {
            d: "M8 14s1.5 2 4 2 4-2 4-2",
            key: "1y1vjs"
        }
    ],
    [
        "line",
        {
            x1: "9",
            x2: "9.01",
            y1: "9",
            y2: "9",
            key: "yxxnd0"
        }
    ],
    [
        "line",
        {
            x1: "15",
            x2: "15.01",
            y1: "9",
            y2: "9",
            key: "1p4y9e"
        }
    ]
]);
 //# sourceMappingURL=smile.js.map


/***/ }),

/***/ 696340:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Star)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Star = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Star", [
    [
        "path",
        {
            d: "M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",
            key: "r04s7s"
        }
    ]
]);
 //# sourceMappingURL=star.js.map


/***/ }),

/***/ 787823:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ThumbsUp)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const ThumbsUp = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("ThumbsUp", [
    [
        "path",
        {
            d: "M7 10v12",
            key: "1qc93n"
        }
    ],
    [
        "path",
        {
            d: "M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",
            key: "emmmcr"
        }
    ]
]);
 //# sourceMappingURL=thumbs-up.js.map


/***/ }),

/***/ 969614:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Users)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Users = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Users", [
    [
        "path",
        {
            d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",
            key: "1yyitq"
        }
    ],
    [
        "circle",
        {
            cx: "9",
            cy: "7",
            r: "4",
            key: "nufk8"
        }
    ],
    [
        "path",
        {
            d: "M22 21v-2a4 4 0 0 0-3-3.87",
            key: "kshegd"
        }
    ],
    [
        "path",
        {
            d: "M16 3.13a4 4 0 0 1 0 7.75",
            key: "1da9ce"
        }
    ]
]);
 //# sourceMappingURL=users.js.map


/***/ }),

/***/ 983773:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cn: () => (/* binding */ cn)
/* harmony export */ });
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(553626);
/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(550186);


const cn = (...inputs)=>{
    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__/* .twMerge */ .QP)((0,clsx__WEBPACK_IMPORTED_MODULE_1__/* .clsx */ .$)(inputs));
};


/***/ }),

/***/ 93139:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ replaceQuestionPresetPlaceholders)
/* harmony export */ });
/* unused harmony export replacePresetPlaceholders */
/* harmony import */ var _i18n_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(864698);
/* harmony import */ var _pollyfills_structuredClone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(300189);


const replaceQuestionPresetPlaceholders = (question, project)=>{
    if (!project) return question;
    const newQuestion = (0,_pollyfills_structuredClone__WEBPACK_IMPORTED_MODULE_0__/* .structuredClone */ .p)(question);
    const defaultLanguageCode = "default";
    if (newQuestion.headline) {
        newQuestion.headline[defaultLanguageCode] = (0,_i18n_utils__WEBPACK_IMPORTED_MODULE_1__/* .getLocalizedValue */ .bT)(newQuestion.headline, defaultLanguageCode).replace("{{projectName}}", project.name);
    }
    if (newQuestion.subheader) {
        newQuestion.subheader[defaultLanguageCode] = (0,_i18n_utils__WEBPACK_IMPORTED_MODULE_1__/* .getLocalizedValue */ .bT)(newQuestion.subheader, defaultLanguageCode)?.replace("{{projectName}}", project.name);
    }
    return newQuestion;
};
// replace all occurences of projectName with the actual project name in the current template
const replacePresetPlaceholders = (template, project)=>{
    const preset = structuredClone(template.preset);
    preset.name = preset.name.replace("{{projectName}}", project.name);
    preset.questions = preset.questions.map((question)=>{
        return replaceQuestionPresetPlaceholders(question, project);
    });
    return {
        ...template,
        preset
    };
};


/***/ }),

/***/ 331189:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   XMTemplateList: () => (/* binding */ XMTemplateList)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const XMTemplateList = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call XMTemplateList() from the server but XMTemplateList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/(app)/(onboarding)/environments/[environmentId]/xm-templates/components/XMTemplateList.tsx",
"XMTemplateList",
);

/***/ }),

/***/ 524404:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ page)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(891069);
// EXTERNAL MODULE: ./app/(app)/(onboarding)/environments/[environmentId]/xm-templates/components/XMTemplateList.tsx
var XMTemplateList = __webpack_require__(331189);
// EXTERNAL MODULE: ./lib/utils/services.ts
var services = __webpack_require__(266115);
// EXTERNAL MODULE: ../../packages/types/errors.ts
var errors = __webpack_require__(470641);
;// ./lib/utils/helper.ts


const getFormattedErrorMessage = (result)=>{
    let message = "";
    if (result.serverError) {
        message = result.serverError;
    } else {
        const errors = result.validationErrors;
        message = Object.keys(errors || {}).map((key)=>{
            if (key === "_errors") return errors[key].join(", ");
            return `${key ? `${key}` : ""}${errors?.[key]?._errors?.join(", ")}`;
        }).join("\n");
    }
    return message;
};
/**
 * GET organization ID from RESOURCE ID
 */ const getOrganizationIdFromProjectId = async (projectId)=>{
    const project = await (0,services/* getProject */.U1)(projectId);
    if (!project) {
        throw new errors/* ResourceNotFoundError */.CE("project", projectId);
    }
    return project.organizationId;
};
const getOrganizationIdFromEnvironmentId = async (environmentId)=>{
    const environment = await (0,services/* getEnvironment */.uc)(environmentId);
    if (!environment) {
        throw new errors/* ResourceNotFoundError */.CE("environment", environmentId);
    }
    return await getOrganizationIdFromProjectId(environment.projectId);
};
const getOrganizationIdFromSurveyId = async (surveyId)=>{
    const survey = await getSurvey(surveyId);
    if (!survey) {
        throw new ResourceNotFoundError("survey", surveyId);
    }
    return await getOrganizationIdFromEnvironmentId(survey.environmentId);
};
const getOrganizationIdFromResponseId = async (responseId)=>{
    const response = await getResponse(responseId);
    if (!response) {
        throw new ResourceNotFoundError("response", responseId);
    }
    return await getOrganizationIdFromSurveyId(response.surveyId);
};
const getOrganizationIdFromContactId = async (contactId)=>{
    const contact = await getContact(contactId);
    if (!contact) {
        throw new ResourceNotFoundError("contact", contactId);
    }
    return await getOrganizationIdFromEnvironmentId(contact.environmentId);
};
const getProjectIdFromContactId = async (contactId)=>{
    const contact = await getContact(contactId);
    if (!contact) {
        throw new ResourceNotFoundError("contact", contactId);
    }
    return await getProjectIdFromEnvironmentId(contact.environmentId);
};
const getOrganizationIdFromTagId = async (tagId)=>{
    const tag = await getTag(tagId);
    if (!tag) {
        throw new ResourceNotFoundError("tag", tagId);
    }
    return await getOrganizationIdFromEnvironmentId(tag.environmentId);
};
const getOrganizationIdFromResponseNoteId = async (responseNoteId)=>{
    const responseNote = await getResponseNote(responseNoteId);
    if (!responseNote) {
        throw new ResourceNotFoundError("responseNote", responseNoteId);
    }
    return await getOrganizationIdFromResponseId(responseNote.responseId);
};
const getOrganizationIdFromSegmentId = async (segmentId)=>{
    const segment = await getSegment(segmentId);
    if (!segment) {
        throw new ResourceNotFoundError("segment", segmentId);
    }
    return await getOrganizationIdFromEnvironmentId(segment.environmentId);
};
const getOrganizationIdFromActionClassId = async (actionClassId)=>{
    const actionClass = await getActionClass(actionClassId);
    if (!actionClass) {
        throw new ResourceNotFoundError("actionClass", actionClassId);
    }
    return await getOrganizationIdFromEnvironmentId(actionClass.environmentId);
};
const getOrganizationIdFromIntegrationId = async (integrationId)=>{
    const integration = await getIntegration(integrationId);
    if (!integration) {
        throw new ResourceNotFoundError("integration", integrationId);
    }
    return await getOrganizationIdFromEnvironmentId(integration.environmentId);
};
const getOrganizationIdFromWebhookId = async (webhookId)=>{
    const webhook = await getWebhook(webhookId);
    if (!webhook) {
        throw new ResourceNotFoundError("webhook", webhookId);
    }
    return await getOrganizationIdFromEnvironmentId(webhook.environmentId);
};
const getOrganizationIdFromApiKeyId = async (apiKeyId)=>{
    const apiKeyFromServer = await getApiKey(apiKeyId);
    if (!apiKeyFromServer) {
        throw new ResourceNotFoundError("apiKey", apiKeyId);
    }
    return await getOrganizationIdFromEnvironmentId(apiKeyFromServer.environmentId);
};
const getOrganizationIdFromInviteId = async (inviteId)=>{
    const invite = await getInvite(inviteId);
    if (!invite) {
        throw new ResourceNotFoundError("invite", inviteId);
    }
    return invite.organizationId;
};
const getOrganizationIdFromLanguageId = async (languageId)=>{
    const language = await getLanguage(languageId);
    if (!language) {
        throw new ResourceNotFoundError("language", languageId);
    }
    return await getOrganizationIdFromProjectId(language.projectId);
};
const getOrganizationIdFromTeamId = async (teamId)=>{
    const team = await getTeam(teamId);
    if (!team) {
        throw new ResourceNotFoundError("team", teamId);
    }
    return team.organizationId;
};
const getOrganizationIdFromInsightId = async (insightId)=>{
    const insight = await getInsight(insightId);
    if (!insight) {
        throw new ResourceNotFoundError("insight", insightId);
    }
    return await getOrganizationIdFromEnvironmentId(insight.environmentId);
};
const getOrganizationIdFromDocumentId = async (documentId)=>{
    const document = await getDocument(documentId);
    if (!document) {
        throw new ResourceNotFoundError("document", documentId);
    }
    return await getOrganizationIdFromEnvironmentId(document.environmentId);
};
// project id helpers
const getProjectIdFromEnvironmentId = async (environmentId)=>{
    const environment = await getEnvironment(environmentId);
    if (!environment) {
        throw new ResourceNotFoundError("environment", environmentId);
    }
    return environment.projectId;
};
const getProjectIdFromSurveyId = async (surveyId)=>{
    const survey = await getSurvey(surveyId);
    if (!survey) {
        throw new ResourceNotFoundError("survey", surveyId);
    }
    return await getProjectIdFromEnvironmentId(survey.environmentId);
};
const getProjectIdFromInsightId = async (insightId)=>{
    const insight = await getInsight(insightId);
    if (!insight) {
        throw new ResourceNotFoundError("insight", insightId);
    }
    return await getProjectIdFromEnvironmentId(insight.environmentId);
};
const getProjectIdFromSegmentId = async (segmentId)=>{
    const segment = await getSegment(segmentId);
    if (!segment) {
        throw new ResourceNotFoundError("segment", segmentId);
    }
    return await getProjectIdFromEnvironmentId(segment.environmentId);
};
const getProjectIdFromApiKeyId = async (apiKeyId)=>{
    const apiKey = await getApiKey(apiKeyId);
    if (!apiKey) {
        throw new ResourceNotFoundError("apiKey", apiKeyId);
    }
    return await getProjectIdFromEnvironmentId(apiKey.environmentId);
};
const getProjectIdFromActionClassId = async (actionClassId)=>{
    const actionClass = await getActionClass(actionClassId);
    if (!actionClass) {
        throw new ResourceNotFoundError("actionClass", actionClassId);
    }
    return await getProjectIdFromEnvironmentId(actionClass.environmentId);
};
const getProjectIdFromTagId = async (tagId)=>{
    const tag = await getTag(tagId);
    if (!tag) {
        throw new ResourceNotFoundError("tag", tagId);
    }
    return await getProjectIdFromEnvironmentId(tag.environmentId);
};
const getProjectIdFromLanguageId = async (languageId)=>{
    const language = await getLanguage(languageId);
    if (!language) {
        throw new ResourceNotFoundError("language", languageId);
    }
    return language.projectId;
};
const getProjectIdFromResponseId = async (responseId)=>{
    const response = await getResponse(responseId);
    if (!response) {
        throw new ResourceNotFoundError("response", responseId);
    }
    return await getProjectIdFromSurveyId(response.surveyId);
};
const getProjectIdFromResponseNoteId = async (responseNoteId)=>{
    const responseNote = await getResponseNote(responseNoteId);
    if (!responseNote) {
        throw new ResourceNotFoundError("responseNote", responseNoteId);
    }
    return await getProjectIdFromResponseId(responseNote.responseId);
};
const getProductIdFromContactId = async (contactId)=>{
    const contact = await getContact(contactId);
    if (!contact) {
        throw new ResourceNotFoundError("contact", contactId);
    }
    return await getProjectIdFromEnvironmentId(contact.environmentId);
};
const getProjectIdFromDocumentId = async (documentId)=>{
    const document = await getDocument(documentId);
    if (!document) {
        throw new ResourceNotFoundError("document", documentId);
    }
    return await getProjectIdFromEnvironmentId(document.environmentId);
};
const getProjectIdFromIntegrationId = async (integrationId)=>{
    const integration = await getIntegration(integrationId);
    if (!integration) {
        throw new ResourceNotFoundError("integration", integrationId);
    }
    return await getProjectIdFromEnvironmentId(integration.environmentId);
};
const getProjectIdFromWebhookId = async (webhookId)=>{
    const webhook = await getWebhook(webhookId);
    if (!webhook) {
        throw new ResourceNotFoundError("webhook", webhookId);
    }
    return await getProjectIdFromEnvironmentId(webhook.environmentId);
};
// environment id helpers
const getEnvironmentIdFromSurveyId = async (surveyId)=>{
    const survey = await getSurvey(surveyId);
    if (!survey) {
        throw new ResourceNotFoundError("survey", surveyId);
    }
    return survey.environmentId;
};
const getEnvironmentIdFromResponseId = async (responseId)=>{
    const response = await getResponse(responseId);
    if (!response) {
        throw new ResourceNotFoundError("response", responseId);
    }
    return await getEnvironmentIdFromSurveyId(response.surveyId);
};
const getEnvironmentIdFromInsightId = async (insightId)=>{
    const insight = await getInsight(insightId);
    if (!insight) {
        throw new ResourceNotFoundError("insight", insightId);
    }
    return insight.environmentId;
};
const getEnvironmentIdFromSegmentId = async (segmentId)=>{
    const segment = await getSegment(segmentId);
    if (!segment) {
        throw new ResourceNotFoundError("segment", segmentId);
    }
    return segment.environmentId;
};
const getEnvironmentIdFromTagId = async (tagId)=>{
    const tag = await getTag(tagId);
    if (!tag) {
        throw new ResourceNotFoundError("tag", tagId);
    }
    return tag.environmentId;
};
const isStringMatch = (query, value)=>{
    // lowercase both query and value
    // replace all spaces with empty string
    // replace all underscores with empty string
    // replace all dashes with empty string
    const queryModified = query.toLowerCase().replace(/ /g, "").replace(/_/g, "").replace(/-/g, "");
    const valueModified = value.toLowerCase().replace(/ /g, "").replace(/_/g, "").replace(/-/g, "");
    return valueModified.includes(queryModified);
};

// EXTERNAL MODULE: ./modules/auth/lib/authOptions.ts + 8 modules
var authOptions = __webpack_require__(136015);
// EXTERNAL MODULE: ./modules/ui/components/button/index.tsx + 1 modules
var components_button = __webpack_require__(474292);
// EXTERNAL MODULE: ./modules/ui/components/header/index.tsx
var header = __webpack_require__(27287);
// EXTERNAL MODULE: ./tolgee/server.tsx + 2 modules
var server = __webpack_require__(186184);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/x.js
var x = __webpack_require__(438150);
// EXTERNAL MODULE: ../../node_modules/next-auth/index.js
var next_auth = __webpack_require__(963302);
// EXTERNAL MODULE: ../../node_modules/next/dist/client/app-dir/link.js
var app_dir_link = __webpack_require__(853648);
var link_default = /*#__PURE__*/__webpack_require__.n(app_dir_link);
// EXTERNAL MODULE: ../../packages/lib/environment/service.ts
var service = __webpack_require__(32135);
// EXTERNAL MODULE: ../../packages/lib/project/service.ts
var project_service = __webpack_require__(529987);
// EXTERNAL MODULE: ../../packages/lib/user/service.ts
var user_service = __webpack_require__(184511);
;// ./app/(app)/(onboarding)/environments/[environmentId]/xm-templates/page.tsx













const Page = async (props)=>{
    const params = await props.params;
    const session = await (0,next_auth.getServerSession)(authOptions/* authOptions */.N);
    const environment = await (0,service/* getEnvironment */.uc)(params.environmentId);
    const t = await (0,server/* getTranslate */.r)();
    if (!session) {
        throw new Error(t("common.session_not_found"));
    }
    const user = await (0,user_service/* getUser */.wz)(session.user.id);
    if (!user) {
        throw new Error(t("common.user_not_found"));
    }
    if (!environment) {
        throw new Error(t("common.environment_not_found"));
    }
    const organizationId = await getOrganizationIdFromEnvironmentId(environment.id);
    const project = await (0,project_service/* getProjectByEnvironmentId */.bq)(environment.id);
    if (!project) {
        throw new Error(t("common.project_not_found"));
    }
    const projects = await (0,project_service/* getUserProjects */._P)(session.user.id, organizationId);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "flex min-h-full min-w-full flex-col items-center justify-center space-y-12",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(header/* Header */.Y, {
                title: t("environments.xm-templates.headline")
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(XMTemplateList.XMTemplateList, {
                project: project,
                user: user,
                environmentId: environment.id
            }),
            projects.length >= 2 && /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                className: "absolute right-5 top-5 !mt-0 text-slate-500 hover:text-slate-700",
                variant: "ghost",
                asChild: true,
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)((link_default()), {
                    href: `/environments/${environment.id}/surveys`,
                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(x/* default */.A, {
                        className: "h-7 w-7",
                        strokeWidth: 1.5
                    })
                })
            })
        ]
    });
};
/* harmony default export */ const page = (Page);


/***/ }),

/***/ 767630:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ apiKeyCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const apiKeyCache = {
    tag: {
        byId (id) {
            return `apiKeys-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-apiKeys`;
        },
        byHashedKey (hashedKey) {
            return `apiKeys-${hashedKey}-apiKey`;
        }
    },
    revalidate ({ id, environmentId, hashedKey }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (hashedKey) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byHashedKey(hashedKey));
        }
    }
};


/***/ }),

/***/ 180868:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ contactCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const contactCache = {
    tag: {
        byId (id) {
            return `contacts-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-contacts`;
        },
        byEnvironmentIdAndUserId (environmentId, userId) {
            return `environments-${environmentId}-contactByUserId-${userId}`;
        }
    },
    revalidate: ({ id, environmentId, userId })=>{
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(contactCache.tag.byId(id));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(contactCache.tag.byEnvironmentId(environmentId));
        }
        if (environmentId && userId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(contactCache.tag.byEnvironmentIdAndUserId(environmentId, userId));
        }
    }
};


/***/ }),

/***/ 349083:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ inviteCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const inviteCache = {
    tag: {
        byId (id) {
            return `invites-${id}`;
        },
        byOrganizationId (organizationId) {
            return `organizations-${organizationId}-invites`;
        }
    },
    revalidate ({ id, organizationId }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (organizationId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byOrganizationId(organizationId));
        }
    }
};


/***/ }),

/***/ 441215:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ teamCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const teamCache = {
    tag: {
        byId (id) {
            return `team-${id}`;
        },
        byProjectId (projectId) {
            return `project-teams-${projectId}`;
        },
        byUserId (userId) {
            return `user-${userId}-teams`;
        },
        byOrganizationId (organizationId) {
            return `organization-${organizationId}-teams`;
        }
    },
    revalidate: ({ id, projectId, userId, organizationId })=>{
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byId(id));
        }
        if (projectId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byProjectId(projectId));
        }
        if (userId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byUserId(userId));
        }
        if (organizationId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(teamCache.tag.byOrganizationId(organizationId));
        }
    }
};


/***/ }),

/***/ 335381:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ webhookCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const webhookCache = {
    tag: {
        byId (id) {
            return `webhooks-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-webhooks`;
        },
        byEnvironmentIdAndSource (environmentId, source) {
            return `environments-${environmentId}-sources-${source}-webhooks`;
        }
    },
    revalidate ({ id, environmentId, source }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (environmentId && source) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentIdAndSource(environmentId, source));
        }
    }
};


/***/ }),

/***/ 729455:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ checkAuthorizationUpdated)
/* harmony export */ });
/* harmony import */ var _modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(562147);
/* harmony import */ var next_safe_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(717921);
/* harmony import */ var _formbricks_lib_membership_hooks_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(895856);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(207798);




const formatErrors = (issues)=>{
    return {
        ...issues.reduce((acc, issue)=>{
            acc[issue.path.join(".")] = {
                _errors: [
                    issue.message
                ]
            };
            return acc;
        }, {})
    };
};
const teamPermissionWeight = {
    read: 1,
    readWrite: 2,
    manage: 3
};
const teamRoleWeight = {
    contributor: 1,
    admin: 2
};
const checkAuthorizationUpdated = async ({ userId, organizationId, access })=>{
    const role = await (0,_formbricks_lib_membership_hooks_actions__WEBPACK_IMPORTED_MODULE_2__/* .getMembershipRole */ .J)(userId, organizationId);
    for (const accessItem of access){
        if (accessItem.type === "organization") {
            if (accessItem.schema) {
                const resultSchema = accessItem.schema.strict();
                const parsedResult = resultSchema.safeParse(accessItem.data);
                if (!parsedResult.success) {
                    // @ts-expect-error -- TODO: match dynamic next-safe-action types
                    return (0,next_safe_action__WEBPACK_IMPORTED_MODULE_1__/* .returnValidationErrors */ .Di)(resultSchema, formatErrors(parsedResult.error.issues));
                }
            }
            if (accessItem.roles.includes(role)) {
                return true;
            }
        } else {
            if (accessItem.type === "projectTeam") {
                const projectPermission = await (0,_modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_0__/* .getProjectPermissionByUserId */ ._)(userId, accessItem.projectId);
                if (!projectPermission || accessItem.minPermission !== undefined && teamPermissionWeight[projectPermission] < teamPermissionWeight[accessItem.minPermission]) {
                    continue;
                }
            } else {
                const teamRole = await (0,_modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_0__/* .getTeamRoleByTeamIdUserId */ .b)(accessItem.teamId, userId);
                if (!teamRole || accessItem.minPermission !== undefined && teamRoleWeight[teamRole] < teamRoleWeight[accessItem.minPermission]) {
                    continue;
                }
            }
            return true;
        }
    }
    throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_3__/* .AuthorizationError */ .yi("Not authorized");
};


/***/ }),

/***/ 266115:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bx: () => (/* binding */ getActionClass),
/* harmony export */   CG: () => (/* binding */ getApiKey),
/* harmony export */   Dp: () => (/* binding */ getSurvey),
/* harmony export */   I_: () => (/* binding */ getInvite),
/* harmony export */   O0: () => (/* binding */ getWebhook),
/* harmony export */   U1: () => (/* binding */ getProject),
/* harmony export */   Uo: () => (/* binding */ getTeam),
/* harmony export */   Wy: () => (/* binding */ getResponseNote),
/* harmony export */   Xj: () => (/* binding */ isProjectPartOfOrganization),
/* harmony export */   YE: () => (/* binding */ getDocument),
/* harmony export */   Z0: () => (/* binding */ getLanguage),
/* harmony export */   bH: () => (/* binding */ getTag),
/* harmony export */   bl: () => (/* binding */ getContact),
/* harmony export */   kn: () => (/* binding */ getSegment),
/* harmony export */   l5: () => (/* binding */ isTeamPartOfOrganization),
/* harmony export */   mi: () => (/* binding */ getResponse),
/* harmony export */   rg: () => (/* binding */ getIntegration),
/* harmony export */   uc: () => (/* binding */ getEnvironment),
/* harmony export */   zv: () => (/* binding */ getInsight)
/* harmony export */ });
/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(910330);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(208706);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_cache_api_key__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(767630);
/* harmony import */ var _lib_cache_contact__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(180868);
/* harmony import */ var _lib_cache_invite__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(349083);
/* harmony import */ var _lib_cache_team__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(441215);
/* harmony import */ var _lib_cache_webhook__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(335381);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(896330);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(922728);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _formbricks_database__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(527610);
/* harmony import */ var _formbricks_lib_actionClass_cache__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(204769);
/* harmony import */ var _formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(794356);
/* harmony import */ var _formbricks_lib_cache_segment__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(337386);
/* harmony import */ var _formbricks_lib_environment_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(488734);
/* harmony import */ var _formbricks_lib_integration_cache__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(835093);
/* harmony import */ var _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(236730);
/* harmony import */ var _formbricks_lib_response_cache__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(122522);
/* harmony import */ var _formbricks_lib_responseNote_cache__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(832094);
/* harmony import */ var _formbricks_lib_survey_cache__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(249479);
/* harmony import */ var _formbricks_lib_tag_cache__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(649195);
/* harmony import */ var _formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(860988);
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(733735);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(470641);
/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(7262);
/* __next_internal_action_entry_do_not_use__ {"7f11f2efac37ac84796e6cb223722dbe2e808e177f":"getResponse","7f12957c3365cc2950bdc48f0118f82439eb6c23ec":"getSurvey","7f20db167926d501ff62b9525526548773c8a436d4":"isTeamPartOfOrganization","7f36cf02b548a01d85112f587591e8c1e8390fa538":"isProjectPartOfOrganization","7f4f2c9c8b657cf906e9a25e65dafac6ec65967916":"getWebhook","7f540889be00b7aa8c6ff1edc5cd79ece876954fd3":"getInvite","7f60061b4b6be335eaa2facd1c5d8129b87f6923f4":"getActionClass","7f670a0537f96de8b5156e1b206124b2a990484370":"getApiKey","7f74bd40a1f82de833915085152910f3ebd525b356":"getTeam","7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e":"getResponseNote","7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1":"getTag","7fc6abb0838b6422ef7e81141fd6603883cd1990cf":"getDocument","7fc856fe5dd5f698d2f54dacf4280d447336780427":"getLanguage","7fcda0e6bf50febdf861015e25ebdf74068a488dde":"getContact","7fcfea9518c327899180b23cb3055005ba65cdef33":"getIntegration","7fdb06c584a2145e0f48be9ead409fc7f774731fde":"getEnvironment","7fdcbaf3445e783557d350b55d91be1398fafca7d3":"getInsight","7fe763f2c0d5f307cc75c26f23c693a54ac24a3112":"getProject","7ffb22c619704253744e9b5fea4eccca8b0808fb64":"getSegment"} */ 






















const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getActionClass = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (actionClassId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            actionClassId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const actionClass = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.actionClass.findUnique({
                where: {
                    id: actionClassId
                },
                select: {
                    environmentId: true
                }
            });
            return actionClass;
        } catch (error) {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(`Database error when fetching action`);
        }
    }, [
        `utils-getActionClass-${actionClassId}`
    ], {
        tags: [
            _formbricks_lib_actionClass_cache__WEBPACK_IMPORTED_MODULE_14__/* .actionClassCache */ .j.tag.byId(actionClassId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getApiKey = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (apiKeyId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            apiKeyId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZString */ .eI
        ]);
        if (!apiKeyId) {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .InvalidInputError */ .oC("API key cannot be null or undefined.");
        }
        try {
            const apiKeyData = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.apiKey.findUnique({
                where: {
                    id: apiKeyId
                },
                select: {
                    environmentId: true
                }
            });
            return apiKeyData;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getApiKey-${apiKeyId}`
    ], {
        tags: [
            _lib_cache_api_key__WEBPACK_IMPORTED_MODULE_2__/* .apiKeyCache */ .m.tag.byId(apiKeyId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getEnvironment = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (environmentId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            environmentId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const environment = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.environment.findUnique({
                where: {
                    id: environmentId
                },
                select: {
                    projectId: true
                }
            });
            return environment;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getEnvironment-${environmentId}`
    ], {
        tags: [
            _formbricks_lib_environment_cache__WEBPACK_IMPORTED_MODULE_15__/* .environmentCache */ .e.tag.byId(environmentId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getIntegration = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (integrationId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        try {
            const integration = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.integration.findUnique({
                where: {
                    id: integrationId
                },
                select: {
                    environmentId: true
                }
            });
            return integration;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getIntegration-${integrationId}`
    ], {
        tags: [
            _formbricks_lib_integration_cache__WEBPACK_IMPORTED_MODULE_16__/* .integrationCache */ .t.tag.byId(integrationId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getInvite = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (inviteId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            inviteId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZString */ .eI
        ]);
        try {
            const invite = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.invite.findUnique({
                where: {
                    id: inviteId
                },
                select: {
                    organizationId: true
                }
            });
            return invite;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getInvite-${inviteId}`
    ], {
        tags: [
            _lib_cache_invite__WEBPACK_IMPORTED_MODULE_4__/* .inviteCache */ .i.tag.byId(inviteId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getLanguage = async (languageId)=>{
    try {
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            languageId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        const language = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.language.findFirst({
            where: {
                id: languageId
            },
            select: {
                projectId: true
            }
        });
        if (!language) {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .ResourceNotFoundError */ .CE("Language", languageId);
        }
        return language;
    } catch (error) {
        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
        }
        throw error;
    }
};
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getProject = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (projectId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        try {
            const projectPrisma = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.project.findUnique({
                where: {
                    id: projectId
                },
                select: {
                    organizationId: true
                }
            });
            return projectPrisma;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getProject-${projectId}`
    ], {
        tags: [
            _formbricks_lib_project_cache__WEBPACK_IMPORTED_MODULE_17__/* .projectCache */ .E.tag.byId(projectId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getResponse = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (responseId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            responseId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const response = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.response.findUnique({
                where: {
                    id: responseId
                },
                select: {
                    surveyId: true
                }
            });
            return response;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getResponse-${responseId}`
    ], {
        tags: [
            _formbricks_lib_response_cache__WEBPACK_IMPORTED_MODULE_18__/* .responseCache */ .Q.tag.byId(responseId),
            _formbricks_lib_responseNote_cache__WEBPACK_IMPORTED_MODULE_19__/* .responseNoteCache */ .S.tag.byResponseId(responseId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getResponseNote = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (responseNoteId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        try {
            const responseNote = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.responseNote.findUnique({
                where: {
                    id: responseNoteId
                },
                select: {
                    responseId: true
                }
            });
            return responseNote;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getResponseNote-${responseNoteId}`
    ], {
        tags: [
            _formbricks_lib_responseNote_cache__WEBPACK_IMPORTED_MODULE_19__/* .responseNoteCache */ .S.tag.byId(responseNoteId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getSurvey = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (surveyId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            surveyId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const survey = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.survey.findUnique({
                where: {
                    id: surveyId
                },
                select: {
                    environmentId: true
                }
            });
            return survey;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getSurvey-${surveyId}`
    ], {
        tags: [
            _formbricks_lib_survey_cache__WEBPACK_IMPORTED_MODULE_20__/* .surveyCache */ .$.tag.byId(surveyId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getTag = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (id)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            id,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        const tag = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.tag.findUnique({
            where: {
                id
            },
            select: {
                environmentId: true
            }
        });
        return tag;
    }, [
        `utils-getTag-${id}`
    ], {
        tags: [
            _formbricks_lib_tag_cache__WEBPACK_IMPORTED_MODULE_21__/* .tagCache */ .J.tag.byId(id)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getWebhook = async (id)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            id,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const webhook = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.webhook.findUnique({
                where: {
                    id
                },
                select: {
                    environmentId: true
                }
            });
            return webhook;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getWebhook-${id}`
    ], {
        tags: [
            _lib_cache_webhook__WEBPACK_IMPORTED_MODULE_6__/* .webhookCache */ .Q.tag.byId(id)
        ]
    })();
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getTeam = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (teamId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            teamId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZString */ .eI
        ]);
        try {
            const team = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.team.findUnique({
                where: {
                    id: teamId
                },
                select: {
                    organizationId: true
                }
            });
            return team;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getTeam-${teamId}`
    ], {
        tags: [
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_5__/* .teamCache */ .g.tag.byId(teamId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getInsight = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (insightId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            insightId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const insight = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.insight.findUnique({
                where: {
                    id: insightId
                },
                select: {
                    environmentId: true
                }
            });
            return insight;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getInsight-${insightId}`
    ], {
        tags: [
            _formbricks_lib_tag_cache__WEBPACK_IMPORTED_MODULE_21__/* .tagCache */ .J.tag.byId(insightId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getDocument = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (documentId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            documentId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const document = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.document.findUnique({
                where: {
                    id: documentId
                },
                select: {
                    environmentId: true
                }
            });
            return document;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getDocument-${documentId}`
    ], {
        tags: [
            _formbricks_lib_tag_cache__WEBPACK_IMPORTED_MODULE_21__/* .tagCache */ .J.tag.byId(documentId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ isProjectPartOfOrganization = async (organizationId, projectId)=>{
    const project = await getProject(projectId);
    if (!project) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .ResourceNotFoundError */ .CE("Project", projectId);
    }
    return project.organizationId === organizationId;
};
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ isTeamPartOfOrganization = async (organizationId, teamId)=>{
    const team = await getTeam(teamId);
    if (!team) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .ResourceNotFoundError */ .CE("Team", teamId);
    }
    return team.organizationId === organizationId;
};
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getContact = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (contactId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            contactId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            return await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.contact.findUnique({
                where: {
                    id: contactId
                },
                select: {
                    environmentId: true
                }
            });
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getPerson-${contactId}`
    ], {
        tags: [
            _lib_cache_contact__WEBPACK_IMPORTED_MODULE_3__/* .contactCache */ .f.tag.byId(contactId)
        ]
    })());
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getSegment = (0,react__WEBPACK_IMPORTED_MODULE_8__.cache)(async (segmentId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_10__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_11__/* .validateInputs */ .C)([
            segmentId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_12__/* .ZId */ .i4
        ]);
        try {
            const segment = await _formbricks_database__WEBPACK_IMPORTED_MODULE_9__/* .prisma */ .z.segment.findUnique({
                where: {
                    id: segmentId
                },
                select: {
                    environmentId: true
                }
            });
            return segment;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_7__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_13__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `utils-getSegment-${segmentId}`
    ], {
        tags: [
            _formbricks_lib_cache_segment__WEBPACK_IMPORTED_MODULE_22__/* .segmentCache */ .C.tag.byId(segmentId)
        ]
    })());

(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_23__/* .ensureServerEntryExports */ .D)([
    getActionClass,
    getApiKey,
    getEnvironment,
    getIntegration,
    getInvite,
    getLanguage,
    getProject,
    getResponse,
    getResponseNote,
    getSurvey,
    getTag,
    getWebhook,
    getTeam,
    getInsight,
    getDocument,
    isProjectPartOfOrganization,
    isTeamPartOfOrganization,
    getContact,
    getSegment
]);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getActionClass, "7f60061b4b6be335eaa2facd1c5d8129b87f6923f4", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getApiKey, "7f670a0537f96de8b5156e1b206124b2a990484370", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getEnvironment, "7fdb06c584a2145e0f48be9ead409fc7f774731fde", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getIntegration, "7fcfea9518c327899180b23cb3055005ba65cdef33", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getInvite, "7f540889be00b7aa8c6ff1edc5cd79ece876954fd3", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getLanguage, "7fc856fe5dd5f698d2f54dacf4280d447336780427", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getProject, "7fe763f2c0d5f307cc75c26f23c693a54ac24a3112", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getResponse, "7f11f2efac37ac84796e6cb223722dbe2e808e177f", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getResponseNote, "7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getSurvey, "7f12957c3365cc2950bdc48f0118f82439eb6c23ec", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getTag, "7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getWebhook, "7f4f2c9c8b657cf906e9a25e65dafac6ec65967916", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getTeam, "7f74bd40a1f82de833915085152910f3ebd525b356", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getInsight, "7fdcbaf3445e783557d350b55d91be1398fafca7d3", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getDocument, "7fc6abb0838b6422ef7e81141fd6603883cd1990cf", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(isProjectPartOfOrganization, "7f36cf02b548a01d85112f587591e8c1e8390fa538", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(isTeamPartOfOrganization, "7f20db167926d501ff62b9525526548773c8a436d4", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getContact, "7fcda0e6bf50febdf861015e25ebdf74068a488dde", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getSegment, "7ffb22c619704253744e9b5fea4eccca8b0808fb64", null);


/***/ }),

/***/ 725322:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  KH: () => (/* binding */ getIsAIEnabled),
  dZ: () => (/* binding */ getIsContactsEnabled),
  pn: () => (/* binding */ getIsMultiOrgEnabled),
  PN: () => (/* binding */ getIsOrganizationAIReady),
  LO: () => (/* binding */ getIsTwoFactorAuthEnabled),
  x: () => (/* binding */ getMultiLanguagePermission),
  Df: () => (/* binding */ getOrganizationProjectsLimit),
  tr: () => (/* binding */ getRemoveBrandingPermission),
  rQ: () => (/* binding */ getRoleManagementPermission),
  nX: () => (/* binding */ getWhiteLabelPermission)
});

// UNUSED EXPORTS: fetchLicense, getBiggerUploadFileSizePermission, getEnterpriseLicense, getIsSSOEnabled, getLicenseFeatures

// EXTERNAL MODULE: ../../node_modules/https-proxy-agent/dist/index.js
var dist = __webpack_require__(876930);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/server.js
var server = __webpack_require__(995971);
// EXTERNAL MODULE: ./node_modules/node-fetch/src/index.js + 12 modules
var src = __webpack_require__(11886);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js
var react = __webpack_require__(645625);
// EXTERNAL MODULE: ../../packages/database/src/index.ts + 1 modules
var database_src = __webpack_require__(482859);
// EXTERNAL MODULE: ../../packages/lib/cache.ts
var cache = __webpack_require__(48165);
// EXTERNAL MODULE: ../../node_modules/next/cache.js
var next_cache = __webpack_require__(310256);
// EXTERNAL MODULE: ../../packages/lib/constants.ts
var constants = __webpack_require__(711344);
// EXTERNAL MODULE: ../../packages/lib/env.ts
var env = __webpack_require__(333258);
// EXTERNAL MODULE: external "crypto"
var external_crypto_ = __webpack_require__(455511);
var external_crypto_default = /*#__PURE__*/__webpack_require__.n(external_crypto_);
;// ../../packages/lib/hashString.ts

const hashString = (string)=>{
    return external_crypto_default().createHash("sha256").update(string).digest("hex");
};

;// ./modules/ee/license-check/lib/utils.ts










const hashedKey = constants/* ENTERPRISE_LICENSE_KEY */.an ? hashString(constants/* ENTERPRISE_LICENSE_KEY */.an) : undefined;
const PREVIOUS_RESULTS_CACHE_TAG_KEY = `getPreviousResult-${hashedKey}`;
// This function is used to get the previous result of the license check from the cache
// This might seem confusing at first since we only return the default value from this function,
// but since we are using a cache and the cache key is the same, the cache will return the previous result - so this function acts as a cache getter
const getPreviousResult = ()=>(0,cache/* cache */.P)(async ()=>({
            active: null,
            lastChecked: new Date(0),
            features: null
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
// This function is used to set the previous result of the license check to the cache so that we can use it in the next call
// Uses the same cache key as the getPreviousResult function
const setPreviousResult = async (previousResult)=>{
    const { lastChecked, active, features } = previousResult;
    await (0,cache/* cache */.P)(async ()=>({
            active,
            lastChecked,
            features
        }), [
        PREVIOUS_RESULTS_CACHE_TAG_KEY
    ], {
        tags: [
            PREVIOUS_RESULTS_CACHE_TAG_KEY
        ]
    })();
    (0,server.after)(()=>{
        (0,next_cache.revalidateTag)(PREVIOUS_RESULTS_CACHE_TAG_KEY);
    });
};
const fetchLicenseForE2ETesting = async ()=>{
    const currentTime = new Date();
    try {
        const previousResult = await getPreviousResult();
        if (previousResult.lastChecked.getTime() === new Date(0).getTime()) {
            // first call
            const newResult = {
                active: true,
                features: {
                    isMultiOrgEnabled: true,
                    twoFactorAuth: true,
                    sso: true,
                    contacts: true,
                    projects: 3,
                    whitelabel: true,
                    removeBranding: true,
                    ai: true
                },
                lastChecked: currentTime
            };
            await setPreviousResult(newResult);
            return newResult;
        } else if (currentTime.getTime() - previousResult.lastChecked.getTime() > 60 * 60 * 1000) {
            // Fail after 1 hour
            console.log("E2E_TESTING is enabled. Enterprise license was revoked after 1 hour.");
            return null;
        }
        return previousResult;
    } catch (error) {
        console.error("Error fetching license: ", error);
        return null;
    }
};
const getEnterpriseLicense = async ()=>{
    if (!constants/* ENTERPRISE_LICENSE_KEY */.an || constants/* ENTERPRISE_LICENSE_KEY */.an.length === 0) {
        return {
            active: false,
            features: null,
            lastChecked: new Date()
        };
    }
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return {
            active: previousResult?.active ?? false,
            features: previousResult ? previousResult.features : null,
            lastChecked: previousResult ? previousResult.lastChecked : new Date()
        };
    }
    // if the server responds with a boolean, we return it
    // if the server errors, we return null
    // null signifies an error
    const license = await fetchLicense();
    const isValid = license ? license.status === "active" : null;
    const threeDaysInMillis = 3 * 24 * 60 * 60 * 1000;
    const currentTime = new Date();
    const previousResult = await getPreviousResult();
    // Case: First time checking license and the server errors out
    if (previousResult.active === null) {
        if (isValid === null) {
            const newResult = {
                active: false,
                features: {
                    isMultiOrgEnabled: false,
                    projects: 3,
                    twoFactorAuth: false,
                    sso: false,
                    whitelabel: false,
                    removeBranding: false,
                    contacts: false,
                    ai: false
                },
                lastChecked: new Date()
            };
            await setPreviousResult(newResult);
            return newResult;
        }
    }
    if (isValid !== null && license) {
        const newResult = {
            active: isValid,
            features: license.features,
            lastChecked: new Date()
        };
        await setPreviousResult(newResult);
        return newResult;
    } else {
        // if result is undefined -> error
        // if the last check was less than 72 hours, return the previous value:
        const elapsedTime = currentTime.getTime() - previousResult.lastChecked.getTime();
        if (elapsedTime < threeDaysInMillis) {
            return {
                active: previousResult.active !== null ? previousResult.active : false,
                features: previousResult.features,
                lastChecked: previousResult.lastChecked,
                isPendingDowngrade: true
            };
        }
        // Log error only after 72 hours
        console.error("Error while checking license: The license check failed");
        return {
            active: false,
            features: null,
            lastChecked: previousResult.lastChecked,
            isPendingDowngrade: true
        };
    }
};
const getLicenseFeatures = async ()=>{
    const previousResult = await getPreviousResult();
    if (previousResult.features) {
        return previousResult.features;
    } else {
        const license = await fetchLicense();
        if (!license || !license.features) return null;
        return license.features;
    }
};
const fetchLicense = (0,react.cache)(async ()=>(0,cache/* cache */.P)(async ()=>{
        if (!env/* env */._.ENTERPRISE_LICENSE_KEY) return null;
        try {
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 1); // January 1st of the current year
            const endOfYear = new Date(now.getFullYear() + 1, 0, 0); // December 31st of the current year
            const responseCount = await database_src/* prisma */.z.response.count({
                where: {
                    createdAt: {
                        gte: startOfYear,
                        lt: endOfYear
                    }
                }
            });
            const proxyUrl = env/* env */._.HTTPS_PROXY || env/* env */._.HTTP_PROXY;
            const agent = proxyUrl ? new dist.HttpsProxyAgent(proxyUrl) : undefined;
            const res = await (0,src/* default */.Ay)("https://ee.formbricks.com/api/licenses/check", {
                body: JSON.stringify({
                    licenseKey: constants/* ENTERPRISE_LICENSE_KEY */.an,
                    usage: {
                        responseCount: responseCount
                    }
                }),
                headers: {
                    "Content-Type": "application/json"
                },
                method: "POST",
                agent
            });
            if (res.ok) {
                const responseJson = await res.json();
                return responseJson.data;
            }
            return null;
        } catch (error) {
            console.error("Error while checking license: ", error);
            return null;
        }
    }, [
        `fetchLicense-${hashedKey}`
    ], {
        revalidate: 60 * 60 * 24
    })());
const getRemoveBrandingPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.removeBranding ?? false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.removeBranding;
    }
};
const getWhiteLabelPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult?.features?.whitelabel ?? false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        return organization.billing.plan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) return false;
        return licenseFeatures.whitelabel;
    }
};
const getRoleManagementPermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getBiggerUploadFileSizePermission = async (organization)=>{
    if (IS_FORMBRICKS_CLOUD) return organization.billing.plan !== PROJECT_FEATURE_KEYS.FREE;
    else if (!IS_FORMBRICKS_CLOUD) return (await getEnterpriseLicense()).active;
    return false;
};
const getMultiLanguagePermission = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.active !== null ? previousResult.active : false;
    }
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) return organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.SCALE || organization.billing.plan === constants/* PROJECT_FEATURE_KEYS */.mu.ENTERPRISE;
    else if (!constants/* IS_FORMBRICKS_CLOUD */.Si) return (await getEnterpriseLicense()).active;
    return false;
};
const getIsMultiOrgEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.isMultiOrgEnabled : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.isMultiOrgEnabled;
};
const getIsContactsEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.contacts : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.contacts;
};
const getIsTwoFactorAuthEnabled = async ()=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.twoFactorAuth : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.twoFactorAuth;
};
const getIsSSOEnabled = async ()=>{
    if (E2E_TESTING) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.sso : false;
    }
    const licenseFeatures = await getLicenseFeatures();
    if (!licenseFeatures) return false;
    return licenseFeatures.sso;
};
const getIsOrganizationAIReady = async (billingPlan)=>{
    if (!constants/* IS_AI_CONFIGURED */.T1) return false;
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.ai : false;
    }
    const license = await getEnterpriseLicense();
    if (constants/* IS_FORMBRICKS_CLOUD */.Si) {
        return Boolean(license.features?.ai && billingPlan !== constants/* PROJECT_FEATURE_KEYS */.mu.FREE);
    }
    return Boolean(license.features?.ai);
};
const getIsAIEnabled = async (organization)=>{
    return organization.isAIEnabled && await getIsOrganizationAIReady(organization.billing.plan);
};
const getOrganizationProjectsLimit = async (organization)=>{
    if (constants/* E2E_TESTING */.oA) {
        const previousResult = await fetchLicenseForE2ETesting();
        return previousResult && previousResult.features ? previousResult.features.projects ?? Infinity : 3;
    }
    let limit;
    if (constants/* IS_FORMBRICKS_CLOUD */.Si && (await getEnterpriseLicense()).active) {
        limit = organization.billing.limits.projects ?? Infinity;
    } else {
        const licenseFeatures = await getLicenseFeatures();
        if (!licenseFeatures) {
            limit = 3;
        } else {
            limit = licenseFeatures.projects ?? Infinity;
        }
    }
    return limit;
};


/***/ }),

/***/ 280612:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  F8: () => (/* binding */ checkMultiLanguagePermission),
  NA: () => (/* binding */ createLanguageAction),
  GX: () => (/* binding */ deleteLanguageAction),
  r2: () => (/* binding */ getSurveysUsingGivenLanguageAction),
  yE: () => (/* binding */ updateLanguageAction)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js
var server_reference = __webpack_require__(286055);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/app-render/encryption.js
var encryption = __webpack_require__(770767);
// EXTERNAL MODULE: ./lib/utils/action-client.ts
var action_client = __webpack_require__(308046);
// EXTERNAL MODULE: ./lib/utils/action-client-middleware.ts
var action_client_middleware = __webpack_require__(729455);
// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(440388);
// EXTERNAL MODULE: ./modules/ee/license-check/lib/utils.ts + 1 modules
var utils = __webpack_require__(725322);
// EXTERNAL MODULE: ../../node_modules/zod/lib/index.mjs
var lib = __webpack_require__(283131);
// EXTERNAL MODULE: external "@prisma/client"
var client_ = __webpack_require__(896330);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js
var react = __webpack_require__(645625);
// EXTERNAL MODULE: ../../packages/database/src/index.ts + 1 modules
var src = __webpack_require__(482859);
// EXTERNAL MODULE: ../../packages/types/common.ts
var common = __webpack_require__(552224);
// EXTERNAL MODULE: ../../packages/types/errors.ts
var errors = __webpack_require__(207798);
// EXTERNAL MODULE: ../../packages/types/project.ts
var types_project = __webpack_require__(773518);
// EXTERNAL MODULE: ../../packages/lib/project/cache.ts
var cache = __webpack_require__(595111);
// EXTERNAL MODULE: ../../packages/lib/project/service.ts
var service = __webpack_require__(28492);
// EXTERNAL MODULE: ../../packages/lib/survey/cache.ts
var survey_cache = __webpack_require__(710528);
// EXTERNAL MODULE: ../../packages/lib/utils/validate.ts
var validate = __webpack_require__(472749);
;// ../../packages/lib/language/service.ts










const languageSelect = {
    id: true,
    code: true,
    alias: true,
    projectId: true,
    createdAt: true,
    updatedAt: true
};
const getLanguage = async (languageId)=>{
    try {
        validateInputs([
            languageId,
            ZId
        ]);
        const language = await prisma.language.findFirst({
            where: {
                id: languageId
            },
            select: {
                ...languageSelect,
                projectId: true
            }
        });
        if (!language) {
            throw new ResourceNotFoundError("Language", languageId);
        }
        return language;
    } catch (error) {
        if (error instanceof Prisma.PrismaClientKnownRequestError) {
            console.error(error);
            throw new DatabaseError(error.message);
        }
        throw error;
    }
};
const createLanguage = async (projectId, languageInput)=>{
    try {
        (0,validate/* validateInputs */.C)([
            projectId,
            common/* ZId */.i4
        ], [
            languageInput,
            types_project/* ZLanguageInput */.DP
        ]);
        const project = await (0,service/* getProject */.U1)(projectId);
        if (!project) throw new errors/* ResourceNotFoundError */.CE("Project not found", projectId);
        if (!languageInput.code) {
            throw new errors/* ValidationError */.yI("Language code is required");
        }
        const language = await src/* prisma */.z.language.create({
            data: {
                ...languageInput,
                project: {
                    connect: {
                        id: projectId
                    }
                }
            },
            select: languageSelect
        });
        project.environments.forEach((environment)=>{
            cache/* projectCache */.E.revalidate({
                environmentId: environment.id
            });
        });
        return language;
    } catch (error) {
        if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
            console.error(error);
            throw new errors/* DatabaseError */.a$(error.message);
        }
        throw error;
    }
};
const getSurveysUsingGivenLanguage = (0,react.cache)(async (languageId)=>{
    try {
        // Check if the language is used in any survey
        const surveys = await src/* prisma */.z.surveyLanguage.findMany({
            where: {
                languageId: languageId
            },
            select: {
                survey: {
                    select: {
                        name: true
                    }
                }
            }
        });
        // Extracting survey names
        const surveyNames = surveys.map((s)=>s.survey.name);
        return surveyNames;
    } catch (error) {
        if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
            console.error(error);
            throw new errors/* DatabaseError */.a$(error.message);
        }
        throw error;
    }
});
const deleteLanguage = async (languageId, projectId)=>{
    try {
        (0,validate/* validateInputs */.C)([
            languageId,
            common/* ZId */.i4
        ], [
            projectId,
            common/* ZId */.i4
        ]);
        const project = await (0,service/* getProject */.U1)(projectId);
        if (!project) throw new errors/* ResourceNotFoundError */.CE("Project not found", projectId);
        const prismaLanguage = await src/* prisma */.z.language.delete({
            where: {
                id: languageId
            },
            select: {
                ...languageSelect,
                surveyLanguages: {
                    select: {
                        surveyId: true
                    }
                }
            }
        });
        project.environments.forEach((environment)=>{
            cache/* projectCache */.E.revalidate({
                id: prismaLanguage.projectId,
                environmentId: environment.id
            });
        });
        // delete unused surveyLanguages
        const language = {
            ...prismaLanguage,
            surveyLanguages: undefined
        };
        return language;
    } catch (error) {
        if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
            console.error(error);
            throw new errors/* DatabaseError */.a$(error.message);
        }
        throw error;
    }
};
const updateLanguage = async (projectId, languageId, languageInput)=>{
    try {
        (0,validate/* validateInputs */.C)([
            languageId,
            common/* ZId */.i4
        ], [
            languageInput,
            types_project/* ZLanguageUpdate */.Io
        ], [
            projectId,
            common/* ZId */.i4
        ]);
        const project = await (0,service/* getProject */.U1)(projectId);
        if (!project) throw new errors/* ResourceNotFoundError */.CE("Project not found", projectId);
        const prismaLanguage = await src/* prisma */.z.language.update({
            where: {
                id: languageId
            },
            data: {
                ...languageInput,
                updatedAt: new Date()
            },
            select: {
                ...languageSelect,
                surveyLanguages: {
                    select: {
                        surveyId: true
                    }
                }
            }
        });
        project.environments.forEach((environment)=>{
            cache/* projectCache */.E.revalidate({
                id: prismaLanguage.projectId,
                environmentId: environment.id
            });
            survey_cache/* surveyCache */.$.revalidate({
                environmentId: environment.id
            });
        });
        // revalidate cache of all connected surveys
        prismaLanguage.surveyLanguages.forEach((surveyLanguage)=>{
            survey_cache/* surveyCache */.$.revalidate({
                id: surveyLanguage.surveyId
            });
        });
        // delete unused surveyLanguages
        const language = {
            ...prismaLanguage,
            surveyLanguages: undefined
        };
        return language;
    } catch (error) {
        if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
            console.error(error);
            throw new errors/* DatabaseError */.a$(error.message);
        }
        throw error;
    }
};

// EXTERNAL MODULE: ../../packages/lib/organization/service.ts
var organization_service = __webpack_require__(167440);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js
var action_validate = __webpack_require__(429931);
;// ./modules/ee/multi-language-surveys/lib/actions.ts
/* __next_internal_action_entry_do_not_use__ {"7f3ebbecf8a294a6cc7639d9e61cc0217a977ee8d8":"createLanguageAction","7f547ea6b15b116a71ee21ed4d4b573d0f6326a3fe":"getSurveysUsingGivenLanguageAction","7f57d1747f6e09fffee26feb95a4076239973f57e4":"deleteLanguageAction","7f92f93083583537bb80ae660771e6bbc02cb356c0":"checkMultiLanguagePermission","7fde8a1c3557824f9bc1d8436ea91b5ae9fbfb0e4a":"updateLanguageAction"} */ 











const ZCreateLanguageAction = lib.z.object({
    projectId: common/* ZId */.i4,
    languageInput: types_project/* ZLanguageInput */.DP
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ checkMultiLanguagePermission = async (organizationId)=>{
    const organization = await (0,organization_service/* getOrganization */.SA)(organizationId);
    if (!organization) {
        throw new errors/* ResourceNotFoundError */.CE("Organization", organizationId);
    }
    const isMultiLanguageAllowed = await (0,utils/* getMultiLanguagePermission */.x)(organization);
    if (!isMultiLanguageAllowed) {
        throw new errors/* OperationNotAllowedError */.J4("Multi language is not allowed for this organization");
    }
};
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ createLanguageAction = action_client/* authenticatedActionClient */.D.schema(ZCreateLanguageAction).action(async ({ ctx, parsedInput })=>{
    const organizationId = await (0,helper/* getOrganizationIdFromProjectId */.x7)(parsedInput.projectId);
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: ctx.user.id,
        organizationId,
        access: [
            {
                type: "organization",
                schema: types_project/* ZLanguageInput */.DP,
                data: parsedInput.languageInput,
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                projectId: parsedInput.projectId,
                minPermission: "manage"
            }
        ]
    });
    await checkMultiLanguagePermission(organizationId);
    return await createLanguage(parsedInput.projectId, parsedInput.languageInput);
});
const ZDeleteLanguageAction = lib.z.object({
    languageId: common/* ZId */.i4,
    projectId: common/* ZId */.i4
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ deleteLanguageAction = action_client/* authenticatedActionClient */.D.schema(ZDeleteLanguageAction).action(async ({ ctx, parsedInput })=>{
    const languageProjectId = await (0,helper/* getProjectIdFromLanguageId */.GT)(parsedInput.languageId);
    if (languageProjectId !== parsedInput.projectId) {
        throw new Error("Invalid language id");
    }
    const organizationId = await (0,helper/* getOrganizationIdFromProjectId */.x7)(parsedInput.projectId);
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: ctx.user.id,
        organizationId,
        access: [
            {
                type: "organization",
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                projectId: parsedInput.projectId,
                minPermission: "manage"
            }
        ]
    });
    await checkMultiLanguagePermission(organizationId);
    return await deleteLanguage(parsedInput.languageId, parsedInput.projectId);
});
const ZGetSurveysUsingGivenLanguageAction = lib.z.object({
    languageId: common/* ZId */.i4
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getSurveysUsingGivenLanguageAction = action_client/* authenticatedActionClient */.D.schema(ZGetSurveysUsingGivenLanguageAction).action(async ({ ctx, parsedInput })=>{
    const organizationId = await (0,helper/* getOrganizationIdFromLanguageId */.O$)(parsedInput.languageId);
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: ctx.user.id,
        organizationId,
        access: [
            {
                type: "organization",
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                projectId: await (0,helper/* getProjectIdFromLanguageId */.GT)(parsedInput.languageId),
                minPermission: "manage"
            }
        ]
    });
    await checkMultiLanguagePermission(organizationId);
    return await getSurveysUsingGivenLanguage(parsedInput.languageId);
});
const ZUpdateLanguageAction = lib.z.object({
    projectId: common/* ZId */.i4,
    languageId: common/* ZId */.i4,
    languageInput: types_project/* ZLanguageInput */.DP
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ updateLanguageAction = action_client/* authenticatedActionClient */.D.schema(ZUpdateLanguageAction).action(async ({ ctx, parsedInput })=>{
    const languageProductId = await (0,helper/* getProjectIdFromLanguageId */.GT)(parsedInput.languageId);
    if (languageProductId !== parsedInput.projectId) {
        throw new Error("Invalid language id");
    }
    const organizationId = await (0,helper/* getOrganizationIdFromProjectId */.x7)(parsedInput.projectId);
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: ctx.user.id,
        organizationId,
        access: [
            {
                type: "organization",
                schema: types_project/* ZLanguageInput */.DP,
                data: parsedInput.languageInput,
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                projectId: parsedInput.projectId,
                minPermission: "manage"
            }
        ]
    });
    await checkMultiLanguagePermission(organizationId);
    return await updateLanguage(parsedInput.projectId, parsedInput.languageId, parsedInput.languageInput);
});

(0,action_validate/* ensureServerEntryExports */.D)([
    checkMultiLanguagePermission,
    createLanguageAction,
    deleteLanguageAction,
    getSurveysUsingGivenLanguageAction,
    updateLanguageAction
]);
(0,server_reference/* registerServerReference */.A)(checkMultiLanguagePermission, "7f92f93083583537bb80ae660771e6bbc02cb356c0", null);
(0,server_reference/* registerServerReference */.A)(createLanguageAction, "7f3ebbecf8a294a6cc7639d9e61cc0217a977ee8d8", null);
(0,server_reference/* registerServerReference */.A)(deleteLanguageAction, "7f57d1747f6e09fffee26feb95a4076239973f57e4", null);
(0,server_reference/* registerServerReference */.A)(getSurveysUsingGivenLanguageAction, "7f547ea6b15b116a71ee21ed4d4b573d0f6326a3fe", null);
(0,server_reference/* registerServerReference */.A)(updateLanguageAction, "7fde8a1c3557824f9bc1d8436ea91b5ae9fbfb0e4a", null);


/***/ }),

/***/ 562147:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _: () => (/* binding */ getProjectPermissionByUserId),
/* harmony export */   b: () => (/* binding */ getTeamRoleByTeamIdUserId)
/* harmony export */ });
/* harmony import */ var _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(753304);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(896330);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(645625);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _formbricks_database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(482859);
/* harmony import */ var _formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(48165);
/* harmony import */ var _formbricks_lib_membership_cache__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(920318);
/* harmony import */ var _formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(472749);
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(552224);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(207798);










const getProjectPermissionByUserId = (0,react__WEBPACK_IMPORTED_MODULE_2__.cache)(async (userId, projectId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_4__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_5__/* .validateInputs */ .C)([
            userId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZString */ .eI
        ], [
            projectId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZString */ .eI
        ]);
        try {
            const projectMemberships = await _formbricks_database__WEBPACK_IMPORTED_MODULE_3__/* .prisma */ .z.projectTeam.findMany({
                where: {
                    projectId,
                    team: {
                        teamUsers: {
                            some: {
                                userId
                            }
                        }
                    }
                }
            });
            if (!projectMemberships) return null;
            let highestPermission = null;
            for (const membership of projectMemberships){
                if (membership.permission === "manage") {
                    highestPermission = "manage";
                } else if (membership.permission === "readWrite" && highestPermission !== "manage") {
                    highestPermission = "readWrite";
                } else if (membership.permission === "read" && highestPermission !== "manage" && highestPermission !== "readWrite") {
                    highestPermission = "read";
                }
            }
            return highestPermission;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.PrismaClientKnownRequestError) {
                console.error(error);
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__/* .DatabaseError */ .a$(error.message);
            }
            throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__/* .UnknownError */ .Bk("Error while fetching membership");
        }
    }, [
        `getProjectPermissionByUserId-${userId}-${projectId}`
    ], {
        tags: [
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__/* .teamCache */ .g.tag.byUserId(userId),
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__/* .teamCache */ .g.tag.byProjectId(projectId)
        ]
    })());
const getTeamRoleByTeamIdUserId = (0,react__WEBPACK_IMPORTED_MODULE_2__.cache)(async (teamId, userId)=>(0,_formbricks_lib_cache__WEBPACK_IMPORTED_MODULE_4__/* .cache */ .P)(async ()=>{
        (0,_formbricks_lib_utils_validate__WEBPACK_IMPORTED_MODULE_5__/* .validateInputs */ .C)([
            teamId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZId */ .i4
        ], [
            userId,
            _formbricks_types_common__WEBPACK_IMPORTED_MODULE_6__/* .ZId */ .i4
        ]);
        try {
            const teamUser = await _formbricks_database__WEBPACK_IMPORTED_MODULE_3__/* .prisma */ .z.teamUser.findUnique({
                where: {
                    teamId_userId: {
                        teamId,
                        userId
                    }
                }
            });
            if (!teamUser) {
                return null;
            }
            return teamUser.role;
        } catch (error) {
            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.PrismaClientKnownRequestError) {
                throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_7__/* .DatabaseError */ .a$(error.message);
            }
            throw error;
        }
    }, [
        `getTeamMembershipByTeamIdUserId-${teamId}-${userId}`
    ], {
        tags: [
            _lib_cache_team__WEBPACK_IMPORTED_MODULE_0__/* .teamCache */ .g.tag.byId(teamId),
            _formbricks_lib_membership_cache__WEBPACK_IMPORTED_MODULE_8__/* .membershipCache */ .r.tag.byUserId(userId)
        ]
    })());


/***/ }),

/***/ 431751:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ getSurveyFollowUpsPermission)
/* harmony export */ });
/* harmony import */ var _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(711344);

const getSurveyFollowUpsPermission = async (organization)=>{
    if (_formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_0__/* .IS_FORMBRICKS_CLOUD */ .Si) return organization.billing.plan !== _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_0__/* .PROJECT_FEATURE_KEYS */ .mu.FREE;
    return true;
};


/***/ }),

/***/ 590997:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ createSurveyAction)
/* harmony export */ });
/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(286055);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(770767);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _lib_utils_action_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(308046);
/* harmony import */ var _lib_utils_action_client_middleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(729455);
/* harmony import */ var _lib_utils_helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(440388);
/* harmony import */ var _modules_ee_multi_language_surveys_lib_actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(280612);
/* harmony import */ var _modules_survey_follow_ups_lib_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(431751);
/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(283131);
/* harmony import */ var _formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(167440);
/* harmony import */ var _formbricks_lib_survey_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(939483);
/* harmony import */ var _formbricks_types_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(552224);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(207798);
/* harmony import */ var _formbricks_types_surveys_types__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(797175);
/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(429931);
/* __next_internal_action_entry_do_not_use__ {"7ff20090763891981ab1625ad83b771c8ef93748aa":"createSurveyAction"} */ 












const ZCreateSurveyAction = zod__WEBPACK_IMPORTED_MODULE_6__.z.object({
    environmentId: _formbricks_types_common__WEBPACK_IMPORTED_MODULE_7__/* .ZId */ .i4,
    surveyBody: _formbricks_types_surveys_types__WEBPACK_IMPORTED_MODULE_8__/* .ZSurveyCreateInput */ .Nm
});
/**
 * Checks if survey follow-ups are enabled for the given organization.
 *
 * @param { string } organizationId  The ID of the organization to check.
 * @returns { Promise<void> }  A promise that resolves if the permission is granted.
 * @throws { ResourceNotFoundError }  If the organization is not found.
 * @throws { OperationNotAllowedError }  If survey follow-ups are not enabled for the organization.
 */ const checkSurveyFollowUpsPermission = async (organizationId)=>{
    const organization = await (0,_formbricks_lib_organization_service__WEBPACK_IMPORTED_MODULE_9__/* .getOrganization */ .SA)(organizationId);
    if (!organization) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_10__/* .ResourceNotFoundError */ .CE("Organization not found", organizationId);
    }
    const isSurveyFollowUpsEnabled = await (0,_modules_survey_follow_ups_lib_utils__WEBPACK_IMPORTED_MODULE_11__/* .getSurveyFollowUpsPermission */ .T)(organization);
    if (!isSurveyFollowUpsEnabled) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_10__/* .OperationNotAllowedError */ .J4("Survey follow ups are not enabled for this organization");
    }
};
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ createSurveyAction = _lib_utils_action_client__WEBPACK_IMPORTED_MODULE_2__/* .authenticatedActionClient */ .D.schema(ZCreateSurveyAction).action(async ({ ctx, parsedInput })=>{
    const organizationId = await (0,_lib_utils_helper__WEBPACK_IMPORTED_MODULE_4__/* .getOrganizationIdFromEnvironmentId */ .X_)(parsedInput.environmentId);
    await (0,_lib_utils_action_client_middleware__WEBPACK_IMPORTED_MODULE_3__/* .checkAuthorizationUpdated */ .r)({
        userId: ctx.user.id,
        organizationId,
        access: [
            {
                type: "organization",
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                minPermission: "readWrite",
                projectId: await (0,_lib_utils_helper__WEBPACK_IMPORTED_MODULE_4__/* .getProjectIdFromEnvironmentId */ .DU)(parsedInput.environmentId)
            }
        ]
    });
    if (parsedInput.surveyBody.followUps?.length) {
        await checkSurveyFollowUpsPermission(organizationId);
    }
    if (parsedInput.surveyBody.languages?.length) {
        await (0,_modules_ee_multi_language_surveys_lib_actions__WEBPACK_IMPORTED_MODULE_5__/* .checkMultiLanguagePermission */ .F8)(organizationId);
    }
    return await (0,_formbricks_lib_survey_service__WEBPACK_IMPORTED_MODULE_12__/* .createSurvey */ .th)(parsedInput.environmentId, parsedInput.surveyBody);
});

(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_13__/* .ensureServerEntryExports */ .D)([
    createSurveyAction
]);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(createSurveyAction, "7ff20090763891981ab1625ad83b771c8ef93748aa", null);


/***/ }),

/***/ 7262:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
var __webpack_unused_export__;
// This function ensures that all the exported values are valid server actions,
// during the runtime. By definition all actions are required to be async
// functions, but here we can only check that they are functions.

__webpack_unused_export__ = ({
    value: true
});
Object.defineProperty(exports, "D", ({
    enumerable: true,
    get: function() {
        return ensureServerEntryExports;
    }
}));
function ensureServerEntryExports(actions) {
    for(let i = 0; i < actions.length; i++){
        const action = actions[i];
        if (typeof action !== 'function') {
            throw new Error(`A "use server" file can only export async functions, found ${typeof action}.\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`);
        }
    }
} //# sourceMappingURL=action-validate.js.map


/***/ }),

/***/ 910330:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var __webpack_unused_export__;
/* eslint-disable import/no-extraneous-dependencies */ 
__webpack_unused_export__ = ({
    value: true
});
Object.defineProperty(exports, "A", ({
    enumerable: true,
    get: function() {
        return _serveredge.registerServerReference;
    }
}));
const _serveredge = __webpack_require__(672771);

//# sourceMappingURL=server-reference.js.map

/***/ }),

/***/ 438658:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
0 && (0);
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    arrayBufferToString: function() {
        return arrayBufferToString;
    },
    decrypt: function() {
        return decrypt;
    },
    encrypt: function() {
        return encrypt;
    },
    getActionEncryptionKey: function() {
        return getActionEncryptionKey;
    },
    getClientReferenceManifestForRsc: function() {
        return getClientReferenceManifestForRsc;
    },
    getServerModuleMap: function() {
        return getServerModuleMap;
    },
    setReferenceManifestsSingleton: function() {
        return setReferenceManifestsSingleton;
    },
    stringToUint8Array: function() {
        return stringToUint8Array;
    }
});
const _invarianterror = __webpack_require__(260233);
const _apppaths = __webpack_require__(789322);
const _workasyncstorageexternal = __webpack_require__(529294);
let __next_loaded_action_key;
function arrayBufferToString(buffer) {
    const bytes = new Uint8Array(buffer);
    const len = bytes.byteLength;
    // @anonrig: V8 has a limit of 65535 arguments in a function.
    // For len < 65535, this is faster.
    // https://github.com/vercel/next.js/pull/56377#pullrequestreview-1656181623
    if (len < 65535) {
        return String.fromCharCode.apply(null, bytes);
    }
    let binary = '';
    for(let i = 0; i < len; i++){
        binary += String.fromCharCode(bytes[i]);
    }
    return binary;
}
function stringToUint8Array(binary) {
    const len = binary.length;
    const arr = new Uint8Array(len);
    for(let i = 0; i < len; i++){
        arr[i] = binary.charCodeAt(i);
    }
    return arr;
}
function encrypt(key, iv, data) {
    return crypto.subtle.encrypt({
        name: 'AES-GCM',
        iv
    }, key, data);
}
function decrypt(key, iv, data) {
    return crypto.subtle.decrypt({
        name: 'AES-GCM',
        iv
    }, key, data);
}
// This is a global singleton that is used to encode/decode the action bound args from
// the closure. This can't be using a AsyncLocalStorage as it might happen on the module
// level. Since the client reference manifest won't be mutated, let's use a global singleton
// to keep it.
const SERVER_ACTION_MANIFESTS_SINGLETON = Symbol.for('next.server.action-manifests');
function setReferenceManifestsSingleton({ page, clientReferenceManifest, serverActionsManifest, serverModuleMap }) {
    var _globalThis_SERVER_ACTION_MANIFESTS_SINGLETON;
    // @ts-expect-error
    const clientReferenceManifestsPerPage = (_globalThis_SERVER_ACTION_MANIFESTS_SINGLETON = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON]) == null ? void 0 : _globalThis_SERVER_ACTION_MANIFESTS_SINGLETON.clientReferenceManifestsPerPage;
    // @ts-expect-error
    globalThis[SERVER_ACTION_MANIFESTS_SINGLETON] = {
        clientReferenceManifestsPerPage: {
            ...clientReferenceManifestsPerPage,
            [(0, _apppaths.normalizeAppPath)(page)]: clientReferenceManifest
        },
        serverActionsManifest,
        serverModuleMap
    };
}
function getServerModuleMap() {
    const serverActionsManifestSingleton = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON];
    if (!serverActionsManifestSingleton) {
        throw new _invarianterror.InvariantError('Missing manifest for Server Actions.');
    }
    return serverActionsManifestSingleton.serverModuleMap;
}
function getClientReferenceManifestForRsc() {
    const serverActionsManifestSingleton = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON];
    if (!serverActionsManifestSingleton) {
        throw new _invarianterror.InvariantError('Missing manifest for Server Actions.');
    }
    const { clientReferenceManifestsPerPage } = serverActionsManifestSingleton;
    const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();
    if (!workStore) {
        // If there's no work store defined, we can assume that a client reference
        // manifest is needed during module evaluation, e.g. to create a server
        // action using a higher-order function. This might also use client
        // components which need to be serialized by Flight, and therefore client
        // references need to be resolvable. To make this work, we're returning a
        // merged manifest across all pages. This is fine as long as the module IDs
        // are not page specific, which they are not for Webpack. TODO: Fix this in
        // Turbopack.
        return mergeClientReferenceManifests(clientReferenceManifestsPerPage);
    }
    const clientReferenceManifest = clientReferenceManifestsPerPage[workStore.route];
    if (!clientReferenceManifest) {
        throw new _invarianterror.InvariantError(`Missing Client Reference Manifest for ${workStore.route}.`);
    }
    return clientReferenceManifest;
}
async function getActionEncryptionKey() {
    if (__next_loaded_action_key) {
        return __next_loaded_action_key;
    }
    const serverActionsManifestSingleton = globalThis[SERVER_ACTION_MANIFESTS_SINGLETON];
    if (!serverActionsManifestSingleton) {
        throw new _invarianterror.InvariantError('Missing manifest for Server Actions.');
    }
    const rawKey = process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY || serverActionsManifestSingleton.serverActionsManifest.encryptionKey;
    if (rawKey === undefined) {
        throw new _invarianterror.InvariantError('Missing encryption key for Server Actions');
    }
    __next_loaded_action_key = await crypto.subtle.importKey('raw', stringToUint8Array(atob(rawKey)), 'AES-GCM', true, [
        'encrypt',
        'decrypt'
    ]);
    return __next_loaded_action_key;
}
function mergeClientReferenceManifests(clientReferenceManifestsPerPage) {
    const clientReferenceManifests = Object.values(clientReferenceManifestsPerPage);
    const mergedClientReferenceManifest = {
        clientModules: {},
        edgeRscModuleMapping: {},
        rscModuleMapping: {}
    };
    for (const clientReferenceManifest of clientReferenceManifests){
        mergedClientReferenceManifest.clientModules = {
            ...mergedClientReferenceManifest.clientModules,
            ...clientReferenceManifest.clientModules
        };
        mergedClientReferenceManifest.edgeRscModuleMapping = {
            ...mergedClientReferenceManifest.edgeRscModuleMapping,
            ...clientReferenceManifest.edgeRscModuleMapping
        };
        mergedClientReferenceManifest.rscModuleMapping = {
            ...mergedClientReferenceManifest.rscModuleMapping,
            ...clientReferenceManifest.rscModuleMapping
        };
    }
    return mergedClientReferenceManifest;
} //# sourceMappingURL=encryption-utils.js.map


/***/ }),

/***/ 208706:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* eslint-disable import/no-extraneous-dependencies */ 
Object.defineProperty(exports, "__esModule", ({
    value: true
}));
0 && (0);
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    decryptActionBoundArgs: function() {
        return decryptActionBoundArgs;
    },
    encryptActionBoundArgs: function() {
        return encryptActionBoundArgs;
    }
});
__webpack_require__(47598);
const _serveredge = __webpack_require__(672771);
const _clientedge = __webpack_require__(979625);
const _nodewebstreamshelper = __webpack_require__(886023);
const _encryptionutils = __webpack_require__(438658);
const _workunitasyncstorageexternal = __webpack_require__(663033);
const isEdgeRuntime = "nodejs" === 'edge';
const textEncoder = new TextEncoder();
const textDecoder = new TextDecoder();
async function decodeActionBoundArg(actionId, arg) {
    const key = await (0, _encryptionutils.getActionEncryptionKey)();
    if (typeof key === 'undefined') {
        throw new Error(`Missing encryption key for Server Action. This is a bug in Next.js`);
    }
    // Get the iv (16 bytes) and the payload from the arg.
    const originalPayload = atob(arg);
    const ivValue = originalPayload.slice(0, 16);
    const payload = originalPayload.slice(16);
    const decrypted = textDecoder.decode(await (0, _encryptionutils.decrypt)(key, (0, _encryptionutils.stringToUint8Array)(ivValue), (0, _encryptionutils.stringToUint8Array)(payload)));
    if (!decrypted.startsWith(actionId)) {
        throw new Error('Invalid Server Action payload: failed to decrypt.');
    }
    return decrypted.slice(actionId.length);
}
/**
 * Encrypt the serialized string with the action id as the salt. Add a prefix to
 * later ensure that the payload is correctly decrypted, similar to a checksum.
 */ async function encodeActionBoundArg(actionId, arg) {
    const key = await (0, _encryptionutils.getActionEncryptionKey)();
    if (key === undefined) {
        throw new Error(`Missing encryption key for Server Action. This is a bug in Next.js`);
    }
    // Get 16 random bytes as iv.
    const randomBytes = new Uint8Array(16);
    _workunitasyncstorageexternal.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(randomBytes));
    const ivValue = (0, _encryptionutils.arrayBufferToString)(randomBytes.buffer);
    const encrypted = await (0, _encryptionutils.encrypt)(key, randomBytes, textEncoder.encode(actionId + arg));
    return btoa(ivValue + (0, _encryptionutils.arrayBufferToString)(encrypted));
}
async function encryptActionBoundArgs(actionId, args) {
    const { clientModules } = (0, _encryptionutils.getClientReferenceManifestForRsc)();
    // Create an error before any asynchrounous calls, to capture the original
    // call stack in case we need it when the serialization errors.
    const error = new Error();
    Error.captureStackTrace(error, encryptActionBoundArgs);
    let didCatchError = false;
    // Using Flight to serialize the args into a string.
    const serialized = await (0, _nodewebstreamshelper.streamToString)((0, _serveredge.renderToReadableStream)(args, clientModules, {
        onError (err) {
            // We're only reporting one error at a time, starting with the first.
            if (didCatchError) {
                return;
            }
            didCatchError = true;
            // Use the original error message together with the previously created
            // stack, because err.stack is a useless Flight Server call stack.
            error.message = err instanceof Error ? err.message : String(err);
        }
    }));
    if (didCatchError) {
        if (false) {}
        throw error;
    }
    const workUnitStore = _workunitasyncstorageexternal.workUnitAsyncStorage.getStore();
    if (!workUnitStore) {
        return encodeActionBoundArg(actionId, serialized);
    }
    const prerenderResumeDataCache = (0, _workunitasyncstorageexternal.getPrerenderResumeDataCache)(workUnitStore);
    const renderResumeDataCache = (0, _workunitasyncstorageexternal.getRenderResumeDataCache)(workUnitStore);
    const cacheKey = actionId + serialized;
    const cachedEncrypted = (prerenderResumeDataCache == null ? void 0 : prerenderResumeDataCache.encryptedBoundArgs.get(cacheKey)) ?? (renderResumeDataCache == null ? void 0 : renderResumeDataCache.encryptedBoundArgs.get(cacheKey));
    if (cachedEncrypted) {
        return cachedEncrypted;
    }
    const cacheSignal = workUnitStore.type === 'prerender' ? workUnitStore.cacheSignal : undefined;
    cacheSignal == null ? void 0 : cacheSignal.beginRead();
    const encrypted = await encodeActionBoundArg(actionId, serialized);
    cacheSignal == null ? void 0 : cacheSignal.endRead();
    prerenderResumeDataCache == null ? void 0 : prerenderResumeDataCache.encryptedBoundArgs.set(cacheKey, encrypted);
    return encrypted;
}
async function decryptActionBoundArgs(actionId, encrypted) {
    const { edgeRscModuleMapping, rscModuleMapping } = (0, _encryptionutils.getClientReferenceManifestForRsc)();
    // Decrypt the serialized string with the action id as the salt.
    const decrypted = await decodeActionBoundArg(actionId, await encrypted);
    // Using Flight to deserialize the args from the string.
    const deserialized = await (0, _clientedge.createFromReadableStream)(new ReadableStream({
        start (controller) {
            controller.enqueue(textEncoder.encode(decrypted));
            controller.close();
        }
    }), {
        serverConsumerManifest: {
            // moduleLoading must be null because we don't want to trigger preloads of ClientReferences
            // to be added to the current execution. Instead, we'll wait for any ClientReference
            // to be emitted which themselves will handle the preloading.
            moduleLoading: null,
            moduleMap: isEdgeRuntime ? edgeRscModuleMapping : rscModuleMapping,
            serverModuleMap: (0, _encryptionutils.getServerModuleMap)()
        }
    });
    return deserialized;
}

//# sourceMappingURL=encryption.js.map

/***/ }),

/***/ 204769:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ actionClassCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const actionClassCache = {
    tag: {
        byNameAndEnvironmentId (name, environmentId) {
            return `environments-${environmentId}-actionClass-${name}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-actionClasses`;
        },
        byId (id) {
            return `actionClasses-${id}`;
        }
    },
    revalidate ({ environmentId, name, id }) {
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (name && environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byNameAndEnvironmentId(name, environmentId));
        }
    }
};


/***/ }),

/***/ 337386:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ segmentCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const segmentCache = {
    tag: {
        byId (id) {
            return `segment-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-segements`;
        },
        byAttributeKey (attributeKey) {
            return `attribute-${attributeKey}-segements`;
        }
    },
    revalidate ({ id, environmentId, attributeKey }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (attributeKey) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byAttributeKey(attributeKey));
        }
    }
};


/***/ }),

/***/ 835093:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   t: () => (/* binding */ integrationCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const integrationCache = {
    tag: {
        byId (id) {
            return `integrations-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-integrations`;
        },
        byEnvironmentIdAndType (environmentId, type) {
            return `environments-${environmentId}-type-${type}-integrations`;
        }
    },
    revalidate ({ id, environmentId, type }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (environmentId && type) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentIdAndType(environmentId, type));
        }
    }
};


/***/ }),

/***/ 895856:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ getMembershipRole),
/* harmony export */   U: () => (/* binding */ getMembershipByUserIdOrganizationIdAction)
/* harmony export */ });
/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(286055);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(770767);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(207798);
/* harmony import */ var _organization_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(167440);
/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(575361);
/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(429931);
/* __next_internal_action_entry_do_not_use__ {"7f7e22b5cdd09e77d8f7cd2b1aa54674e257258f9f":"getMembershipRole","7fb1462c71ceac762f633a204a6fc049ffbeab8261":"getMembershipByUserIdOrganizationIdAction"} */ 





const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getMembershipByUserIdOrganizationIdAction = async (environmentId, userId)=>{
    const organization = await (0,_organization_service__WEBPACK_IMPORTED_MODULE_2__/* .getOrganizationByEnvironmentId */ .TK)(environmentId);
    if (!organization) {
        throw new Error("Organization not found");
    }
    const currentUserMembership = await getMembershipRole(userId, organization.id);
    return currentUserMembership;
};
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getMembershipRole = async (userId, organizationId)=>{
    const membership = await (0,_service__WEBPACK_IMPORTED_MODULE_3__/* .getMembershipByUserIdOrganizationId */ .Y)(userId, organizationId);
    if (!membership) {
        throw new _formbricks_types_errors__WEBPACK_IMPORTED_MODULE_4__/* .AuthorizationError */ .yi("Not authorized");
    }
    return membership.role;
};

(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_5__/* .ensureServerEntryExports */ .D)([
    getMembershipByUserIdOrganizationIdAction,
    getMembershipRole
]);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getMembershipByUserIdOrganizationIdAction, "7fb1462c71ceac762f633a204a6fc049ffbeab8261", null);
(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__/* .registerServerReference */ .A)(getMembershipRole, "7f7e22b5cdd09e77d8f7cd2b1aa54674e257258f9f", null);


/***/ }),

/***/ 122522:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ responseCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const responseCache = {
    tag: {
        byId (responseId) {
            return `responses-${responseId}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-responses`;
        },
        byContactId (contactId) {
            return `contacts-${contactId}-responses`;
        },
        byEnvironmentIdAndUserId (environmentId, userId) {
            return `environments-${environmentId}-users-${userId}-responses`;
        },
        bySingleUseId (surveyId, singleUseId) {
            return `surveys-${surveyId}-singleUse-${singleUseId}-responses`;
        },
        bySurveyId (surveyId) {
            return `surveys-${surveyId}-responses`;
        }
    },
    revalidate ({ environmentId, contactId, id, singleUseId, surveyId, userId }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (contactId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byContactId(contactId));
        }
        if (surveyId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.bySurveyId(surveyId));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (environmentId && userId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentIdAndUserId(environmentId, userId));
        }
        if (surveyId && singleUseId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.bySingleUseId(surveyId, singleUseId));
        }
    }
};


/***/ }),

/***/ 832094:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ responseNoteCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const responseNoteCache = {
    tag: {
        byId (id) {
            return `responseNotes-${id}`;
        },
        byResponseId (responseId) {
            return `responses-${responseId}-responseNote`;
        }
    },
    revalidate ({ id, responseId }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (responseId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byResponseId(responseId));
        }
    }
};


/***/ }),

/***/ 249479:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ surveyCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const surveyCache = {
    tag: {
        byId (id) {
            return `surveys-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-surveys`;
        },
        byAttributeClassId (attributeClassId) {
            return `attributeFilters-${attributeClassId}-surveys`;
        },
        byActionClassId (actionClassId) {
            return `actionClasses-${actionClassId}-surveys`;
        },
        bySegmentId (segmentId) {
            return `segments-${segmentId}-surveys`;
        },
        byResultShareKey (resultShareKey) {
            return `surveys-resultShare-${resultShareKey}`;
        }
    },
    revalidate ({ id, attributeClassId, actionClassId, environmentId, segmentId, resultShareKey }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (attributeClassId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byAttributeClassId(attributeClassId));
        }
        if (actionClassId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byActionClassId(actionClassId));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (segmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.bySegmentId(segmentId));
        }
        if (resultShareKey) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byResultShareKey(resultShareKey));
        }
    }
};


/***/ }),

/***/ 649195:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ tagCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const tagCache = {
    tag: {
        byId (id) {
            return `tags-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-tags`;
        }
    },
    revalidate ({ id, environmentId }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
    }
};


/***/ }),

/***/ 182711:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ createSurveyAction)
/* harmony export */ });
/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(308441);
/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);

const createSurveyAction = /*#__PURE__*/(0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)("7ff20090763891981ab1625ad83b771c8ef93748aa", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, undefined, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, "createSurveyAction")

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8079,3073,7863,5069,255,9759,6626,2021,2195,1469,5294,6911,2075,5667,9726,9415,3687,7864,8046,5752,3840,9160,3902,4301], () => (__webpack_exec__(509781)));
module.exports = __webpack_exports__;

})();
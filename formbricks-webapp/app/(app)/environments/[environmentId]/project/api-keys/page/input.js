(() => {
var exports = {};
exports.id = 3473;
exports.ids = [3473];
exports.modules = {

/***/ 191043:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ 741000:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-presigned-post");

/***/ }),

/***/ 531701:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ 896330:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ 560483:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client/scripts/default-index.js");

/***/ }),

/***/ 710846:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.prod.js");

/***/ }),

/***/ 419121:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ 903295:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ 529294:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ 663033:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ 912412:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 979428:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 455511:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 594735:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 629021:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 79748:
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ 781630:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 55591:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 491645:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 321820:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 333873:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 111723:
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ 927910:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 134631:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 583997:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 379551:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 328354:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 173566:
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ 74075:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 504573:
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ 977598:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 973024:
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ 937067:
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ 344708:
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ 777030:
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ 176760:
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ 1708:
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ 157075:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ 337830:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ 173136:
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ 257975:
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ 638522:
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ 663003:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(290735);
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(291232);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(272914);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(240085);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
const module0 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 86397));
const module1 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 836653));
const module2 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 956791));
const module3 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module4 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module5 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 524160));
const module6 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module7 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module8 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 830691));
const module9 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 931168));
const module10 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 744670));
const page11 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 554367));


// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        '(app)',
        {
        children: [
        'environments',
        {
        children: [
        '[environmentId]',
        {
        children: [
        'project',
        {
        children: [
        'api-keys',
        {
        children: ['__PAGE__', {}, {
          page: [page11, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/project/api-keys/page.tsx"],
          
        }]
      },
        {
        'loading': [module10, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/project/api-keys/loading.tsx"],
        
      }
      ]
      },
        {
        'layout': [module9, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/project/layout.tsx"],
        
      }
      ]
      },
        {
        'layout': [module8, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/layout.tsx"],
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module5, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/layout.tsx"],
'forbidden': [module6, "next/dist/client/components/forbidden-error"],
'unauthorized': [module7, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      },
        {
        'layout': [module0, "/Users/kdy1/projects/formbricks/apps/web/app/layout.tsx"],
'error': [module1, "/Users/kdy1/projects/formbricks/apps/web/app/error.tsx"],
'not-found': [module2, "/Users/kdy1/projects/formbricks/apps/web/app/not-found.tsx"],
'forbidden': [module3, "next/dist/client/components/forbidden-error"],
'unauthorized': [module4, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      }.children;
const pages = ["/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/project/api-keys/page.tsx"];


const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({
    definition: {
        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/(app)/environments/[environmentId]/project/api-keys/page",
        pathname: "/environments/[environmentId]/project/api-keys",
        // The following aren't used in production.
        bundlePath: '',
        filename: '',
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 474742:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "7f11f2efac37ac84796e6cb223722dbe2e808e177f": () => (/* reexport */ services/* getResponse */.mi),
  "7f12957c3365cc2950bdc48f0118f82439eb6c23ec": () => (/* reexport */ services/* getSurvey */.Dp),
  "7f20db167926d501ff62b9525526548773c8a436d4": () => (/* reexport */ services/* isTeamPartOfOrganization */.l5),
  "7f2431fc3b8c6c124a1868f9a0b34d77983cdb9649": () => (/* reexport */ actions/* getLatestStableFbReleaseAction */.aX),
  "7f24b3d27813511aef08364975a20983e61a3dde87": () => (/* reexport */ actions/* getActiveInactiveSurveysAction */.bN),
  "7f36cf02b548a01d85112f587591e8c1e8390fa538": () => (/* reexport */ services/* isProjectPartOfOrganization */.Xj),
  "7f4f2c9c8b657cf906e9a25e65dafac6ec65967916": () => (/* reexport */ services/* getWebhook */.O0),
  "7f540889be00b7aa8c6ff1edc5cd79ece876954fd3": () => (/* reexport */ services/* getInvite */.I_),
  "7f60061b4b6be335eaa2facd1c5d8129b87f6923f4": () => (/* reexport */ services/* getActionClass */.Bx),
  "7f607ac975565ce495ac2952cf2bd35183ca9684ec": () => (/* reexport */ actions/* updateActionClassAction */.gn),
  "7f670a0537f96de8b5156e1b206124b2a990484370": () => (/* reexport */ services/* getApiKey */.CG),
  "7f74bd40a1f82de833915085152910f3ebd525b356": () => (/* reexport */ services/* getTeam */.Uo),
  "7f82763127a11eaaa934ce7fb0ffd1f148bfd60c06": () => (/* reexport */ actions/* deleteActionClassAction */.ir),
  "7f87eff3f40472cc50283bdcd5a25c50fc885ad477": () => (/* reexport */ deleteApiKeyAction),
  "7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e": () => (/* reexport */ services/* getResponseNote */.Wy),
  "7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1": () => (/* reexport */ services/* getTag */.bH),
  "7fc6abb0838b6422ef7e81141fd6603883cd1990cf": () => (/* reexport */ services/* getDocument */.YE),
  "7fc856fe5dd5f698d2f54dacf4280d447336780427": () => (/* reexport */ services/* getLanguage */.Z0),
  "7fcda0e6bf50febdf861015e25ebdf74068a488dde": () => (/* reexport */ services/* getContact */.bl),
  "7fcfea9518c327899180b23cb3055005ba65cdef33": () => (/* reexport */ services/* getIntegration */.rg),
  "7fdb06c584a2145e0f48be9ead409fc7f774731fde": () => (/* reexport */ services/* getEnvironment */.uc),
  "7fdbcf2c236924e599bfce6915bc47438c9b3ce3b3": () => (/* reexport */ createApiKeyAction),
  "7fdcbaf3445e783557d350b55d91be1398fafca7d3": () => (/* reexport */ services/* getInsight */.zv),
  "7fe763f2c0d5f307cc75c26f23c693a54ac24a3112": () => (/* reexport */ services/* getProject */.U1),
  "7ff27151c29d7402abd744ae983a2c25b016ccf26f": () => (/* reexport */ organization_actions/* createOrganizationAction */.s),
  "7ffb22c619704253744e9b5fea4eccca8b0808fb64": () => (/* reexport */ services/* getSegment */.kn)
});

// EXTERNAL MODULE: ./app/(app)/environments/[environmentId]/actions/actions.ts
var actions = __webpack_require__(933166);
// EXTERNAL MODULE: ./lib/utils/services.ts
var services = __webpack_require__(883212);
// EXTERNAL MODULE: ./modules/organization/actions.ts
var organization_actions = __webpack_require__(57841);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js
var server_reference = __webpack_require__(286055);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/app-render/encryption.js
var encryption = __webpack_require__(770767);
// EXTERNAL MODULE: ./lib/utils/action-client.ts
var action_client = __webpack_require__(308046);
// EXTERNAL MODULE: ./lib/utils/action-client-middleware.ts
var action_client_middleware = __webpack_require__(729455);
// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(440388);
// EXTERNAL MODULE: ./lib/cache/api-key.ts
var api_key = __webpack_require__(16411);
// EXTERNAL MODULE: ../../node_modules/zod/lib/index.mjs
var lib = __webpack_require__(283131);
;// ../../packages/database/zod/api-keys.ts

const ZApiKey = lib.z.object({
    id: lib.z.string().cuid2(),
    createdAt: lib.z.date(),
    lastUsedAt: lib.z.date().nullable(),
    label: lib.z.string().nullable(),
    hashedKey: lib.z.string(),
    environmentId: lib.z.string().cuid2()
});

;// ./modules/projects/settings/api-keys/types/api-keys.ts

const ZApiKeyCreateInput = ZApiKey.required({
    label: true
}).pick({
    label: true
});

// EXTERNAL MODULE: external "@prisma/client"
var client_ = __webpack_require__(896330);
// EXTERNAL MODULE: external "crypto"
var external_crypto_ = __webpack_require__(455511);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js
var react = __webpack_require__(645625);
// EXTERNAL MODULE: ../../packages/database/src/index.ts + 1 modules
var src = __webpack_require__(482859);
// EXTERNAL MODULE: ../../packages/lib/cache.ts
var cache = __webpack_require__(48165);
// EXTERNAL MODULE: ../../packages/lib/constants.ts
var constants = __webpack_require__(711344);
// EXTERNAL MODULE: ../../packages/lib/utils/validate.ts
var validate = __webpack_require__(472749);
// EXTERNAL MODULE: ../../packages/types/common.ts
var common = __webpack_require__(552224);
// EXTERNAL MODULE: ../../packages/types/errors.ts
var errors = __webpack_require__(207798);
;// ./modules/projects/settings/api-keys/lib/api-key.ts












const getApiKeys = (0,react.cache)(async (environmentId, page)=>(0,cache/* cache */.P)(async ()=>{
        (0,validate/* validateInputs */.C)([
            environmentId,
            common/* ZId */.i4
        ], [
            page,
            common/* ZOptionalNumber */.Wo
        ]);
        try {
            const apiKeys = await src/* prisma */.z.apiKey.findMany({
                where: {
                    environmentId
                },
                take: page ? constants/* ITEMS_PER_PAGE */.re : undefined,
                skip: page ? constants/* ITEMS_PER_PAGE */.re * (page - 1) : undefined
            });
            return apiKeys;
        } catch (error) {
            if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
                throw new errors/* DatabaseError */.a$(error.message);
            }
            throw error;
        }
    }, [
        `getApiKeys-${environmentId}-${page}`
    ], {
        tags: [
            api_key/* apiKeyCache */.m.tag.byEnvironmentId(environmentId)
        ]
    })());
const deleteApiKey = async (id)=>{
    (0,validate/* validateInputs */.C)([
        id,
        common/* ZId */.i4
    ]);
    try {
        const deletedApiKeyData = await src/* prisma */.z.apiKey.delete({
            where: {
                id: id
            }
        });
        api_key/* apiKeyCache */.m.revalidate({
            id: deletedApiKeyData.id,
            hashedKey: deletedApiKeyData.hashedKey,
            environmentId: deletedApiKeyData.environmentId
        });
        return deletedApiKeyData;
    } catch (error) {
        if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
            throw new errors/* DatabaseError */.a$(error.message);
        }
        throw error;
    }
};
const hashApiKey = (key)=>(0,external_crypto_.createHash)("sha256").update(key).digest("hex");
const createApiKey = async (environmentId, apiKeyData)=>{
    (0,validate/* validateInputs */.C)([
        environmentId,
        common/* ZId */.i4
    ], [
        apiKeyData,
        ZApiKeyCreateInput
    ]);
    try {
        const key = (0,external_crypto_.randomBytes)(16).toString("hex");
        const hashedKey = hashApiKey(key);
        const result = await src/* prisma */.z.apiKey.create({
            data: {
                ...apiKeyData,
                hashedKey,
                environment: {
                    connect: {
                        id: environmentId
                    }
                }
            }
        });
        api_key/* apiKeyCache */.m.revalidate({
            id: result.id,
            hashedKey: result.hashedKey,
            environmentId: result.environmentId
        });
        return {
            ...result,
            apiKey: key
        };
    } catch (error) {
        if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
            throw new errors/* DatabaseError */.a$(error.message);
        }
        throw error;
    }
};

// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js
var action_validate = __webpack_require__(429931);
;// ./modules/projects/settings/api-keys/actions.ts
/* __next_internal_action_entry_do_not_use__ {"7f87eff3f40472cc50283bdcd5a25c50fc885ad477":"deleteApiKeyAction","7fdbcf2c236924e599bfce6915bc47438c9b3ce3b3":"createApiKeyAction"} */ 








const ZDeleteApiKeyAction = lib.z.object({
    id: common/* ZId */.i4
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ deleteApiKeyAction = action_client/* authenticatedActionClient */.D.schema(ZDeleteApiKeyAction).action(async ({ ctx, parsedInput })=>{
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: ctx.user.id,
        organizationId: await (0,helper/* getOrganizationIdFromApiKeyId */.NZ)(parsedInput.id),
        access: [
            {
                type: "organization",
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                minPermission: "manage",
                projectId: await (0,helper/* getProjectIdFromApiKeyId */.HY)(parsedInput.id)
            }
        ]
    });
    return await deleteApiKey(parsedInput.id);
});
const ZCreateApiKeyAction = lib.z.object({
    environmentId: common/* ZId */.i4,
    apiKeyData: ZApiKeyCreateInput
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ createApiKeyAction = action_client/* authenticatedActionClient */.D.schema(ZCreateApiKeyAction).action(async ({ ctx, parsedInput })=>{
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: ctx.user.id,
        organizationId: await (0,helper/* getOrganizationIdFromEnvironmentId */.X_)(parsedInput.environmentId),
        access: [
            {
                type: "organization",
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                minPermission: "manage",
                projectId: await (0,helper/* getProjectIdFromEnvironmentId */.DU)(parsedInput.environmentId)
            }
        ]
    });
    return await createApiKey(parsedInput.environmentId, parsedInput.apiKeyData);
});

(0,action_validate/* ensureServerEntryExports */.D)([
    deleteApiKeyAction,
    createApiKeyAction
]);
(0,server_reference/* registerServerReference */.A)(deleteApiKeyAction, "7f87eff3f40472cc50283bdcd5a25c50fc885ad477", null);
(0,server_reference/* registerServerReference */.A)(createApiKeyAction, "7fdbcf2c236924e599bfce6915bc47438c9b3ce3b3", null);

;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fapp%2F(app)%2Fenvironments%2F%5BenvironmentId%5D%2Factions%2Factions.ts%22%2C%5B%5B%227f2431fc3b8c6c124a1868f9a0b34d77983cdb9649%22%2C%22getLatestStableFbReleaseAction%22%5D%2C%5B%227f24b3d27813511aef08364975a20983e61a3dde87%22%2C%22getActiveInactiveSurveysAction%22%5D%2C%5B%227f607ac975565ce495ac2952cf2bd35183ca9684ec%22%2C%22updateActionClassAction%22%5D%2C%5B%227f82763127a11eaaa934ce7fb0ffd1f148bfd60c06%22%2C%22deleteActionClassAction%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Flib%2Futils%2Fservices.ts%22%2C%5B%5B%227f11f2efac37ac84796e6cb223722dbe2e808e177f%22%2C%22getResponse%22%5D%2C%5B%227f12957c3365cc2950bdc48f0118f82439eb6c23ec%22%2C%22getSurvey%22%5D%2C%5B%227f20db167926d501ff62b9525526548773c8a436d4%22%2C%22isTeamPartOfOrganization%22%5D%2C%5B%227f36cf02b548a01d85112f587591e8c1e8390fa538%22%2C%22isProjectPartOfOrganization%22%5D%2C%5B%227f4f2c9c8b657cf906e9a25e65dafac6ec65967916%22%2C%22getWebhook%22%5D%2C%5B%227f540889be00b7aa8c6ff1edc5cd79ece876954fd3%22%2C%22getInvite%22%5D%2C%5B%227f60061b4b6be335eaa2facd1c5d8129b87f6923f4%22%2C%22getActionClass%22%5D%2C%5B%227f670a0537f96de8b5156e1b206124b2a990484370%22%2C%22getApiKey%22%5D%2C%5B%227f74bd40a1f82de833915085152910f3ebd525b356%22%2C%22getTeam%22%5D%2C%5B%227fb9a3e6cbebea226c9a3678f31bfebf532ca7321e%22%2C%22getResponseNote%22%5D%2C%5B%227fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1%22%2C%22getTag%22%5D%2C%5B%227fc6abb0838b6422ef7e81141fd6603883cd1990cf%22%2C%22getDocument%22%5D%2C%5B%227fc856fe5dd5f698d2f54dacf4280d447336780427%22%2C%22getLanguage%22%5D%2C%5B%227fcda0e6bf50febdf861015e25ebdf74068a488dde%22%2C%22getContact%22%5D%2C%5B%227fcfea9518c327899180b23cb3055005ba65cdef33%22%2C%22getIntegration%22%5D%2C%5B%227fdb06c584a2145e0f48be9ead409fc7f774731fde%22%2C%22getEnvironment%22%5D%2C%5B%227fdcbaf3445e783557d350b55d91be1398fafca7d3%22%2C%22getInsight%22%5D%2C%5B%227fe763f2c0d5f307cc75c26f23c693a54ac24a3112%22%2C%22getProject%22%5D%2C%5B%227ffb22c619704253744e9b5fea4eccca8b0808fb64%22%2C%22getSegment%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fmodules%2Forganization%2Factions.ts%22%2C%5B%5B%227ff27151c29d7402abd744ae983a2c25b016ccf26f%22%2C%22createOrganizationAction%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fmodules%2Fprojects%2Fsettings%2Fapi-keys%2Factions.ts%22%2C%5B%5B%227f87eff3f40472cc50283bdcd5a25c50fc885ad477%22%2C%22deleteApiKeyAction%22%5D%2C%5B%227fdbcf2c236924e599bfce6915bc47438c9b3ce3b3%22%2C%22createApiKeyAction%22%5D%5D%5D%5D&__client_imported__=true!





























/***/ }),

/***/ 564828:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 42304));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 110679));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 74544));


/***/ }),

/***/ 22972:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 742264));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 382882));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 467333));


/***/ }),

/***/ 958261:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 722628));


/***/ }),

/***/ 500117:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 810012));


/***/ }),

/***/ 382882:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  EditAPIKeys: () => (/* binding */ EditAPIKeys)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(642725);
// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(856763);
// EXTERNAL MODULE: ./modules/ui/components/button/index.tsx
var components_button = __webpack_require__(248852);
// EXTERNAL MODULE: ./modules/ui/components/delete-dialog/index.tsx
var delete_dialog = __webpack_require__(982234);
// EXTERNAL MODULE: ../../node_modules/@tolgee/react/dist/tolgee-react.esm.js
var tolgee_react_esm = __webpack_require__(397674);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/createLucideIcon.js + 3 modules
var createLucideIcon = __webpack_require__(58303);
;// ../../node_modules/lucide-react/dist/esm/icons/files.js
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Files = (0,createLucideIcon/* default */.A)("Files", [
    [
        "path",
        {
            d: "M20 7h-3a2 2 0 0 1-2-2V2",
            key: "x099mo"
        }
    ],
    [
        "path",
        {
            d: "M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",
            key: "18t6ie"
        }
    ],
    [
        "path",
        {
            d: "M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",
            key: "1nja0z"
        }
    ]
]);
 //# sourceMappingURL=files.js.map

// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/trash.js
var trash = __webpack_require__(721964);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js
var react = __webpack_require__(891616);
// EXTERNAL MODULE: ../../node_modules/react-hot-toast/dist/index.mjs + 1 modules
var dist = __webpack_require__(986090);
// EXTERNAL MODULE: ../../packages/lib/time.ts
var time = __webpack_require__(775453);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js
var action_client_wrapper = __webpack_require__(308441);
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7f87eff3f40472cc50283bdcd5a25c50fc885ad477&name=deleteApiKeyAction!

const deleteApiKeyAction = /*#__PURE__*/(0,action_client_wrapper.createServerReference)("7f87eff3f40472cc50283bdcd5a25c50fc885ad477", action_client_wrapper.callServer, undefined, action_client_wrapper.findSourceMapURL, "deleteApiKeyAction")
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7fdbcf2c236924e599bfce6915bc47438c9b3ce3b3&name=createApiKeyAction!

const createApiKeyAction = /*#__PURE__*/(0,action_client_wrapper.createServerReference)("7fdbcf2c236924e599bfce6915bc47438c9b3ce3b3", action_client_wrapper.callServer, undefined, action_client_wrapper.findSourceMapURL, "createApiKeyAction")
// EXTERNAL MODULE: ./modules/ui/components/input/index.tsx
var input = __webpack_require__(438624);
// EXTERNAL MODULE: ./modules/ui/components/label/index.tsx
var label = __webpack_require__(61330);
// EXTERNAL MODULE: ./modules/ui/components/modal/index.tsx
var modal = __webpack_require__(383207);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/triangle-alert.js
var triangle_alert = __webpack_require__(467935);
// EXTERNAL MODULE: ../../node_modules/react-hook-form/dist/index.esm.mjs
var index_esm = __webpack_require__(200667);
;// ./modules/projects/settings/api-keys/components/add-api-key-modal.tsx
/* __next_internal_client_entry_do_not_use__ AddApiKeyModal auto */ 







const AddApiKeyModal = ({ open, setOpen, onSubmit })=>{
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const { register, getValues, handleSubmit, reset } = (0,index_esm/* useForm */.mN)();
    const submitAPIKey = async ()=>{
        const data = getValues();
        onSubmit(data);
        setOpen(false);
        reset();
    };
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(modal/* Modal */.a, {
        open: open,
        setOpen: setOpen,
        noPadding: true,
        closeOnOutsideClick: false,
        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
            className: "flex h-full flex-col rounded-lg",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                    className: "rounded-t-lg bg-slate-100",
                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                        className: "flex items-center justify-between p-6",
                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                            className: "flex items-center space-x-2",
                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                className: "text-xl font-medium text-slate-700",
                                children: t("environments.project.api-keys.add_api_key")
                            })
                        })
                    })
                }),
                /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("form", {
                    onSubmit: handleSubmit(submitAPIKey),
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                            className: "flex justify-between rounded-lg p-6",
                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "w-full space-y-4",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(label/* Label */.J, {
                                                children: t("environments.project.api-keys.api_key_label")
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(input/* Input */.p, {
                                                placeholder: "e.g. GitHub, PostHog, Slack",
                                                ...register("label", {
                                                    required: true,
                                                    validate: (value)=>value.trim() !== ""
                                                })
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                        className: "flex items-center rounded-lg border border-slate-200 bg-slate-100 p-2 text-sm text-slate-700",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(triangle_alert/* default */.A, {
                                                className: "mx-3 h-12 w-12 text-amber-500"
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                                children: t("environments.project.api-keys.api_key_security_warning")
                                            })
                                        ]
                                    })
                                ]
                            })
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                            className: "flex justify-end border-t border-slate-200 p-6",
                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "flex space-x-2",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                        type: "button",
                                        variant: "ghost",
                                        onClick: ()=>{
                                            setOpen(false);
                                        },
                                        children: t("common.cancel")
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                        type: "submit",
                                        children: t("environments.project.api-keys.add_api_key")
                                    })
                                ]
                            })
                        })
                    ]
                })
            ]
        })
    });
};

;// ./modules/projects/settings/api-keys/components/edit-api-keys.tsx
/* __next_internal_client_entry_do_not_use__ EditAPIKeys auto */ 










const EditAPIKeys = ({ environmentTypeId, environmentType, apiKeys, environmentId, locale, isReadOnly })=>{
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const [isAddAPIKeyModalOpen, setOpenAddAPIKeyModal] = (0,react.useState)(false);
    const [isDeleteKeyModalOpen, setOpenDeleteKeyModal] = (0,react.useState)(false);
    const [apiKeysLocal, setApiKeysLocal] = (0,react.useState)(apiKeys);
    const [activeKey, setActiveKey] = (0,react.useState)({});
    const handleOpenDeleteKeyModal = (e, apiKey)=>{
        e.preventDefault();
        setActiveKey(apiKey);
        setOpenDeleteKeyModal(true);
    };
    const handleDeleteKey = async ()=>{
        try {
            await deleteApiKeyAction({
                id: activeKey.id
            });
            const updatedApiKeys = apiKeysLocal?.filter((apiKey)=>apiKey.id !== activeKey.id) || [];
            setApiKeysLocal(updatedApiKeys);
            dist/* default */.Ay.success(t("environments.project.api-keys.api_key_deleted"));
        } catch (e) {
            dist/* default */.Ay.error(t("environments.project.api-keys.unable_to_delete_api_key"));
        } finally{
            setOpenDeleteKeyModal(false);
        }
    };
    const handleAddAPIKey = async (data)=>{
        const createApiKeyResponse = await createApiKeyAction({
            environmentId: environmentTypeId,
            apiKeyData: {
                label: data.label
            }
        });
        if (createApiKeyResponse?.data) {
            const updatedApiKeys = [
                ...apiKeysLocal,
                createApiKeyResponse.data
            ];
            setApiKeysLocal(updatedApiKeys);
            dist/* default */.Ay.success(t("environments.project.api-keys.api_key_created"));
        } else {
            const errorMessage = (0,helper/* getFormattedErrorMessage */.g3)(createApiKeyResponse);
            dist/* default */.Ay.error(errorMessage);
        }
        setOpenAddAPIKeyModal(false);
    };
    const ApiKeyDisplay = ({ apiKey })=>{
        const copyToClipboard = ()=>{
            navigator.clipboard.writeText(apiKey);
            dist/* default */.Ay.success(t("environments.project.api-keys.api_key_copied_to_clipboard"));
        };
        if (!apiKey) {
            return /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                className: "italic",
                children: t("environments.project.api-keys.secret")
            });
        }
        return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
            className: "flex items-center",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                    children: apiKey
                }),
                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                    className: "copyApiKeyIcon",
                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(Files, {
                        className: "mx-2 h-4 w-4 cursor-pointer",
                        onClick: copyToClipboard
                    })
                })
            ]
        });
    };
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "space-y-4",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                className: "rounded-lg border border-slate-200",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                        className: "grid h-12 grid-cols-10 content-center rounded-t-lg bg-slate-100 px-6 text-left text-sm font-semibold text-slate-900",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                className: "col-span-4 sm:col-span-2",
                                children: t("common.label")
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                className: "col-span-4 hidden sm:col-span-5 sm:block",
                                children: t("environments.project.api-keys.api_key")
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                className: "col-span-4 sm:col-span-2",
                                children: t("common.created_at")
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {})
                        ]
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                        className: "grid-cols-9",
                        children: apiKeysLocal && apiKeysLocal.length === 0 ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                            className: "flex h-12 items-center justify-center whitespace-nowrap px-6 text-sm font-medium text-slate-400",
                            children: t("environments.project.api-keys.no_api_keys_yet")
                        }) : apiKeysLocal && apiKeysLocal.map((apiKey)=>/*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "grid h-12 w-full grid-cols-10 content-center items-center rounded-lg px-6 text-left text-sm text-slate-900",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-4 font-semibold sm:col-span-2",
                                        children: apiKey.label
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-4 hidden sm:col-span-5 sm:block",
                                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(ApiKeyDisplay, {
                                            apiKey: apiKey.apiKey
                                        })
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-4 sm:col-span-2",
                                        children: (0,time/* timeSince */._D)(apiKey.createdAt.toString(), locale)
                                    }),
                                    !isReadOnly && /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-1 text-center",
                                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                            size: "icon",
                                            variant: "ghost",
                                            onClick: (e)=>handleOpenDeleteKeyModal(e, apiKey),
                                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(trash/* default */.A, {})
                                        })
                                    })
                                ]
                            }, apiKey.hashedKey))
                    })
                ]
            }),
            !isReadOnly && /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                    size: "sm",
                    disabled: environmentId !== environmentTypeId,
                    onClick: ()=>{
                        setOpenAddAPIKeyModal(true);
                    },
                    children: t("environments.project.api-keys.add_env_api_key", {
                        environmentType
                    })
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(AddApiKeyModal, {
                open: isAddAPIKeyModalOpen,
                setOpen: setOpenAddAPIKeyModal,
                onSubmit: handleAddAPIKey
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(delete_dialog/* DeleteDialog */.C, {
                open: isDeleteKeyModalOpen,
                setOpen: setOpenDeleteKeyModal,
                deleteWhat: t("environments.project.api-keys.api_key"),
                onDelete: handleDeleteKey
            })
        ]
    });
};


/***/ }),

/***/ 810012:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   APIKeysLoading: () => (/* binding */ APIKeysLoading)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_projects_settings_components_project_config_navigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(467333);
/* harmony import */ var _modules_ui_components_page_content_wrapper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(101499);
/* harmony import */ var _modules_ui_components_page_header__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(662709);
/* harmony import */ var _tolgee_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(397674);
/* __next_internal_client_entry_do_not_use__ APIKeysLoading auto */ 




const LoadingCard = ()=>{
    const { t } = (0,_tolgee_react__WEBPACK_IMPORTED_MODULE_4__/* .useTranslate */ .WD)();
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "w-full max-w-4xl rounded-xl border border-slate-200 bg-white py-4 shadow-sm",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "grid content-center border-b border-slate-200 px-4 pb-4 text-left text-slate-900",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", {
                        className: "h-6 w-full max-w-56 animate-pulse rounded-lg bg-slate-100 text-lg font-medium leading-6"
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                        className: "mt-3 h-4 w-full max-w-80 animate-pulse rounded-lg bg-slate-100 text-sm text-slate-500"
                    })
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "w-full",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: "rounded-lg px-4 pt-4",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            className: "rounded-lg border border-slate-200",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                    className: "grid h-12 grid-cols-10 content-center rounded-t-lg bg-slate-100 px-6 text-left text-sm font-semibold text-slate-900",
                                    children: [
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                            className: "col-span-4 sm:col-span-2",
                                            children: t("common.label")
                                        }),
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                            className: "col-span-4 hidden sm:col-span-5 sm:block",
                                            children: t("environments.project.api-keys.api_key")
                                        }),
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                            className: "col-span-4 sm:col-span-2",
                                            children: t("common.created_at")
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                    className: "px-6",
                                    children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                        className: "my-4 h-5 w-full animate-pulse rounded-full bg-slate-200"
                                    })
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                            className: "flex justify-start",
                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                className: "mt-4 flex h-8 w-44 animate-pulse flex-col items-center justify-center rounded-md bg-black text-sm text-white",
                                children: t("common.loading")
                            })
                        })
                    ]
                })
            })
        ]
    });
};
const APIKeysLoading = ()=>{
    const { t } = (0,_tolgee_react__WEBPACK_IMPORTED_MODULE_4__/* .useTranslate */ .WD)();
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_page_content_wrapper__WEBPACK_IMPORTED_MODULE_2__/* .PageContentWrapper */ .s, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_page_header__WEBPACK_IMPORTED_MODULE_3__/* .PageHeader */ .z, {
                pageTitle: t("common.configuration"),
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_projects_settings_components_project_config_navigation__WEBPACK_IMPORTED_MODULE_1__.ProjectConfigNavigation, {
                    activeId: "api-keys",
                    loading: true
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "mt-4 flex max-w-4xl animate-pulse items-center space-y-4 rounded-lg border bg-blue-50 p-6 text-sm text-blue-900 shadow-sm md:space-y-0 md:text-base"
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LoadingCard, {})
        ]
    });
};


/***/ }),

/***/ 982234:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ DeleteDialog)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(248852);
/* harmony import */ var _modules_ui_components_modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(383207);
/* harmony import */ var _tolgee_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(397674);
/* __next_internal_client_entry_do_not_use__ DeleteDialog auto */ 



const DeleteDialog = ({ open, setOpen, deleteWhat, onDelete, text, isDeleting, isSaving, useSaveInsteadOfCancel = false, onSave, children, disabled })=>{
    const { t } = (0,_tolgee_react__WEBPACK_IMPORTED_MODULE_3__/* .useTranslate */ .WD)();
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_modal__WEBPACK_IMPORTED_MODULE_2__/* .Modal */ .a, {
        open: open,
        setOpen: setOpen,
        title: `${t("common.delete")} ${deleteWhat}`,
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                children: text || t("common.are_you_sure_this_action_cannot_be_undone")
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                children: children
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "mt-4 space-x-2 text-right",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__/* .Button */ .$, {
                        loading: isSaving,
                        variant: "secondary",
                        onClick: ()=>{
                            if (useSaveInsteadOfCancel && onSave) {
                                onSave();
                            }
                            setOpen(false);
                        },
                        children: useSaveInsteadOfCancel ? t("common.save") : t("common.cancel")
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__/* .Button */ .$, {
                        variant: "destructive",
                        onClick: onDelete,
                        loading: isDeleting,
                        disabled: disabled,
                        children: t("common.delete")
                    })
                ]
            })
        ]
    });
};


/***/ }),

/***/ 101499:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   s: () => (/* binding */ PageContentWrapper)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(983773);


const PageContentWrapper = ({ children, className })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__.cn)("h-full space-y-6 p-6", className),
        children: children
    });
};


/***/ }),

/***/ 662709:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   z: () => (/* binding */ PageHeader)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(983773);


const PageHeader = ({ cta, pageTitle, children })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "border-b border-slate-200",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "flex items-center justify-between space-x-4 pb-4",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1", {
                        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__.cn)("text-3xl font-bold capitalize text-slate-800"),
                        children: pageTitle
                    }),
                    cta
                ]
            }),
            children
        ]
    });
};


/***/ }),

/***/ 721964:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Trash)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Trash = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Trash", [
    [
        "path",
        {
            d: "M3 6h18",
            key: "d0wm0j"
        }
    ],
    [
        "path",
        {
            d: "M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",
            key: "4alrt4"
        }
    ],
    [
        "path",
        {
            d: "M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",
            key: "v07s0e"
        }
    ]
]);
 //# sourceMappingURL=trash.js.map


/***/ }),

/***/ 775453:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $B: () => (/* binding */ convertDateString),
/* harmony export */   Yq: () => (/* binding */ formatDate),
/* harmony export */   _D: () => (/* binding */ timeSince),
/* harmony export */   oS: () => (/* binding */ timeSinceDate),
/* harmony export */   qb: () => (/* binding */ convertDateTimeStringShort)
/* harmony export */ });
/* unused harmony exports convertDateTimeString, convertTimeString, getTodaysDateFormatted, getTodaysDateTimeFormatted, convertDatesInObject */
/* harmony import */ var _barrel_optimize_names_formatDistance_intlFormat_date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(527348);
/* harmony import */ var _barrel_optimize_names_formatDistance_intlFormat_date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(15056);
/* harmony import */ var date_fns_locale__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(154445);
/* harmony import */ var date_fns_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(119472);
/* harmony import */ var date_fns_locale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(907374);
/* harmony import */ var date_fns_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(144208);


const convertDateString = (dateString)=>{
    if (!dateString) {
        return dateString;
    }
    const date = new Date(dateString);
    return (0,_barrel_optimize_names_formatDistance_intlFormat_date_fns__WEBPACK_IMPORTED_MODULE_0__/* .intlFormat */ .b)(date, {
        year: "numeric",
        month: "short",
        day: "numeric"
    }, {
        locale: "en"
    });
};
const convertDateTimeString = (dateString)=>{
    if (!dateString) {
        return dateString;
    }
    const date = new Date(dateString);
    return intlFormat(date, {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
        hour: "numeric",
        minute: "2-digit"
    }, {
        locale: "en"
    });
};
const convertDateTimeStringShort = (dateString)=>{
    if (!dateString) {
        return dateString;
    }
    const date = new Date(dateString);
    return (0,_barrel_optimize_names_formatDistance_intlFormat_date_fns__WEBPACK_IMPORTED_MODULE_0__/* .intlFormat */ .b)(date, {
        year: "numeric",
        month: "long",
        day: "numeric",
        hour: "numeric",
        minute: "2-digit"
    }, {
        locale: "en"
    });
};
const convertTimeString = (dateString)=>{
    const date = new Date(dateString);
    return intlFormat(date, {
        hour: "numeric",
        minute: "2-digit",
        second: "2-digit"
    }, {
        locale: "en"
    });
};
const getLocaleForTimeSince = (locale)=>{
    switch(locale){
        case "de-DE":
            return date_fns_locale__WEBPACK_IMPORTED_MODULE_1__.de;
        case "en-US":
            return date_fns_locale__WEBPACK_IMPORTED_MODULE_2__/* .enUS */ .c;
        case "pt-BR":
            return date_fns_locale__WEBPACK_IMPORTED_MODULE_3__/* .ptBR */ .F;
        case "fr-FR":
            return date_fns_locale__WEBPACK_IMPORTED_MODULE_4__.fr;
    }
};
const timeSince = (dateString, locale)=>{
    const date = new Date(dateString);
    return (0,_barrel_optimize_names_formatDistance_intlFormat_date_fns__WEBPACK_IMPORTED_MODULE_5__/* .formatDistance */ .B)(date, new Date(), {
        addSuffix: true,
        locale: getLocaleForTimeSince(locale)
    });
};
const timeSinceDate = (date)=>{
    return (0,_barrel_optimize_names_formatDistance_intlFormat_date_fns__WEBPACK_IMPORTED_MODULE_5__/* .formatDistance */ .B)(date, new Date(), {
        addSuffix: true
    });
};
const formatDate = (date)=>{
    return (0,_barrel_optimize_names_formatDistance_intlFormat_date_fns__WEBPACK_IMPORTED_MODULE_0__/* .intlFormat */ .b)(date, {
        year: "numeric",
        month: "long",
        day: "numeric"
    });
};
const getTodaysDateFormatted = (seperator)=>{
    const date = new Date();
    const formattedDate = date.toISOString().split("T")[0].split("-").join(seperator);
    return formattedDate;
};
const getTodaysDateTimeFormatted = (seperator)=>{
    const date = new Date();
    const formattedDate = date.toISOString().split("T")[0].split("-").join(seperator);
    const formattedTime = date.toTimeString().split(" ")[0].split(":").join(seperator);
    return [
        formattedDate,
        formattedTime
    ].join(seperator);
};
const convertDatesInObject = (obj)=>{
    if (obj === null || typeof obj !== "object") {
        return obj; // Return if obj is not an object
    }
    if (Array.isArray(obj)) {
        // Handle arrays by mapping each element through the function
        return obj.map((item)=>convertDatesInObject(item));
    }
    const newObj = {};
    for(const key in obj){
        if ((key === "createdAt" || key === "updatedAt") && typeof obj[key] === "string" && !isNaN(Date.parse(obj[key]))) {
            newObj[key] = new Date(obj[key]);
        } else if (typeof obj[key] === "object" && obj[key] !== null) {
            newObj[key] = convertDatesInObject(obj[key]);
        } else {
            newObj[key] = obj[key];
        }
    }
    return newObj;
};


/***/ }),

/***/ 744670:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _modules_projects_settings_api_keys_loading__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(722628);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_modules_projects_settings_api_keys_loading__WEBPACK_IMPORTED_MODULE_0__.APIKeysLoading);


/***/ }),

/***/ 554367:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ page)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(891069);
// EXTERNAL MODULE: ./app/(app)/environments/[environmentId]/settings/components/SettingsCard.tsx
var SettingsCard = __webpack_require__(42304);
// EXTERNAL MODULE: ./modules/auth/lib/authOptions.ts + 8 modules
var authOptions = __webpack_require__(136015);
// EXTERNAL MODULE: ./modules/ee/license-check/lib/utils.ts + 1 modules
var utils = __webpack_require__(532077);
// EXTERNAL MODULE: ./modules/ee/teams/lib/roles.ts
var roles = __webpack_require__(389846);
// EXTERNAL MODULE: ./modules/ee/teams/utils/teams.ts
var teams = __webpack_require__(596379);
// EXTERNAL MODULE: ./modules/projects/settings/components/project-config-navigation.tsx
var project_config_navigation = __webpack_require__(74544);
// EXTERNAL MODULE: ./modules/ui/components/environment-notice/index.tsx + 1 modules
var environment_notice = __webpack_require__(881485);
// EXTERNAL MODULE: ./modules/ui/components/page-content-wrapper/index.tsx
var page_content_wrapper = __webpack_require__(746219);
// EXTERNAL MODULE: ./modules/ui/components/page-header/index.tsx
var page_header = __webpack_require__(109053);
// EXTERNAL MODULE: ./tolgee/server.tsx + 2 modules
var server = __webpack_require__(186184);
// EXTERNAL MODULE: ../../node_modules/next-auth/index.js
var next_auth = __webpack_require__(963302);
// EXTERNAL MODULE: ../../packages/lib/environment/service.ts
var service = __webpack_require__(32135);
// EXTERNAL MODULE: ../../packages/lib/membership/service.ts
var membership_service = __webpack_require__(377968);
// EXTERNAL MODULE: ../../packages/lib/membership/utils.ts
var membership_utils = __webpack_require__(159570);
// EXTERNAL MODULE: ../../packages/lib/organization/service.ts
var organization_service = __webpack_require__(353687);
// EXTERNAL MODULE: ../../packages/lib/project/service.ts
var project_service = __webpack_require__(529987);
// EXTERNAL MODULE: ../../packages/lib/utils/locale.ts
var utils_locale = __webpack_require__(615572);
// EXTERNAL MODULE: ./lib/cache/api-key.ts
var api_key = __webpack_require__(767630);
// EXTERNAL MODULE: ../../node_modules/zod/lib/index.mjs
var lib = __webpack_require__(545198);
;// ../../packages/database/zod/api-keys.ts

const ZApiKey = lib.z.object({
    id: lib.z.string().cuid2(),
    createdAt: lib.z.date(),
    lastUsedAt: lib.z.date().nullable(),
    label: lib.z.string().nullable(),
    hashedKey: lib.z.string(),
    environmentId: lib.z.string().cuid2()
});

;// ./modules/projects/settings/api-keys/types/api-keys.ts

const api_keys_ZApiKeyCreateInput = ZApiKey.required({
    label: true
}).pick({
    label: true
});

// EXTERNAL MODULE: external "@prisma/client"
var client_ = __webpack_require__(896330);
// EXTERNAL MODULE: external "crypto"
var external_crypto_ = __webpack_require__(455511);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js
var react = __webpack_require__(922728);
// EXTERNAL MODULE: ../../packages/database/src/index.ts + 1 modules
var src = __webpack_require__(527610);
// EXTERNAL MODULE: ../../packages/lib/cache.ts
var cache = __webpack_require__(794356);
// EXTERNAL MODULE: ../../packages/lib/constants.ts
var constants = __webpack_require__(836919);
// EXTERNAL MODULE: ../../packages/lib/utils/validate.ts
var validate = __webpack_require__(860988);
// EXTERNAL MODULE: ../../packages/types/common.ts
var common = __webpack_require__(733735);
// EXTERNAL MODULE: ../../packages/types/errors.ts
var errors = __webpack_require__(470641);
;// ./modules/projects/settings/api-keys/lib/api-key.ts












const getApiKeys = (0,react.cache)(async (environmentId, page)=>(0,cache/* cache */.P)(async ()=>{
        (0,validate/* validateInputs */.C)([
            environmentId,
            common/* ZId */.i4
        ], [
            page,
            common/* ZOptionalNumber */.Wo
        ]);
        try {
            const apiKeys = await src/* prisma */.z.apiKey.findMany({
                where: {
                    environmentId
                },
                take: page ? constants/* ITEMS_PER_PAGE */.re : undefined,
                skip: page ? constants/* ITEMS_PER_PAGE */.re * (page - 1) : undefined
            });
            return apiKeys;
        } catch (error) {
            if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
                throw new errors/* DatabaseError */.a$(error.message);
            }
            throw error;
        }
    }, [
        `getApiKeys-${environmentId}-${page}`
    ], {
        tags: [
            api_key/* apiKeyCache */.m.tag.byEnvironmentId(environmentId)
        ]
    })());
const deleteApiKey = async (id)=>{
    validateInputs([
        id,
        ZId
    ]);
    try {
        const deletedApiKeyData = await prisma.apiKey.delete({
            where: {
                id: id
            }
        });
        apiKeyCache.revalidate({
            id: deletedApiKeyData.id,
            hashedKey: deletedApiKeyData.hashedKey,
            environmentId: deletedApiKeyData.environmentId
        });
        return deletedApiKeyData;
    } catch (error) {
        if (error instanceof Prisma.PrismaClientKnownRequestError) {
            throw new DatabaseError(error.message);
        }
        throw error;
    }
};
const hashApiKey = (key)=>createHash("sha256").update(key).digest("hex");
const createApiKey = async (environmentId, apiKeyData)=>{
    validateInputs([
        environmentId,
        ZId
    ], [
        apiKeyData,
        ZApiKeyCreateInput
    ]);
    try {
        const key = randomBytes(16).toString("hex");
        const hashedKey = hashApiKey(key);
        const result = await prisma.apiKey.create({
            data: {
                ...apiKeyData,
                hashedKey,
                environment: {
                    connect: {
                        id: environmentId
                    }
                }
            }
        });
        apiKeyCache.revalidate({
            id: result.id,
            hashedKey: result.hashedKey,
            environmentId: result.environmentId
        });
        return {
            ...result,
            apiKey: key
        };
    } catch (error) {
        if (error instanceof Prisma.PrismaClientKnownRequestError) {
            throw new DatabaseError(error.message);
        }
        throw error;
    }
};

// EXTERNAL MODULE: ./modules/projects/settings/api-keys/components/edit-api-keys.tsx
var edit_api_keys = __webpack_require__(110679);
;// ./modules/projects/settings/api-keys/components/api-key-list.tsx






const ApiKeyList = async ({ environmentId, environmentType, locale, isReadOnly })=>{
    const t = await (0,server/* getTranslate */.r)();
    const findEnvironmentByType = (environments, targetType)=>{
        for (const environment of environments){
            if (environment.type === targetType) {
                return environment.id;
            }
        }
        return null;
    };
    const project = await (0,project_service/* getProjectByEnvironmentId */.bq)(environmentId);
    if (!project) {
        throw new Error(t("common.project_not_found"));
    }
    const environments = await (0,service/* getEnvironments */.DL)(project.id);
    const environmentTypeId = findEnvironmentByType(environments, environmentType);
    const apiKeys = await getApiKeys(environmentTypeId);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(edit_api_keys.EditAPIKeys, {
        environmentTypeId: environmentTypeId,
        environmentType: environmentType,
        apiKeys: apiKeys,
        environmentId: environmentId,
        locale: locale,
        isReadOnly: isReadOnly
    });
};

;// ./modules/projects/settings/api-keys/page.tsx



















const APIKeysPage = async (props)=>{
    const params = await props.params;
    const t = await (0,server/* getTranslate */.r)();
    const [session, environment, organization, project] = await Promise.all([
        (0,next_auth.getServerSession)(authOptions/* authOptions */.N),
        (0,service/* getEnvironment */.uc)(params.environmentId),
        (0,organization_service/* getOrganizationByEnvironmentId */.TK)(params.environmentId),
        (0,project_service/* getProjectByEnvironmentId */.bq)(params.environmentId)
    ]);
    if (!environment) {
        throw new Error(t("common.environment_not_found"));
    }
    if (!organization) {
        throw new Error(t("common.organization_not_found"));
    }
    if (!session) {
        throw new Error(t("common.session_not_found"));
    }
    const locale = await (0,utils_locale/* findMatchingLocale */.$)();
    if (!project) {
        throw new Error(t("common.project_not_found"));
    }
    const currentUserMembership = await (0,membership_service/* getMembershipByUserIdOrganizationId */.Y)(session?.user.id, organization.id);
    const { isMember } = (0,membership_utils/* getAccessFlags */.c)(currentUserMembership?.role);
    const projectPermission = await (0,roles/* getProjectPermissionByUserId */._)(session.user.id, project.id);
    const { hasManageAccess } = (0,teams/* getTeamPermissionFlags */.od)(projectPermission);
    const isReadOnly = isMember && !hasManageAccess;
    const isMultiLanguageAllowed = await (0,utils/* getMultiLanguagePermission */.x)(organization);
    const canDoRoleManagement = await (0,utils/* getRoleManagementPermission */.rQ)(organization);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(page_content_wrapper/* PageContentWrapper */.s, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(page_header/* PageHeader */.z, {
                pageTitle: t("common.configuration"),
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(project_config_navigation.ProjectConfigNavigation, {
                    environmentId: params.environmentId,
                    activeId: "api-keys",
                    isMultiLanguageAllowed: isMultiLanguageAllowed,
                    canDoRoleManagement: canDoRoleManagement
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(environment_notice/* EnvironmentNotice */.Y, {
                environmentId: environment.id,
                subPageUrl: "/project/api-keys"
            }),
            environment.type === "development" ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)(SettingsCard.SettingsCard, {
                title: t("environments.project.api-keys.dev_api_keys"),
                description: t("environments.project.api-keys.dev_api_keys_description"),
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(ApiKeyList, {
                    environmentId: params.environmentId,
                    environmentType: "development",
                    locale: locale,
                    isReadOnly: isReadOnly
                })
            }) : /*#__PURE__*/ (0,react_jsx_runtime.jsx)(SettingsCard.SettingsCard, {
                title: t("environments.project.api-keys.prod_api_keys"),
                description: t("environments.project.api-keys.prod_api_keys_description"),
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(ApiKeyList, {
                    environmentId: params.environmentId,
                    environmentType: "production",
                    locale: locale,
                    isReadOnly: isReadOnly
                })
            })
        ]
    });
};

;// ./app/(app)/environments/[environmentId]/project/api-keys/page.tsx

/* harmony default export */ const page = (APIKeysPage);


/***/ }),

/***/ 42304:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SettingsCard: () => (/* binding */ SettingsCard)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const SettingsCard = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call SettingsCard() from the server but SettingsCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/settings/components/SettingsCard.tsx",
"SettingsCard",
);

/***/ }),

/***/ 767630:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ apiKeyCache)
/* harmony export */ });
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87863);
/* harmony import */ var next_cache__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_cache__WEBPACK_IMPORTED_MODULE_0__);

const apiKeyCache = {
    tag: {
        byId (id) {
            return `apiKeys-${id}`;
        },
        byEnvironmentId (environmentId) {
            return `environments-${environmentId}-apiKeys`;
        },
        byHashedKey (hashedKey) {
            return `apiKeys-${hashedKey}-apiKey`;
        }
    },
    revalidate ({ id, environmentId, hashedKey }) {
        if (id) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byId(id));
        }
        if (environmentId) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byEnvironmentId(environmentId));
        }
        if (hashedKey) {
            (0,next_cache__WEBPACK_IMPORTED_MODULE_0__.revalidateTag)(this.tag.byHashedKey(hashedKey));
        }
    }
};


/***/ }),

/***/ 596379:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   od: () => (/* binding */ getTeamPermissionFlags)
/* harmony export */ });
/* unused harmony exports TeamPermissionMapping, TeamRoleMapping, getTeamAccessFlags */
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(896330);
/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);

const TeamPermissionMapping = {
    [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ProjectTeamPermission.read]: "Read",
    [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ProjectTeamPermission.readWrite]: "Read & write",
    [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ProjectTeamPermission.manage]: "Manage"
};
const TeamRoleMapping = {
    [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.TeamUserRole.admin]: "Team Admin",
    [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.TeamUserRole.contributor]: "Contributor"
};
const getTeamAccessFlags = (role)=>{
    const isAdmin = role === TeamUserRole.admin;
    const isContributor = role === TeamUserRole.contributor;
    return {
        isAdmin,
        isContributor
    };
};
const getTeamPermissionFlags = (permissionLevel)=>{
    const hasReadAccess = permissionLevel === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ProjectTeamPermission.read;
    const hasReadWriteAccess = permissionLevel === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ProjectTeamPermission.readWrite;
    const hasManageAccess = permissionLevel === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ProjectTeamPermission.manage;
    return {
        hasReadAccess,
        hasReadWriteAccess,
        hasManageAccess
    };
};


/***/ }),

/***/ 110679:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EditAPIKeys: () => (/* binding */ EditAPIKeys)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const EditAPIKeys = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call EditAPIKeys() from the server but EditAPIKeys is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/modules/projects/settings/api-keys/components/edit-api-keys.tsx",
"EditAPIKeys",
);

/***/ }),

/***/ 722628:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   APIKeysLoading: () => (/* binding */ APIKeysLoading)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const APIKeysLoading = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call APIKeysLoading() from the server but APIKeysLoading is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/modules/projects/settings/api-keys/loading.tsx",
"APIKeysLoading",
);

/***/ }),

/***/ 881485:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Y: () => (/* binding */ EnvironmentNotice)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(891069);
// EXTERNAL MODULE: ./tolgee/server.tsx + 2 modules
var server = __webpack_require__(186184);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/createLucideIcon.js + 3 modules
var createLucideIcon = __webpack_require__(652793);
;// ../../node_modules/lucide-react/dist/esm/icons/lightbulb.js
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Lightbulb = (0,createLucideIcon/* default */.A)("Lightbulb", [
    [
        "path",
        {
            d: "M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",
            key: "1gvzjb"
        }
    ],
    [
        "path",
        {
            d: "M9 18h6",
            key: "x1upvd"
        }
    ],
    [
        "path",
        {
            d: "M10 22h4",
            key: "ceow96"
        }
    ]
]);
 //# sourceMappingURL=lightbulb.js.map

// EXTERNAL MODULE: ../../packages/lib/constants.ts
var constants = __webpack_require__(836919);
// EXTERNAL MODULE: ../../packages/lib/environment/service.ts
var service = __webpack_require__(32135);
;// ./modules/ui/components/environment-notice/index.tsx





const EnvironmentNotice = async ({ environmentId, subPageUrl })=>{
    const t = await (0,server/* getTranslate */.r)();
    const environment = await (0,service/* getEnvironment */.uc)(environmentId);
    if (!environment) {
        throw new Error("Environment not found");
    }
    const environments = await (0,service/* getEnvironments */.DL)(environment.projectId);
    const otherEnvironmentId = environments.filter((e)=>e.id !== environment.id)[0].id;
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "mt-4 flex max-w-4xl items-center space-y-4 rounded-lg border border-blue-100 bg-blue-50 p-4 text-sm text-blue-900 shadow-sm md:space-y-0 md:text-base",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(Lightbulb, {
                className: "mr-3 h-4 w-4 text-blue-400"
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("p", {
                className: "text-sm",
                children: [
                    t("common.environment_notice", {
                        environment: environment.type
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("a", {
                        href: `${constants/* WEBAPP_URL */.YW}/environments/${otherEnvironmentId}${subPageUrl}`,
                        className: "ml-1 cursor-pointer text-sm underline",
                        children: [
                            t("common.switch_to", {
                                environment: environment.type === "production" ? "Development" : "Production"
                            }),
                            "."
                        ]
                    })
                ]
            })
        ]
    });
};


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8079,3073,7863,5069,255,9759,6626,5570,1238,2021,9069,2195,7762,1469,5294,4900,6911,2075,1659,5667,6689,2446,9726,497,4218,9325,8785,3798,5604,3687,7864,8046,8235,5752,3840,9160,4660,8310,1612,2615], () => (__webpack_exec__(663003)));
module.exports = __webpack_exports__;

})();
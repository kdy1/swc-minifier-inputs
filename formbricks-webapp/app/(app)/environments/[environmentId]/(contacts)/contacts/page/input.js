(() => {
var exports = {};
exports.id = 4276;
exports.ids = [4276];
exports.modules = {

/***/ 191043:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ 741000:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-presigned-post");

/***/ }),

/***/ 531701:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ 896330:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ 560483:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client/scripts/default-index.js");

/***/ }),

/***/ 710846:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.prod.js");

/***/ }),

/***/ 419121:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ 903295:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ 529294:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ 663033:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ 912412:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 979428:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 455511:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 594735:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 629021:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 79748:
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ 781630:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 55591:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 491645:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 321820:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 333873:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 111723:
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ 927910:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 134631:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 583997:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 379551:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 328354:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 173566:
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ 74075:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 504573:
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ 977598:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 973024:
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ 937067:
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ 344708:
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ 777030:
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ 176760:
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ 1708:
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ 157075:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ 337830:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ 173136:
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ 257975:
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ 638522:
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ 82601:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(290735);
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(291232);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(272914);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(240085);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
const module0 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 86397));
const module1 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 836653));
const module2 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 956791));
const module3 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module4 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module5 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 524160));
const module6 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module7 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module8 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 830691));
const page9 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 793914));


// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        '(app)',
        {
        children: [
        'environments',
        {
        children: [
        '[environmentId]',
        {
        children: [
        '(contacts)',
        {
        children: [
        'contacts',
        {
        children: ['__PAGE__', {}, {
          page: [page9, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/(contacts)/contacts/page.tsx"],
          
        }]
      },
        {
        
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module8, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/layout.tsx"],
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module5, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/layout.tsx"],
'forbidden': [module6, "next/dist/client/components/forbidden-error"],
'unauthorized': [module7, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      },
        {
        'layout': [module0, "/Users/kdy1/projects/formbricks/apps/web/app/layout.tsx"],
'error': [module1, "/Users/kdy1/projects/formbricks/apps/web/app/error.tsx"],
'not-found': [module2, "/Users/kdy1/projects/formbricks/apps/web/app/not-found.tsx"],
'forbidden': [module3, "next/dist/client/components/forbidden-error"],
'unauthorized': [module4, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      }.children;
const pages = ["/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/(contacts)/contacts/page.tsx"];


const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({
    definition: {
        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/(app)/environments/[environmentId]/(contacts)/contacts/page",
        pathname: "/environments/[environmentId]/contacts",
        // The following aren't used in production.
        bundlePath: '',
        filename: '',
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 38766:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "7f11f2efac37ac84796e6cb223722dbe2e808e177f": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.mi),
/* harmony export */   "7f12957c3365cc2950bdc48f0118f82439eb6c23ec": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.Dp),
/* harmony export */   "7f12c609da9913f184fbd147593babde9f9bde2e7d": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_modules_ee_contacts_actions_ts__WEBPACK_IMPORTED_MODULE_3__.uc),
/* harmony export */   "7f20db167926d501ff62b9525526548773c8a436d4": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.l5),
/* harmony export */   "7f2431fc3b8c6c124a1868f9a0b34d77983cdb9649": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_app_app_environments_environmentId_actions_actions_ts__WEBPACK_IMPORTED_MODULE_0__.aX),
/* harmony export */   "7f24b3d27813511aef08364975a20983e61a3dde87": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_app_app_environments_environmentId_actions_actions_ts__WEBPACK_IMPORTED_MODULE_0__.bN),
/* harmony export */   "7f2aab56d1389d0c3027efd40998d972d4268e90aa": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_modules_ee_contacts_actions_ts__WEBPACK_IMPORTED_MODULE_3__.QF),
/* harmony export */   "7f36cf02b548a01d85112f587591e8c1e8390fa538": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.Xj),
/* harmony export */   "7f4f2c9c8b657cf906e9a25e65dafac6ec65967916": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.O0),
/* harmony export */   "7f4fa35baa8c62da2750fa071953797195fb3181bf": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_modules_ee_contacts_actions_ts__WEBPACK_IMPORTED_MODULE_3__.sY),
/* harmony export */   "7f540889be00b7aa8c6ff1edc5cd79ece876954fd3": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.I_),
/* harmony export */   "7f60061b4b6be335eaa2facd1c5d8129b87f6923f4": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.Bx),
/* harmony export */   "7f607ac975565ce495ac2952cf2bd35183ca9684ec": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_app_app_environments_environmentId_actions_actions_ts__WEBPACK_IMPORTED_MODULE_0__.gn),
/* harmony export */   "7f670a0537f96de8b5156e1b206124b2a990484370": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.CG),
/* harmony export */   "7f74bd40a1f82de833915085152910f3ebd525b356": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.Uo),
/* harmony export */   "7f82763127a11eaaa934ce7fb0ffd1f148bfd60c06": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_app_app_environments_environmentId_actions_actions_ts__WEBPACK_IMPORTED_MODULE_0__.ir),
/* harmony export */   "7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.Wy),
/* harmony export */   "7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.bH),
/* harmony export */   "7fc6abb0838b6422ef7e81141fd6603883cd1990cf": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.YE),
/* harmony export */   "7fc856fe5dd5f698d2f54dacf4280d447336780427": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.Z0),
/* harmony export */   "7fcda0e6bf50febdf861015e25ebdf74068a488dde": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.bl),
/* harmony export */   "7fcfea9518c327899180b23cb3055005ba65cdef33": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.rg),
/* harmony export */   "7fdb06c584a2145e0f48be9ead409fc7f774731fde": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.uc),
/* harmony export */   "7fdcbaf3445e783557d350b55d91be1398fafca7d3": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.zv),
/* harmony export */   "7fe763f2c0d5f307cc75c26f23c693a54ac24a3112": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.U1),
/* harmony export */   "7ff27151c29d7402abd744ae983a2c25b016ccf26f": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_modules_organization_actions_ts__WEBPACK_IMPORTED_MODULE_2__.s),
/* harmony export */   "7ffb22c619704253744e9b5fea4eccca8b0808fb64": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__.kn)
/* harmony export */ });
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_app_app_environments_environmentId_actions_actions_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(933166);
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_lib_utils_services_ts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(883212);
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_modules_organization_actions_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57841);
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_modules_ee_contacts_actions_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(416428);






























/***/ }),

/***/ 901913:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "40edaf1f3d8a7e5822890f9c7718874668a1f0df8a": () => (/* reexport safe */ _Users_kdy1_projects_formbricks_apps_web_modules_ee_contacts_page_tsx__WEBPACK_IMPORTED_MODULE_0__.x)
/* harmony export */ });
/* harmony import */ var _Users_kdy1_projects_formbricks_apps_web_modules_ee_contacts_page_tsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(166617);




/***/ }),

/***/ 873043:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 304967));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 833249));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 853648, 23));


/***/ }),

/***/ 133291:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 400692));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 342699));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 36888, 23));


/***/ }),

/***/ 400692:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  ContactDataView: () => (/* binding */ ContactDataView)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(642725);
// EXTERNAL MODULE: ./modules/ui/components/loading-spinner/index.tsx
var loading_spinner = __webpack_require__(829884);
// EXTERNAL MODULE: ../../node_modules/lodash/debounce.js
var debounce = __webpack_require__(359174);
var debounce_default = /*#__PURE__*/__webpack_require__.n(debounce);
// EXTERNAL MODULE: ../../node_modules/next/dist/shared/lib/app-dynamic.js
var app_dynamic = __webpack_require__(946377);
var app_dynamic_default = /*#__PURE__*/__webpack_require__.n(app_dynamic);
;// ../../node_modules/next/dist/api/app-dynamic.js



//# sourceMappingURL=app-dynamic.js.map
// EXTERNAL MODULE: ../../node_modules/next/dist/api/navigation.js
var navigation = __webpack_require__(470207);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js
var react = __webpack_require__(891616);
// EXTERNAL MODULE: ../../node_modules/react-hot-toast/dist/index.mjs + 1 modules
var dist = __webpack_require__(986090);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js
var action_client_wrapper = __webpack_require__(308441);
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7f2aab56d1389d0c3027efd40998d972d4268e90aa&name=getContactsAction!

const getContactsAction = /*#__PURE__*/(0,action_client_wrapper.createServerReference)("7f2aab56d1389d0c3027efd40998d972d4268e90aa", action_client_wrapper.callServer, undefined, action_client_wrapper.findSourceMapURL, "getContactsAction")
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7f12c609da9913f184fbd147593babde9f9bde2e7d&name=deleteContactAction!
var next_flight_server_reference_proxy_loaderid_7f12c609da9913f184fbd147593babde9f9bde2e7d_name_deleteContactAction_ = __webpack_require__(289463);
;// ./modules/ee/contacts/components/contact-data-view.tsx
/* __next_internal_client_entry_do_not_use__ ContactDataView auto */ 








const ContactsTableDynamic = app_dynamic_default()(async ()=>{
     true && /*require.resolve*/(null /* weak dependency, without id */);
}, {
    loadableGenerated: {
        modules: [
            "modules/ee/contacts/components/contact-data-view.tsx -> " + "./contacts-table"
        ]
    },
    loading: ()=>/*#__PURE__*/ (0,react_jsx_runtime.jsx)(loading_spinner.LoadingSpinner, {}),
    ssr: false
});
const ContactDataView = ({ environment, itemsPerPage, contactAttributeKeys, isReadOnly, hasMore: initialHasMore, initialContacts, refreshContacts })=>{
    const router = (0,navigation.useRouter)();
    const [contacts, setContacts] = (0,react.useState)([
        ...initialContacts
    ]);
    const [hasMore, setHasMore] = (0,react.useState)(initialHasMore);
    const [loadingNextPage, setLoadingNextPage] = (0,react.useState)(false);
    const [searchValue, setSearchValue] = (0,react.useState)("");
    const [isDataLoaded, setIsDataLoaded] = (0,react.useState)(true);
    const isFirstRender = (0,react.useRef)(true);
    const environmentAttributes = (0,react.useMemo)(()=>{
        return contactAttributeKeys.filter((attr)=>![
                "userId",
                "email",
                "firstName",
                "lastName"
            ].includes(attr.key));
    }, [
        contactAttributeKeys
    ]);
    (0,react.useEffect)(()=>{
        if (!isFirstRender.current) {
            const fetchData = async ()=>{
                setIsDataLoaded(false);
                try {
                    setHasMore(true);
                    const getPersonActionData = await getContactsAction({
                        environmentId: environment.id,
                        offset: 0,
                        searchValue
                    });
                    const personData = getPersonActionData?.data;
                    if (getPersonActionData?.data) {
                        setContacts(getPersonActionData.data);
                    }
                    if (personData && personData.length < itemsPerPage) {
                        setHasMore(false);
                    }
                } catch (error) {
                    console.error("Error fetching people data:", error);
                    dist/* default */.Ay.error("Error fetching people data. Please try again.");
                } finally{
                    setIsDataLoaded(true);
                }
            };
            const debouncedFetchData = debounce_default()(fetchData, 300);
            debouncedFetchData();
            return ()=>{
                debouncedFetchData.cancel();
            };
        }
    }, [
        environment.id,
        itemsPerPage,
        searchValue
    ]);
    (0,react.useEffect)(()=>{
        if (isFirstRender.current) {
            isFirstRender.current = false;
        }
    }, []);
    // Fetch next page of contacts
    const fetchNextPage = async ()=>{
        if (hasMore && !loadingNextPage) {
            setLoadingNextPage(true);
            try {
                const contactsResponse = await getContactsAction({
                    environmentId: environment.id,
                    offset: contacts.length,
                    searchValue
                });
                const contactsData = contactsResponse?.data || [];
                setContacts((prevContacts)=>[
                        ...prevContacts,
                        ...contactsData
                    ]);
                if (contactsData.length < itemsPerPage) {
                    setHasMore(false);
                }
            } catch (error) {
                console.error("Error fetching next page of contacts:", error);
            } finally{
                setLoadingNextPage(false);
            }
        }
    };
    // Delete selected contacts
    const deleteContacts = async (contactIds)=>{
        await Promise.all(contactIds.map((contactId)=>(0,next_flight_server_reference_proxy_loaderid_7f12c609da9913f184fbd147593babde9f9bde2e7d_name_deleteContactAction_/* deleteContactAction */.u)({
                contactId
            })));
        setContacts((prevContacts)=>prevContacts.filter((contact)=>!contactIds.includes(contact.id)));
        router.refresh();
    };
    // Prepare data for the ContactTable component
    const contactsTableData = (0,react.useMemo)(()=>{
        return contacts.map((contact)=>({
                id: contact.id,
                userId: contact.attributes.userId ?? "",
                email: contact.attributes.email ?? "",
                firstName: contact.attributes.firstName ?? "",
                lastName: contact.attributes.lastName ?? "",
                attributes: (environmentAttributes ?? []).map((attr)=>({
                        key: attr.key,
                        name: attr.name,
                        value: contact.attributes[attr.key] ?? ""
                    }))
            }));
    }, [
        contacts,
        environmentAttributes
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(ContactsTableDynamic, {
        data: contactsTableData,
        fetchNextPage: fetchNextPage,
        hasMore: hasMore,
        isDataLoaded: isFirstRender.current ? true : isDataLoaded,
        deleteContacts: deleteContacts,
        environmentId: environment.id,
        searchValue: searchValue,
        setSearchValue: setSearchValue,
        isReadOnly: isReadOnly,
        refreshContacts: refreshContacts
    });
};


/***/ }),

/***/ 342699:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  UploadContactsCSVButton: () => (/* binding */ UploadContactsCSVButton)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(642725);
// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(856763);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js
var action_client_wrapper = __webpack_require__(308441);
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7f4fa35baa8c62da2750fa071953797195fb3181bf&name=createContactsFromCSVAction!

const createContactsFromCSVAction = /*#__PURE__*/(0,action_client_wrapper.createServerReference)("7f4fa35baa8c62da2750fa071953797195fb3181bf", action_client_wrapper.callServer, undefined, action_client_wrapper.findSourceMapURL, "createContactsFromCSVAction")
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js
var react = __webpack_require__(891616);
;// ./modules/ee/contacts/components/csv-table.tsx


const CsvTable = ({ data })=>{
    if (data.length === 0) {
        return /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
            children: "No data available"
        });
    }
    const columns = Object.keys(data[0]);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "w-full rounded-md hover:overflow-auto",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                className: "grid gap-4 border-b-2 border-slate-100 bg-slate-100 p-4 text-left",
                style: {
                    gridTemplateColumns: `repeat(${columns.length}, minmax(0, 1fr))`
                },
                children: columns.map((header, index)=>/*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                        className: "overflow-hidden text-ellipsis whitespace-nowrap text-sm font-semibold capitalize",
                        children: header.replace(/_/g, " ")
                    }, index))
            }),
            data.map((row, rowIndex)=>/*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                    className: "grid gap-4 border-b border-gray-200 bg-white p-4 text-left last:border-b-0",
                    style: {
                        gridTemplateColumns: `repeat(${columns.length}, minmax(0, 1fr))`
                    },
                    children: columns.map((header, colIndex)=>/*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                            className: "overflow-hidden text-ellipsis whitespace-nowrap text-sm",
                            children: row[header]
                        }, colIndex))
                }, rowIndex))
        ]
    });
};

// EXTERNAL MODULE: ./modules/ui/components/button/index.tsx
var components_button = __webpack_require__(248852);
// EXTERNAL MODULE: ./modules/ui/components/command/index.tsx
var command = __webpack_require__(454319);
// EXTERNAL MODULE: ./modules/ui/components/popover/index.tsx
var popover = __webpack_require__(10015);
// EXTERNAL MODULE: ../../node_modules/@tolgee/react/dist/tolgee-react.esm.js
var tolgee_react_esm = __webpack_require__(397674);
;// ./modules/ee/contacts/components/upload-contacts-attribute-combobox.tsx
/* __next_internal_client_entry_do_not_use__ UploadContactsAttributeCombobox auto */ 





const UploadContactsAttributeCombobox = ({ keys, addKey, createKey, searchValue, setSearchValue, open, setOpen, currentKey })=>{
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    (0,react.useEffect)(()=>{
        // reset search value and value when closing the combobox
        if (!open) {
            setSearchValue("");
        }
    }, [
        open,
        setSearchValue
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(popover/* Popover */.AM, {
        open: open,
        onOpenChange: setOpen,
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(popover/* PopoverTrigger */.Wv, {
                asChild: true,
                children: currentKey ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                    variant: "ghost",
                    size: "sm",
                    className: "border border-slate-300",
                    "aria-expanded": open,
                    children: currentKey.label
                }) : /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                    variant: "ghost",
                    size: "sm",
                    className: "border border-slate-300",
                    "aria-expanded": open,
                    children: t("environments.contacts.select_attribute")
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(popover/* PopoverContent */.hl, {
                className: "h-full w-[200px] overflow-y-auto p-0",
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(command/* Command */.uB, {
                    filter: (value, search)=>{
                        if (value === "_create") {
                            return 1;
                        }
                        const foundLabel = keys.find((tag)=>tag.value.toLowerCase() === value)?.label ?? "";
                        if (foundLabel.toLowerCase().includes(search.toLowerCase())) {
                            return 1;
                        }
                        return 0;
                    },
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                            className: "p-1",
                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(command/* CommandInput */.G7, {
                                placeholder: keys?.length === 0 ? "Add attribute" : t("environments.contacts.upload_contacts_modal_attributes_search_or_add"),
                                className: "border-b border-none border-transparent shadow-none outline-0 ring-offset-transparent focus:border-none focus:border-transparent focus:shadow-none focus:outline-0 focus:ring-offset-transparent",
                                value: searchValue,
                                onValueChange: (search)=>setSearchValue(search),
                                onKeyDown: (e)=>{
                                    if (e.key === "Enter" && searchValue !== "") {
                                        if (!keys.find((tag)=>tag?.label?.toLowerCase().includes(searchValue?.toLowerCase()))) {
                                            createKey(searchValue);
                                        }
                                    }
                                }
                            })
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)(command/* CommandList */.oI, {
                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(command/* CommandGroup */.L$, {
                                children: [
                                    keys.map((tag)=>{
                                        return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(command/* CommandItem */.h_, {
                                            value: tag.value,
                                            onSelect: (currentValue)=>{
                                                setOpen(false);
                                                addKey(currentValue);
                                            },
                                            className: "hover:cursor-pointer hover:bg-slate-50",
                                            children: tag.label
                                        }, tag.value);
                                    }),
                                    searchValue !== "" && !keys.find((tag)=>tag.label === searchValue) && !keys.find((tag)=>tag.label === searchValue) && /*#__PURE__*/ (0,react_jsx_runtime.jsx)(command/* CommandItem */.h_, {
                                        value: "_create",
                                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("button", {
                                            onClick: ()=>createKey(searchValue),
                                            className: "h-8 w-full text-left hover:cursor-pointer hover:bg-slate-50 disabled:cursor-not-allowed disabled:opacity-50",
                                            disabled: !!keys.find((tag)=>tag.label === searchValue),
                                            children: [
                                                "+ Add ",
                                                searchValue
                                            ]
                                        })
                                    })
                                ]
                            })
                        })
                    ]
                })
            })
        ]
    });
};

// EXTERNAL MODULE: ./modules/ui/components/badge/index.tsx
var badge = __webpack_require__(661989);
// EXTERNAL MODULE: ../../node_modules/@paralleldrive/cuid2/index.js
var cuid2 = __webpack_require__(489415);
;// ./modules/ee/contacts/components/upload-contacts-attribute.tsx
/* __next_internal_client_entry_do_not_use__ UploadContactsAttributes auto */ 





const UploadContactsAttributes = ({ attributeMap, contactAttributeKeys, setAttributeMap, csvColumn })=>{
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const [searchValue, setSearchValue] = (0,react.useState)("");
    const [open, setOpen] = (0,react.useState)(false);
    const [isNewTag, setIsNewTag] = (0,react.useState)(false);
    // Initialize tags from contact attribute keys
    const [keys, setKeys] = (0,react.useState)(contactAttributeKeys.map((attrKey)=>({
            label: attrKey.name ?? attrKey.key,
            value: attrKey.id
        })));
    // Create a mapping of attribute IDs to their names/keys
    const attributeKeyMap = (0,react.useMemo)(()=>{
        return keys.reduce((acc, tag)=>{
            acc[tag.value] = tag.label;
            return acc;
        }, {});
    }, [
        keys
    ]);
    // State for the currently selected tag
    const [currentKey, setCurrentKey] = (0,react.useState)(()=>{
        const mappedValue = attributeMap[csvColumn];
        if (!mappedValue) return null;
        // Find the matching tag to get its label
        const matchingTag = keys.find((tag)=>tag.value === mappedValue);
        if (matchingTag) {
            return matchingTag;
        }
        // If no matching tag found but we have a mapped value, create a tag for it
        return {
            label: attributeKeyMap[mappedValue] || mappedValue,
            value: mappedValue
        };
    });
    // Update currentTag when attributeMap changes
    (0,react.useEffect)(()=>{
        const mappedValue = attributeMap[csvColumn];
        if (!mappedValue) {
            setCurrentKey(null);
            return;
        }
        // Find the matching tag to get its label
        const matchingTag = keys.find((tag)=>tag.value === mappedValue);
        if (matchingTag) {
            setCurrentKey(matchingTag);
        } else {
            // If no matching tag found, create one with the mapped value
            setCurrentKey({
                label: attributeKeyMap[mappedValue] || mappedValue,
                value: mappedValue
            });
        }
    }, [
        attributeMap,
        csvColumn,
        attributeKeyMap,
        keys
    ]);
    const handleAddAttribute = (value)=>{
        // Find the tag that matches the selected value
        const selectedTag = keys.find((tag)=>tag.value === value);
        if (!selectedTag) return;
        // Update the currentTag
        setCurrentKey(selectedTag);
        // Update the attributeMap
        setAttributeMap((prev)=>({
                ...prev,
                [csvColumn]: value
            }));
    };
    const handleCreateTag = (value)=>{
        const cuid = (0,cuid2/* createId */.sX)();
        const newTag = {
            label: value,
            value: cuid
        };
        // Add the new tag to the tags list
        setKeys((prev)=>[
                ...prev,
                newTag
            ]);
        // Set the new tag as current
        setCurrentKey(newTag);
        // Update the attribute map with the ID
        setAttributeMap((prev)=>({
                ...prev,
                [csvColumn]: value.trim()
            }));
        // Close the combobox and clear search
        setOpen(false);
        setSearchValue("");
    };
    (0,react.useEffect)(()=>{
        if (currentKey) {
            const _isNewTag = contactAttributeKeys.findIndex((attrKey)=>attrKey.id === currentKey.value) === -1;
            setIsNewTag(_isNewTag);
        }
    }, [
        contactAttributeKeys,
        currentKey
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "flex w-full items-center justify-start gap-4",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                className: "w-25 overflow-hidden text-ellipsis font-medium text-slate-700",
                children: csvColumn
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("h4", {
                className: "text-sm font-medium text-slate-500",
                children: t("environments.contacts.upload_contacts_modal_attributes_should_be_mapped_to")
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                className: "flex flex-1 items-center gap-2",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(UploadContactsAttributeCombobox, {
                        open: open,
                        setOpen: setOpen,
                        addKey: handleAddAttribute,
                        currentKey: currentKey,
                        searchValue: searchValue,
                        setSearchValue: setSearchValue,
                        keys: keys,
                        createKey: handleCreateTag
                    }),
                    isNewTag ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)(badge/* Badge */.E, {
                        size: "normal",
                        type: "success",
                        className: "rounded-md",
                        text: t("environments.contacts.upload_contacts_modal_attributes_new")
                    }) : null
                ]
            })
        ]
    });
};

// EXTERNAL MODULE: ../../node_modules/zod/lib/index.mjs
var lib = __webpack_require__(99922);
;// ./modules/ee/contacts/types/contact.ts

const ZContact = lib.z.object({
    id: lib.z.string().cuid2(),
    createdAt: lib.z.date(),
    updatedAt: lib.z.date(),
    environmentId: lib.z.string().cuid2()
});
const ZContactTableAttributeData = lib.z.object({
    key: lib.z.string(),
    name: lib.z.string().nullable(),
    value: lib.z.string().nullable()
});
const ZContactTableData = lib.z.object({
    id: lib.z.string(),
    userId: lib.z.string(),
    email: lib.z.string(),
    firstName: lib.z.string(),
    lastName: lib.z.string(),
    attributes: lib.z.array(ZContactTableAttributeData)
});
const ZContactWithAttributes = ZContact.extend({
    attributes: lib.z.record(lib.z.string())
});
// types related to the csv upload:
const ZContactCSVDuplicateAction = lib.z.enum([
    "skip",
    "update",
    "overwrite"
]);
const ZContactCSVUploadResponse = lib.z.array(lib.z.record(lib.z.string())).max(10000, {
    message: "Maximum 10000 records allowed at a time."
}).superRefine((data, ctx)=>{
    for (const record of data){
        if (!Object.keys(record).includes("email")) {
            return ctx.addIssue({
                code: lib.z.ZodIssueCode.custom,
                message: "Missing email field for one or more records"
            });
        }
        if (!record.email) {
            return ctx.addIssue({
                code: lib.z.ZodIssueCode.custom,
                message: "Email field is empty for one or more records"
            });
        }
    }
    // check for duplicate emails
    const emails = data.map((record)=>record.email);
    const emailSet = new Set(emails);
    if (emails.length !== emailSet.size) {
        return ctx.addIssue({
            code: lib.z.ZodIssueCode.custom,
            message: "Duplicate emails found in the records"
        });
    }
    // check for duplicate userIds if present
    const userIds = data.map((record)=>record.userId).filter(Boolean);
    if (userIds?.length > 0) {
        const userIdSet = new Set(userIds);
        if (userIds.length !== userIdSet.size) {
            return ctx.addIssue({
                code: lib.z.ZodIssueCode.custom,
                message: "Duplicate userIds found in the records"
            });
        }
    }
});
const ZContactCSVAttributeMap = lib.z.record(lib.z.string(), lib.z.string()).superRefine((attributeMap, ctx)=>{
    const values = Object.values(attributeMap);
    if (new Set(values).size !== values.length) {
        return ctx.addIssue({
            code: lib.z.ZodIssueCode.custom,
            message: "Attribute map contains duplicate values"
        });
    }
});

// EXTERNAL MODULE: ./modules/ui/components/modal/index.tsx
var modal = __webpack_require__(383207);
// EXTERNAL MODULE: ./modules/ui/components/styling-tabs/index.tsx
var styling_tabs = __webpack_require__(862371);
;// ../../node_modules/csv-parse/lib/api/CsvError.js
class CsvError extends Error {
  constructor(code, message, options, ...contexts) {
    if (Array.isArray(message)) message = message.join(" ").trim();
    super(message);
    if (Error.captureStackTrace !== undefined) {
      Error.captureStackTrace(this, CsvError);
    }
    this.code = code;
    for (const context of contexts) {
      for (const key in context) {
        const value = context[key];
        this[key] = Buffer.isBuffer(value)
          ? value.toString(options.encoding)
          : value == null
            ? value
            : JSON.parse(JSON.stringify(value));
      }
    }
  }
}



;// ../../node_modules/csv-parse/lib/utils/is_object.js
const is_object = function (obj) {
  return typeof obj === "object" && obj !== null && !Array.isArray(obj);
};



;// ../../node_modules/csv-parse/lib/api/normalize_columns_array.js



const normalize_columns_array = function (columns) {
  const normalizedColumns = [];
  for (let i = 0, l = columns.length; i < l; i++) {
    const column = columns[i];
    if (column === undefined || column === null || column === false) {
      normalizedColumns[i] = { disabled: true };
    } else if (typeof column === "string") {
      normalizedColumns[i] = { name: column };
    } else if (is_object(column)) {
      if (typeof column.name !== "string") {
        throw new CsvError("CSV_OPTION_COLUMNS_MISSING_NAME", [
          "Option columns missing name:",
          `property "name" is required at position ${i}`,
          "when column is an object literal",
        ]);
      }
      normalizedColumns[i] = column;
    } else {
      throw new CsvError("CSV_INVALID_COLUMN_DEFINITION", [
        "Invalid column definition:",
        "expect a string or a literal object,",
        `got ${JSON.stringify(column)} at position ${i}`,
      ]);
    }
  }
  return normalizedColumns;
};



;// ../../node_modules/csv-parse/lib/utils/ResizeableBuffer.js
class ResizeableBuffer {
  constructor(size = 100) {
    this.size = size;
    this.length = 0;
    this.buf = Buffer.allocUnsafe(size);
  }
  prepend(val) {
    if (Buffer.isBuffer(val)) {
      const length = this.length + val.length;
      if (length >= this.size) {
        this.resize();
        if (length >= this.size) {
          throw Error("INVALID_BUFFER_STATE");
        }
      }
      const buf = this.buf;
      this.buf = Buffer.allocUnsafe(this.size);
      val.copy(this.buf, 0);
      buf.copy(this.buf, val.length);
      this.length += val.length;
    } else {
      const length = this.length++;
      if (length === this.size) {
        this.resize();
      }
      const buf = this.clone();
      this.buf[0] = val;
      buf.copy(this.buf, 1, 0, length);
    }
  }
  append(val) {
    const length = this.length++;
    if (length === this.size) {
      this.resize();
    }
    this.buf[length] = val;
  }
  clone() {
    return Buffer.from(this.buf.slice(0, this.length));
  }
  resize() {
    const length = this.length;
    this.size = this.size * 2;
    const buf = Buffer.allocUnsafe(this.size);
    this.buf.copy(buf, 0, 0, length);
    this.buf = buf;
  }
  toString(encoding) {
    if (encoding) {
      return this.buf.slice(0, this.length).toString(encoding);
    } else {
      return Uint8Array.prototype.slice.call(this.buf.slice(0, this.length));
    }
  }
  toJSON() {
    return this.toString("utf8");
  }
  reset() {
    this.length = 0;
  }
}

/* harmony default export */ const utils_ResizeableBuffer = (ResizeableBuffer);

;// ../../node_modules/csv-parse/lib/api/init_state.js


// white space characters
// https://en.wikipedia.org/wiki/Whitespace_character
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Character_Classes#Types
// \f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff
const np = 12;
const cr = 13; // `\r`, carriage return, 0x0D in hexadÃ©cimal, 13 in decimal
const nl = 10; // `\n`, newline, 0x0A in hexadecimal, 10 in decimal
const space = 32;
const tab = 9;

const init_state = function (options) {
  return {
    bomSkipped: false,
    bufBytesStart: 0,
    castField: options.cast_function,
    commenting: false,
    // Current error encountered by a record
    error: undefined,
    enabled: options.from_line === 1,
    escaping: false,
    escapeIsQuote:
      Buffer.isBuffer(options.escape) &&
      Buffer.isBuffer(options.quote) &&
      Buffer.compare(options.escape, options.quote) === 0,
    // columns can be `false`, `true`, `Array`
    expectedRecordLength: Array.isArray(options.columns)
      ? options.columns.length
      : undefined,
    field: new utils_ResizeableBuffer(20),
    firstLineToHeaders: options.cast_first_line_to_header,
    needMoreDataSize: Math.max(
      // Skip if the remaining buffer smaller than comment
      options.comment !== null ? options.comment.length : 0,
      // Skip if the remaining buffer can be delimiter
      ...options.delimiter.map((delimiter) => delimiter.length),
      // Skip if the remaining buffer can be escape sequence
      options.quote !== null ? options.quote.length : 0,
    ),
    previousBuf: undefined,
    quoting: false,
    stop: false,
    rawBuffer: new utils_ResizeableBuffer(100),
    record: [],
    recordHasError: false,
    record_length: 0,
    recordDelimiterMaxLength:
      options.record_delimiter.length === 0
        ? 0
        : Math.max(...options.record_delimiter.map((v) => v.length)),
    trimChars: [
      Buffer.from(" ", options.encoding)[0],
      Buffer.from("\t", options.encoding)[0],
    ],
    wasQuoting: false,
    wasRowDelimiter: false,
    timchars: [
      Buffer.from(Buffer.from([cr], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([nl], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([np], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([space], "utf8").toString(), options.encoding),
      Buffer.from(Buffer.from([tab], "utf8").toString(), options.encoding),
    ],
  };
};



;// ../../node_modules/csv-parse/lib/utils/underscore.js
const underscore = function (str) {
  return str.replace(/([A-Z])/g, function (_, match) {
    return "_" + match.toLowerCase();
  });
};



;// ../../node_modules/csv-parse/lib/api/normalize_options.js




const normalize_options = function (opts) {
  const options = {};
  // Merge with user options
  for (const opt in opts) {
    options[underscore(opt)] = opts[opt];
  }
  // Normalize option `encoding`
  // Note: defined first because other options depends on it
  // to convert chars/strings into buffers.
  if (options.encoding === undefined || options.encoding === true) {
    options.encoding = "utf8";
  } else if (options.encoding === null || options.encoding === false) {
    options.encoding = null;
  } else if (
    typeof options.encoding !== "string" &&
    options.encoding !== null
  ) {
    throw new CsvError(
      "CSV_INVALID_OPTION_ENCODING",
      [
        "Invalid option encoding:",
        "encoding must be a string or null to return a buffer,",
        `got ${JSON.stringify(options.encoding)}`,
      ],
      options,
    );
  }
  // Normalize option `bom`
  if (
    options.bom === undefined ||
    options.bom === null ||
    options.bom === false
  ) {
    options.bom = false;
  } else if (options.bom !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_BOM",
      [
        "Invalid option bom:",
        "bom must be true,",
        `got ${JSON.stringify(options.bom)}`,
      ],
      options,
    );
  }
  // Normalize option `cast`
  options.cast_function = null;
  if (
    options.cast === undefined ||
    options.cast === null ||
    options.cast === false ||
    options.cast === ""
  ) {
    options.cast = undefined;
  } else if (typeof options.cast === "function") {
    options.cast_function = options.cast;
    options.cast = true;
  } else if (options.cast !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_CAST",
      [
        "Invalid option cast:",
        "cast must be true or a function,",
        `got ${JSON.stringify(options.cast)}`,
      ],
      options,
    );
  }
  // Normalize option `cast_date`
  if (
    options.cast_date === undefined ||
    options.cast_date === null ||
    options.cast_date === false ||
    options.cast_date === ""
  ) {
    options.cast_date = false;
  } else if (options.cast_date === true) {
    options.cast_date = function (value) {
      const date = Date.parse(value);
      return !isNaN(date) ? new Date(date) : value;
    };
  } else if (typeof options.cast_date !== "function") {
    throw new CsvError(
      "CSV_INVALID_OPTION_CAST_DATE",
      [
        "Invalid option cast_date:",
        "cast_date must be true or a function,",
        `got ${JSON.stringify(options.cast_date)}`,
      ],
      options,
    );
  }
  // Normalize option `columns`
  options.cast_first_line_to_header = null;
  if (options.columns === true) {
    // Fields in the first line are converted as-is to columns
    options.cast_first_line_to_header = undefined;
  } else if (typeof options.columns === "function") {
    options.cast_first_line_to_header = options.columns;
    options.columns = true;
  } else if (Array.isArray(options.columns)) {
    options.columns = normalize_columns_array(options.columns);
  } else if (
    options.columns === undefined ||
    options.columns === null ||
    options.columns === false
  ) {
    options.columns = false;
  } else {
    throw new CsvError(
      "CSV_INVALID_OPTION_COLUMNS",
      [
        "Invalid option columns:",
        "expect an array, a function or true,",
        `got ${JSON.stringify(options.columns)}`,
      ],
      options,
    );
  }
  // Normalize option `group_columns_by_name`
  if (
    options.group_columns_by_name === undefined ||
    options.group_columns_by_name === null ||
    options.group_columns_by_name === false
  ) {
    options.group_columns_by_name = false;
  } else if (options.group_columns_by_name !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",
      [
        "Invalid option group_columns_by_name:",
        "expect an boolean,",
        `got ${JSON.stringify(options.group_columns_by_name)}`,
      ],
      options,
    );
  } else if (options.columns === false) {
    throw new CsvError(
      "CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",
      [
        "Invalid option group_columns_by_name:",
        "the `columns` mode must be activated.",
      ],
      options,
    );
  }
  // Normalize option `comment`
  if (
    options.comment === undefined ||
    options.comment === null ||
    options.comment === false ||
    options.comment === ""
  ) {
    options.comment = null;
  } else {
    if (typeof options.comment === "string") {
      options.comment = Buffer.from(options.comment, options.encoding);
    }
    if (!Buffer.isBuffer(options.comment)) {
      throw new CsvError(
        "CSV_INVALID_OPTION_COMMENT",
        [
          "Invalid option comment:",
          "comment must be a buffer or a string,",
          `got ${JSON.stringify(options.comment)}`,
        ],
        options,
      );
    }
  }
  // Normalize option `comment_no_infix`
  if (
    options.comment_no_infix === undefined ||
    options.comment_no_infix === null ||
    options.comment_no_infix === false
  ) {
    options.comment_no_infix = false;
  } else if (options.comment_no_infix !== true) {
    throw new CsvError(
      "CSV_INVALID_OPTION_COMMENT",
      [
        "Invalid option comment_no_infix:",
        "value must be a boolean,",
        `got ${JSON.stringify(options.comment_no_infix)}`,
      ],
      options,
    );
  }
  // Normalize option `delimiter`
  const delimiter_json = JSON.stringify(options.delimiter);
  if (!Array.isArray(options.delimiter))
    options.delimiter = [options.delimiter];
  if (options.delimiter.length === 0) {
    throw new CsvError(
      "CSV_INVALID_OPTION_DELIMITER",
      [
        "Invalid option delimiter:",
        "delimiter must be a non empty string or buffer or array of string|buffer,",
        `got ${delimiter_json}`,
      ],
      options,
    );
  }
  options.delimiter = options.delimiter.map(function (delimiter) {
    if (delimiter === undefined || delimiter === null || delimiter === false) {
      return Buffer.from(",", options.encoding);
    }
    if (typeof delimiter === "string") {
      delimiter = Buffer.from(delimiter, options.encoding);
    }
    if (!Buffer.isBuffer(delimiter) || delimiter.length === 0) {
      throw new CsvError(
        "CSV_INVALID_OPTION_DELIMITER",
        [
          "Invalid option delimiter:",
          "delimiter must be a non empty string or buffer or array of string|buffer,",
          `got ${delimiter_json}`,
        ],
        options,
      );
    }
    return delimiter;
  });
  // Normalize option `escape`
  if (options.escape === undefined || options.escape === true) {
    options.escape = Buffer.from('"', options.encoding);
  } else if (typeof options.escape === "string") {
    options.escape = Buffer.from(options.escape, options.encoding);
  } else if (options.escape === null || options.escape === false) {
    options.escape = null;
  }
  if (options.escape !== null) {
    if (!Buffer.isBuffer(options.escape)) {
      throw new Error(
        `Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(options.escape)}`,
      );
    }
  }
  // Normalize option `from`
  if (options.from === undefined || options.from === null) {
    options.from = 1;
  } else {
    if (typeof options.from === "string" && /\d+/.test(options.from)) {
      options.from = parseInt(options.from);
    }
    if (Number.isInteger(options.from)) {
      if (options.from < 0) {
        throw new Error(
          `Invalid Option: from must be a positive integer, got ${JSON.stringify(opts.from)}`,
        );
      }
    } else {
      throw new Error(
        `Invalid Option: from must be an integer, got ${JSON.stringify(options.from)}`,
      );
    }
  }
  // Normalize option `from_line`
  if (options.from_line === undefined || options.from_line === null) {
    options.from_line = 1;
  } else {
    if (
      typeof options.from_line === "string" &&
      /\d+/.test(options.from_line)
    ) {
      options.from_line = parseInt(options.from_line);
    }
    if (Number.isInteger(options.from_line)) {
      if (options.from_line <= 0) {
        throw new Error(
          `Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(opts.from_line)}`,
        );
      }
    } else {
      throw new Error(
        `Invalid Option: from_line must be an integer, got ${JSON.stringify(opts.from_line)}`,
      );
    }
  }
  // Normalize options `ignore_last_delimiters`
  if (
    options.ignore_last_delimiters === undefined ||
    options.ignore_last_delimiters === null
  ) {
    options.ignore_last_delimiters = false;
  } else if (typeof options.ignore_last_delimiters === "number") {
    options.ignore_last_delimiters = Math.floor(options.ignore_last_delimiters);
    if (options.ignore_last_delimiters === 0) {
      options.ignore_last_delimiters = false;
    }
  } else if (typeof options.ignore_last_delimiters !== "boolean") {
    throw new CsvError(
      "CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",
      [
        "Invalid option `ignore_last_delimiters`:",
        "the value must be a boolean value or an integer,",
        `got ${JSON.stringify(options.ignore_last_delimiters)}`,
      ],
      options,
    );
  }
  if (options.ignore_last_delimiters === true && options.columns === false) {
    throw new CsvError(
      "CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",
      [
        "The option `ignore_last_delimiters`",
        "requires the activation of the `columns` option",
      ],
      options,
    );
  }
  // Normalize option `info`
  if (
    options.info === undefined ||
    options.info === null ||
    options.info === false
  ) {
    options.info = false;
  } else if (options.info !== true) {
    throw new Error(
      `Invalid Option: info must be true, got ${JSON.stringify(options.info)}`,
    );
  }
  // Normalize option `max_record_size`
  if (
    options.max_record_size === undefined ||
    options.max_record_size === null ||
    options.max_record_size === false
  ) {
    options.max_record_size = 0;
  } else if (
    Number.isInteger(options.max_record_size) &&
    options.max_record_size >= 0
  ) {
    // Great, nothing to do
  } else if (
    typeof options.max_record_size === "string" &&
    /\d+/.test(options.max_record_size)
  ) {
    options.max_record_size = parseInt(options.max_record_size);
  } else {
    throw new Error(
      `Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(options.max_record_size)}`,
    );
  }
  // Normalize option `objname`
  if (
    options.objname === undefined ||
    options.objname === null ||
    options.objname === false
  ) {
    options.objname = undefined;
  } else if (Buffer.isBuffer(options.objname)) {
    if (options.objname.length === 0) {
      throw new Error(`Invalid Option: objname must be a non empty buffer`);
    }
    if (options.encoding === null) {
      // Don't call `toString`, leave objname as a buffer
    } else {
      options.objname = options.objname.toString(options.encoding);
    }
  } else if (typeof options.objname === "string") {
    if (options.objname.length === 0) {
      throw new Error(`Invalid Option: objname must be a non empty string`);
    }
    // Great, nothing to do
  } else if (typeof options.objname === "number") {
    // if(options.objname.length === 0){
    //   throw new Error(`Invalid Option: objname must be a non empty string`);
    // }
    // Great, nothing to do
  } else {
    throw new Error(
      `Invalid Option: objname must be a string or a buffer, got ${options.objname}`,
    );
  }
  if (options.objname !== undefined) {
    if (typeof options.objname === "number") {
      if (options.columns !== false) {
        throw Error(
          "Invalid Option: objname index cannot be combined with columns or be defined as a field",
        );
      }
    } else {
      // A string or a buffer
      if (options.columns === false) {
        throw Error(
          "Invalid Option: objname field must be combined with columns or be defined as an index",
        );
      }
    }
  }
  // Normalize option `on_record`
  if (options.on_record === undefined || options.on_record === null) {
    options.on_record = undefined;
  } else if (typeof options.on_record !== "function") {
    throw new CsvError(
      "CSV_INVALID_OPTION_ON_RECORD",
      [
        "Invalid option `on_record`:",
        "expect a function,",
        `got ${JSON.stringify(options.on_record)}`,
      ],
      options,
    );
  }
  // Normalize option `on_skip`
  // options.on_skip ??= (err, chunk) => {
  //   this.emit('skip', err, chunk);
  // };
  if (
    options.on_skip !== undefined &&
    options.on_skip !== null &&
    typeof options.on_skip !== "function"
  ) {
    throw new Error(
      `Invalid Option: on_skip must be a function, got ${JSON.stringify(options.on_skip)}`,
    );
  }
  // Normalize option `quote`
  if (
    options.quote === null ||
    options.quote === false ||
    options.quote === ""
  ) {
    options.quote = null;
  } else {
    if (options.quote === undefined || options.quote === true) {
      options.quote = Buffer.from('"', options.encoding);
    } else if (typeof options.quote === "string") {
      options.quote = Buffer.from(options.quote, options.encoding);
    }
    if (!Buffer.isBuffer(options.quote)) {
      throw new Error(
        `Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(options.quote)}`,
      );
    }
  }
  // Normalize option `raw`
  if (
    options.raw === undefined ||
    options.raw === null ||
    options.raw === false
  ) {
    options.raw = false;
  } else if (options.raw !== true) {
    throw new Error(
      `Invalid Option: raw must be true, got ${JSON.stringify(options.raw)}`,
    );
  }
  // Normalize option `record_delimiter`
  if (options.record_delimiter === undefined) {
    options.record_delimiter = [];
  } else if (
    typeof options.record_delimiter === "string" ||
    Buffer.isBuffer(options.record_delimiter)
  ) {
    if (options.record_delimiter.length === 0) {
      throw new CsvError(
        "CSV_INVALID_OPTION_RECORD_DELIMITER",
        [
          "Invalid option `record_delimiter`:",
          "value must be a non empty string or buffer,",
          `got ${JSON.stringify(options.record_delimiter)}`,
        ],
        options,
      );
    }
    options.record_delimiter = [options.record_delimiter];
  } else if (!Array.isArray(options.record_delimiter)) {
    throw new CsvError(
      "CSV_INVALID_OPTION_RECORD_DELIMITER",
      [
        "Invalid option `record_delimiter`:",
        "value must be a string, a buffer or array of string|buffer,",
        `got ${JSON.stringify(options.record_delimiter)}`,
      ],
      options,
    );
  }
  options.record_delimiter = options.record_delimiter.map(function (rd, i) {
    if (typeof rd !== "string" && !Buffer.isBuffer(rd)) {
      throw new CsvError(
        "CSV_INVALID_OPTION_RECORD_DELIMITER",
        [
          "Invalid option `record_delimiter`:",
          "value must be a string, a buffer or array of string|buffer",
          `at index ${i},`,
          `got ${JSON.stringify(rd)}`,
        ],
        options,
      );
    } else if (rd.length === 0) {
      throw new CsvError(
        "CSV_INVALID_OPTION_RECORD_DELIMITER",
        [
          "Invalid option `record_delimiter`:",
          "value must be a non empty string or buffer",
          `at index ${i},`,
          `got ${JSON.stringify(rd)}`,
        ],
        options,
      );
    }
    if (typeof rd === "string") {
      rd = Buffer.from(rd, options.encoding);
    }
    return rd;
  });
  // Normalize option `relax_column_count`
  if (typeof options.relax_column_count === "boolean") {
    // Great, nothing to do
  } else if (
    options.relax_column_count === undefined ||
    options.relax_column_count === null
  ) {
    options.relax_column_count = false;
  } else {
    throw new Error(
      `Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(options.relax_column_count)}`,
    );
  }
  if (typeof options.relax_column_count_less === "boolean") {
    // Great, nothing to do
  } else if (
    options.relax_column_count_less === undefined ||
    options.relax_column_count_less === null
  ) {
    options.relax_column_count_less = false;
  } else {
    throw new Error(
      `Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(options.relax_column_count_less)}`,
    );
  }
  if (typeof options.relax_column_count_more === "boolean") {
    // Great, nothing to do
  } else if (
    options.relax_column_count_more === undefined ||
    options.relax_column_count_more === null
  ) {
    options.relax_column_count_more = false;
  } else {
    throw new Error(
      `Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(options.relax_column_count_more)}`,
    );
  }
  // Normalize option `relax_quotes`
  if (typeof options.relax_quotes === "boolean") {
    // Great, nothing to do
  } else if (
    options.relax_quotes === undefined ||
    options.relax_quotes === null
  ) {
    options.relax_quotes = false;
  } else {
    throw new Error(
      `Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(options.relax_quotes)}`,
    );
  }
  // Normalize option `skip_empty_lines`
  if (typeof options.skip_empty_lines === "boolean") {
    // Great, nothing to do
  } else if (
    options.skip_empty_lines === undefined ||
    options.skip_empty_lines === null
  ) {
    options.skip_empty_lines = false;
  } else {
    throw new Error(
      `Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(options.skip_empty_lines)}`,
    );
  }
  // Normalize option `skip_records_with_empty_values`
  if (typeof options.skip_records_with_empty_values === "boolean") {
    // Great, nothing to do
  } else if (
    options.skip_records_with_empty_values === undefined ||
    options.skip_records_with_empty_values === null
  ) {
    options.skip_records_with_empty_values = false;
  } else {
    throw new Error(
      `Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(options.skip_records_with_empty_values)}`,
    );
  }
  // Normalize option `skip_records_with_error`
  if (typeof options.skip_records_with_error === "boolean") {
    // Great, nothing to do
  } else if (
    options.skip_records_with_error === undefined ||
    options.skip_records_with_error === null
  ) {
    options.skip_records_with_error = false;
  } else {
    throw new Error(
      `Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(options.skip_records_with_error)}`,
    );
  }
  // Normalize option `rtrim`
  if (
    options.rtrim === undefined ||
    options.rtrim === null ||
    options.rtrim === false
  ) {
    options.rtrim = false;
  } else if (options.rtrim !== true) {
    throw new Error(
      `Invalid Option: rtrim must be a boolean, got ${JSON.stringify(options.rtrim)}`,
    );
  }
  // Normalize option `ltrim`
  if (
    options.ltrim === undefined ||
    options.ltrim === null ||
    options.ltrim === false
  ) {
    options.ltrim = false;
  } else if (options.ltrim !== true) {
    throw new Error(
      `Invalid Option: ltrim must be a boolean, got ${JSON.stringify(options.ltrim)}`,
    );
  }
  // Normalize option `trim`
  if (
    options.trim === undefined ||
    options.trim === null ||
    options.trim === false
  ) {
    options.trim = false;
  } else if (options.trim !== true) {
    throw new Error(
      `Invalid Option: trim must be a boolean, got ${JSON.stringify(options.trim)}`,
    );
  }
  // Normalize options `trim`, `ltrim` and `rtrim`
  if (options.trim === true && opts.ltrim !== false) {
    options.ltrim = true;
  } else if (options.ltrim !== true) {
    options.ltrim = false;
  }
  if (options.trim === true && opts.rtrim !== false) {
    options.rtrim = true;
  } else if (options.rtrim !== true) {
    options.rtrim = false;
  }
  // Normalize option `to`
  if (options.to === undefined || options.to === null) {
    options.to = -1;
  } else {
    if (typeof options.to === "string" && /\d+/.test(options.to)) {
      options.to = parseInt(options.to);
    }
    if (Number.isInteger(options.to)) {
      if (options.to <= 0) {
        throw new Error(
          `Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(opts.to)}`,
        );
      }
    } else {
      throw new Error(
        `Invalid Option: to must be an integer, got ${JSON.stringify(opts.to)}`,
      );
    }
  }
  // Normalize option `to_line`
  if (options.to_line === undefined || options.to_line === null) {
    options.to_line = -1;
  } else {
    if (typeof options.to_line === "string" && /\d+/.test(options.to_line)) {
      options.to_line = parseInt(options.to_line);
    }
    if (Number.isInteger(options.to_line)) {
      if (options.to_line <= 0) {
        throw new Error(
          `Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(opts.to_line)}`,
        );
      }
    } else {
      throw new Error(
        `Invalid Option: to_line must be an integer, got ${JSON.stringify(opts.to_line)}`,
      );
    }
  }
  return options;
};



;// ../../node_modules/csv-parse/lib/api/index.js





const isRecordEmpty = function (record) {
  return record.every(
    (field) =>
      field == null || (field.toString && field.toString().trim() === ""),
  );
};

const api_cr = 13; // `\r`, carriage return, 0x0D in hexadÃ©cimal, 13 in decimal
const api_nl = 10; // `\n`, newline, 0x0A in hexadecimal, 10 in decimal

const boms = {
  // Note, the following are equals:
  // Buffer.from("\ufeff")
  // Buffer.from([239, 187, 191])
  // Buffer.from('EFBBBF', 'hex')
  utf8: Buffer.from([239, 187, 191]),
  // Note, the following are equals:
  // Buffer.from "\ufeff", 'utf16le
  // Buffer.from([255, 254])
  utf16le: Buffer.from([255, 254]),
};

const transform = function (original_options = {}) {
  const info = {
    bytes: 0,
    comment_lines: 0,
    empty_lines: 0,
    invalid_field_length: 0,
    lines: 1,
    records: 0,
  };
  const options = normalize_options(original_options);
  return {
    info: info,
    original_options: original_options,
    options: options,
    state: init_state(options),
    __needMoreData: function (i, bufLen, end) {
      if (end) return false;
      const { encoding, escape, quote } = this.options;
      const { quoting, needMoreDataSize, recordDelimiterMaxLength } =
        this.state;
      const numOfCharLeft = bufLen - i - 1;
      const requiredLength = Math.max(
        needMoreDataSize,
        // Skip if the remaining buffer smaller than record delimiter
        // If "record_delimiter" is yet to be discovered:
        // 1. It is equals to `[]` and "recordDelimiterMaxLength" equals `0`
        // 2. We set the length to windows line ending in the current encoding
        // Note, that encoding is known from user or bom discovery at that point
        // recordDelimiterMaxLength,
        recordDelimiterMaxLength === 0
          ? Buffer.from("\r\n", encoding).length
          : recordDelimiterMaxLength,
        // Skip if remaining buffer can be an escaped quote
        quoting ? (escape === null ? 0 : escape.length) + quote.length : 0,
        // Skip if remaining buffer can be record delimiter following the closing quote
        quoting ? quote.length + recordDelimiterMaxLength : 0,
      );
      return numOfCharLeft < requiredLength;
    },
    // Central parser implementation
    parse: function (nextBuf, end, push, close) {
      const {
        bom,
        comment_no_infix,
        encoding,
        from_line,
        ltrim,
        max_record_size,
        raw,
        relax_quotes,
        rtrim,
        skip_empty_lines,
        to,
        to_line,
      } = this.options;
      let { comment, escape, quote, record_delimiter } = this.options;
      const { bomSkipped, previousBuf, rawBuffer, escapeIsQuote } = this.state;
      let buf;
      if (previousBuf === undefined) {
        if (nextBuf === undefined) {
          // Handle empty string
          close();
          return;
        } else {
          buf = nextBuf;
        }
      } else if (previousBuf !== undefined && nextBuf === undefined) {
        buf = previousBuf;
      } else {
        buf = Buffer.concat([previousBuf, nextBuf]);
      }
      // Handle UTF BOM
      if (bomSkipped === false) {
        if (bom === false) {
          this.state.bomSkipped = true;
        } else if (buf.length < 3) {
          // No enough data
          if (end === false) {
            // Wait for more data
            this.state.previousBuf = buf;
            return;
          }
        } else {
          for (const encoding in boms) {
            if (boms[encoding].compare(buf, 0, boms[encoding].length) === 0) {
              // Skip BOM
              const bomLength = boms[encoding].length;
              this.state.bufBytesStart += bomLength;
              buf = buf.slice(bomLength);
              // Renormalize original options with the new encoding
              this.options = normalize_options({
                ...this.original_options,
                encoding: encoding,
              });
              // Options will re-evaluate the Buffer with the new encoding
              ({ comment, escape, quote } = this.options);
              break;
            }
          }
          this.state.bomSkipped = true;
        }
      }
      const bufLen = buf.length;
      let pos;
      for (pos = 0; pos < bufLen; pos++) {
        // Ensure we get enough space to look ahead
        // There should be a way to move this out of the loop
        if (this.__needMoreData(pos, bufLen, end)) {
          break;
        }
        if (this.state.wasRowDelimiter === true) {
          this.info.lines++;
          this.state.wasRowDelimiter = false;
        }
        if (to_line !== -1 && this.info.lines > to_line) {
          this.state.stop = true;
          close();
          return;
        }
        // Auto discovery of record_delimiter, unix, mac and windows supported
        if (this.state.quoting === false && record_delimiter.length === 0) {
          const record_delimiterCount = this.__autoDiscoverRecordDelimiter(
            buf,
            pos,
          );
          if (record_delimiterCount) {
            record_delimiter = this.options.record_delimiter;
          }
        }
        const chr = buf[pos];
        if (raw === true) {
          rawBuffer.append(chr);
        }
        if (
          (chr === api_cr || chr === api_nl) &&
          this.state.wasRowDelimiter === false
        ) {
          this.state.wasRowDelimiter = true;
        }
        // Previous char was a valid escape char
        // treat the current char as a regular char
        if (this.state.escaping === true) {
          this.state.escaping = false;
        } else {
          // Escape is only active inside quoted fields
          // We are quoting, the char is an escape chr and there is a chr to escape
          // if(escape !== null && this.state.quoting === true && chr === escape && pos + 1 < bufLen){
          if (
            escape !== null &&
            this.state.quoting === true &&
            this.__isEscape(buf, pos, chr) &&
            pos + escape.length < bufLen
          ) {
            if (escapeIsQuote) {
              if (this.__isQuote(buf, pos + escape.length)) {
                this.state.escaping = true;
                pos += escape.length - 1;
                continue;
              }
            } else {
              this.state.escaping = true;
              pos += escape.length - 1;
              continue;
            }
          }
          // Not currently escaping and chr is a quote
          // TODO: need to compare bytes instead of single char
          if (this.state.commenting === false && this.__isQuote(buf, pos)) {
            if (this.state.quoting === true) {
              const nextChr = buf[pos + quote.length];
              const isNextChrTrimable =
                rtrim && this.__isCharTrimable(buf, pos + quote.length);
              const isNextChrComment =
                comment !== null &&
                this.__compareBytes(comment, buf, pos + quote.length, nextChr);
              const isNextChrDelimiter = this.__isDelimiter(
                buf,
                pos + quote.length,
                nextChr,
              );
              const isNextChrRecordDelimiter =
                record_delimiter.length === 0
                  ? this.__autoDiscoverRecordDelimiter(buf, pos + quote.length)
                  : this.__isRecordDelimiter(nextChr, buf, pos + quote.length);
              // Escape a quote
              // Treat next char as a regular character
              if (
                escape !== null &&
                this.__isEscape(buf, pos, chr) &&
                this.__isQuote(buf, pos + escape.length)
              ) {
                pos += escape.length - 1;
              } else if (
                !nextChr ||
                isNextChrDelimiter ||
                isNextChrRecordDelimiter ||
                isNextChrComment ||
                isNextChrTrimable
              ) {
                this.state.quoting = false;
                this.state.wasQuoting = true;
                pos += quote.length - 1;
                continue;
              } else if (relax_quotes === false) {
                const err = this.__error(
                  new CsvError(
                    "CSV_INVALID_CLOSING_QUOTE",
                    [
                      "Invalid Closing Quote:",
                      `got "${String.fromCharCode(nextChr)}"`,
                      `at line ${this.info.lines}`,
                      "instead of delimiter, record delimiter, trimable character",
                      "(if activated) or comment",
                    ],
                    this.options,
                    this.__infoField(),
                  ),
                );
                if (err !== undefined) return err;
              } else {
                this.state.quoting = false;
                this.state.wasQuoting = true;
                this.state.field.prepend(quote);
                pos += quote.length - 1;
              }
            } else {
              if (this.state.field.length !== 0) {
                // In relax_quotes mode, treat opening quote preceded by chrs as regular
                if (relax_quotes === false) {
                  const info = this.__infoField();
                  const bom = Object.keys(boms)
                    .map((b) =>
                      boms[b].equals(this.state.field.toString()) ? b : false,
                    )
                    .filter(Boolean)[0];
                  const err = this.__error(
                    new CsvError(
                      "INVALID_OPENING_QUOTE",
                      [
                        "Invalid Opening Quote:",
                        `a quote is found on field ${JSON.stringify(info.column)} at line ${info.lines}, value is ${JSON.stringify(this.state.field.toString(encoding))}`,
                        bom ? `(${bom} bom)` : undefined,
                      ],
                      this.options,
                      info,
                      {
                        field: this.state.field,
                      },
                    ),
                  );
                  if (err !== undefined) return err;
                }
              } else {
                this.state.quoting = true;
                pos += quote.length - 1;
                continue;
              }
            }
          }
          if (this.state.quoting === false) {
            const recordDelimiterLength = this.__isRecordDelimiter(
              chr,
              buf,
              pos,
            );
            if (recordDelimiterLength !== 0) {
              // Do not emit comments which take a full line
              const skipCommentLine =
                this.state.commenting &&
                this.state.wasQuoting === false &&
                this.state.record.length === 0 &&
                this.state.field.length === 0;
              if (skipCommentLine) {
                this.info.comment_lines++;
                // Skip full comment line
              } else {
                // Activate records emition if above from_line
                if (
                  this.state.enabled === false &&
                  this.info.lines +
                    (this.state.wasRowDelimiter === true ? 1 : 0) >=
                    from_line
                ) {
                  this.state.enabled = true;
                  this.__resetField();
                  this.__resetRecord();
                  pos += recordDelimiterLength - 1;
                  continue;
                }
                // Skip if line is empty and skip_empty_lines activated
                if (
                  skip_empty_lines === true &&
                  this.state.wasQuoting === false &&
                  this.state.record.length === 0 &&
                  this.state.field.length === 0
                ) {
                  this.info.empty_lines++;
                  pos += recordDelimiterLength - 1;
                  continue;
                }
                this.info.bytes = this.state.bufBytesStart + pos;
                const errField = this.__onField();
                if (errField !== undefined) return errField;
                this.info.bytes =
                  this.state.bufBytesStart + pos + recordDelimiterLength;
                const errRecord = this.__onRecord(push);
                if (errRecord !== undefined) return errRecord;
                if (to !== -1 && this.info.records >= to) {
                  this.state.stop = true;
                  close();
                  return;
                }
              }
              this.state.commenting = false;
              pos += recordDelimiterLength - 1;
              continue;
            }
            if (this.state.commenting) {
              continue;
            }
            if (
              comment !== null &&
              (comment_no_infix === false ||
                (this.state.record.length === 0 &&
                  this.state.field.length === 0))
            ) {
              const commentCount = this.__compareBytes(comment, buf, pos, chr);
              if (commentCount !== 0) {
                this.state.commenting = true;
                continue;
              }
            }
            const delimiterLength = this.__isDelimiter(buf, pos, chr);
            if (delimiterLength !== 0) {
              this.info.bytes = this.state.bufBytesStart + pos;
              const errField = this.__onField();
              if (errField !== undefined) return errField;
              pos += delimiterLength - 1;
              continue;
            }
          }
        }
        if (this.state.commenting === false) {
          if (
            max_record_size !== 0 &&
            this.state.record_length + this.state.field.length > max_record_size
          ) {
            return this.__error(
              new CsvError(
                "CSV_MAX_RECORD_SIZE",
                [
                  "Max Record Size:",
                  "record exceed the maximum number of tolerated bytes",
                  `of ${max_record_size}`,
                  `at line ${this.info.lines}`,
                ],
                this.options,
                this.__infoField(),
              ),
            );
          }
        }
        const lappend =
          ltrim === false ||
          this.state.quoting === true ||
          this.state.field.length !== 0 ||
          !this.__isCharTrimable(buf, pos);
        // rtrim in non quoting is handle in __onField
        const rappend = rtrim === false || this.state.wasQuoting === false;
        if (lappend === true && rappend === true) {
          this.state.field.append(chr);
        } else if (rtrim === true && !this.__isCharTrimable(buf, pos)) {
          return this.__error(
            new CsvError(
              "CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",
              [
                "Invalid Closing Quote:",
                "found non trimable byte after quote",
                `at line ${this.info.lines}`,
              ],
              this.options,
              this.__infoField(),
            ),
          );
        } else {
          if (lappend === false) {
            pos += this.__isCharTrimable(buf, pos) - 1;
          }
          continue;
        }
      }
      if (end === true) {
        // Ensure we are not ending in a quoting state
        if (this.state.quoting === true) {
          const err = this.__error(
            new CsvError(
              "CSV_QUOTE_NOT_CLOSED",
              [
                "Quote Not Closed:",
                `the parsing is finished with an opening quote at line ${this.info.lines}`,
              ],
              this.options,
              this.__infoField(),
            ),
          );
          if (err !== undefined) return err;
        } else {
          // Skip last line if it has no characters
          if (
            this.state.wasQuoting === true ||
            this.state.record.length !== 0 ||
            this.state.field.length !== 0
          ) {
            this.info.bytes = this.state.bufBytesStart + pos;
            const errField = this.__onField();
            if (errField !== undefined) return errField;
            const errRecord = this.__onRecord(push);
            if (errRecord !== undefined) return errRecord;
          } else if (this.state.wasRowDelimiter === true) {
            this.info.empty_lines++;
          } else if (this.state.commenting === true) {
            this.info.comment_lines++;
          }
        }
      } else {
        this.state.bufBytesStart += pos;
        this.state.previousBuf = buf.slice(pos);
      }
      if (this.state.wasRowDelimiter === true) {
        this.info.lines++;
        this.state.wasRowDelimiter = false;
      }
    },
    __onRecord: function (push) {
      const {
        columns,
        group_columns_by_name,
        encoding,
        info,
        from,
        relax_column_count,
        relax_column_count_less,
        relax_column_count_more,
        raw,
        skip_records_with_empty_values,
      } = this.options;
      const { enabled, record } = this.state;
      if (enabled === false) {
        return this.__resetRecord();
      }
      // Convert the first line into column names
      const recordLength = record.length;
      if (columns === true) {
        if (skip_records_with_empty_values === true && isRecordEmpty(record)) {
          this.__resetRecord();
          return;
        }
        return this.__firstLineToColumns(record);
      }
      if (columns === false && this.info.records === 0) {
        this.state.expectedRecordLength = recordLength;
      }
      if (recordLength !== this.state.expectedRecordLength) {
        const err =
          columns === false
            ? new CsvError(
                "CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",
                [
                  "Invalid Record Length:",
                  `expect ${this.state.expectedRecordLength},`,
                  `got ${recordLength} on line ${this.info.lines}`,
                ],
                this.options,
                this.__infoField(),
                {
                  record: record,
                },
              )
            : new CsvError(
                "CSV_RECORD_INCONSISTENT_COLUMNS",
                [
                  "Invalid Record Length:",
                  `columns length is ${columns.length},`, // rename columns
                  `got ${recordLength} on line ${this.info.lines}`,
                ],
                this.options,
                this.__infoField(),
                {
                  record: record,
                },
              );
        if (
          relax_column_count === true ||
          (relax_column_count_less === true &&
            recordLength < this.state.expectedRecordLength) ||
          (relax_column_count_more === true &&
            recordLength > this.state.expectedRecordLength)
        ) {
          this.info.invalid_field_length++;
          this.state.error = err;
          // Error is undefined with skip_records_with_error
        } else {
          const finalErr = this.__error(err);
          if (finalErr) return finalErr;
        }
      }
      if (skip_records_with_empty_values === true && isRecordEmpty(record)) {
        this.__resetRecord();
        return;
      }
      if (this.state.recordHasError === true) {
        this.__resetRecord();
        this.state.recordHasError = false;
        return;
      }
      this.info.records++;
      if (from === 1 || this.info.records >= from) {
        const { objname } = this.options;
        // With columns, records are object
        if (columns !== false) {
          const obj = {};
          // Transform record array to an object
          for (let i = 0, l = record.length; i < l; i++) {
            if (columns[i] === undefined || columns[i].disabled) continue;
            // Turn duplicate columns into an array
            if (
              group_columns_by_name === true &&
              obj[columns[i].name] !== undefined
            ) {
              if (Array.isArray(obj[columns[i].name])) {
                obj[columns[i].name] = obj[columns[i].name].concat(record[i]);
              } else {
                obj[columns[i].name] = [obj[columns[i].name], record[i]];
              }
            } else {
              obj[columns[i].name] = record[i];
            }
          }
          // Without objname (default)
          if (raw === true || info === true) {
            const extRecord = Object.assign(
              { record: obj },
              raw === true
                ? { raw: this.state.rawBuffer.toString(encoding) }
                : {},
              info === true ? { info: this.__infoRecord() } : {},
            );
            const err = this.__push(
              objname === undefined ? extRecord : [obj[objname], extRecord],
              push,
            );
            if (err) {
              return err;
            }
          } else {
            const err = this.__push(
              objname === undefined ? obj : [obj[objname], obj],
              push,
            );
            if (err) {
              return err;
            }
          }
          // Without columns, records are array
        } else {
          if (raw === true || info === true) {
            const extRecord = Object.assign(
              { record: record },
              raw === true
                ? { raw: this.state.rawBuffer.toString(encoding) }
                : {},
              info === true ? { info: this.__infoRecord() } : {},
            );
            const err = this.__push(
              objname === undefined ? extRecord : [record[objname], extRecord],
              push,
            );
            if (err) {
              return err;
            }
          } else {
            const err = this.__push(
              objname === undefined ? record : [record[objname], record],
              push,
            );
            if (err) {
              return err;
            }
          }
        }
      }
      this.__resetRecord();
    },
    __firstLineToColumns: function (record) {
      const { firstLineToHeaders } = this.state;
      try {
        const headers =
          firstLineToHeaders === undefined
            ? record
            : firstLineToHeaders.call(null, record);
        if (!Array.isArray(headers)) {
          return this.__error(
            new CsvError(
              "CSV_INVALID_COLUMN_MAPPING",
              [
                "Invalid Column Mapping:",
                "expect an array from column function,",
                `got ${JSON.stringify(headers)}`,
              ],
              this.options,
              this.__infoField(),
              {
                headers: headers,
              },
            ),
          );
        }
        const normalizedHeaders = normalize_columns_array(headers);
        this.state.expectedRecordLength = normalizedHeaders.length;
        this.options.columns = normalizedHeaders;
        this.__resetRecord();
        return;
      } catch (err) {
        return err;
      }
    },
    __resetRecord: function () {
      if (this.options.raw === true) {
        this.state.rawBuffer.reset();
      }
      this.state.error = undefined;
      this.state.record = [];
      this.state.record_length = 0;
    },
    __onField: function () {
      const { cast, encoding, rtrim, max_record_size } = this.options;
      const { enabled, wasQuoting } = this.state;
      // Short circuit for the from_line options
      if (enabled === false) {
        return this.__resetField();
      }
      let field = this.state.field.toString(encoding);
      if (rtrim === true && wasQuoting === false) {
        field = field.trimRight();
      }
      if (cast === true) {
        const [err, f] = this.__cast(field);
        if (err !== undefined) return err;
        field = f;
      }
      this.state.record.push(field);
      // Increment record length if record size must not exceed a limit
      if (max_record_size !== 0 && typeof field === "string") {
        this.state.record_length += field.length;
      }
      this.__resetField();
    },
    __resetField: function () {
      this.state.field.reset();
      this.state.wasQuoting = false;
    },
    __push: function (record, push) {
      const { on_record } = this.options;
      if (on_record !== undefined) {
        const info = this.__infoRecord();
        try {
          record = on_record.call(null, record, info);
        } catch (err) {
          return err;
        }
        if (record === undefined || record === null) {
          return;
        }
      }
      push(record);
    },
    // Return a tuple with the error and the casted value
    __cast: function (field) {
      const { columns, relax_column_count } = this.options;
      const isColumns = Array.isArray(columns);
      // Dont loose time calling cast
      // because the final record is an object
      // and this field can't be associated to a key present in columns
      if (
        isColumns === true &&
        relax_column_count &&
        this.options.columns.length <= this.state.record.length
      ) {
        return [undefined, undefined];
      }
      if (this.state.castField !== null) {
        try {
          const info = this.__infoField();
          return [undefined, this.state.castField.call(null, field, info)];
        } catch (err) {
          return [err];
        }
      }
      if (this.__isFloat(field)) {
        return [undefined, parseFloat(field)];
      } else if (this.options.cast_date !== false) {
        const info = this.__infoField();
        return [undefined, this.options.cast_date.call(null, field, info)];
      }
      return [undefined, field];
    },
    // Helper to test if a character is a space or a line delimiter
    __isCharTrimable: function (buf, pos) {
      const isTrim = (buf, pos) => {
        const { timchars } = this.state;
        loop1: for (let i = 0; i < timchars.length; i++) {
          const timchar = timchars[i];
          for (let j = 0; j < timchar.length; j++) {
            if (timchar[j] !== buf[pos + j]) continue loop1;
          }
          return timchar.length;
        }
        return 0;
      };
      return isTrim(buf, pos);
    },
    // Keep it in case we implement the `cast_int` option
    // __isInt(value){
    //   // return Number.isInteger(parseInt(value))
    //   // return !isNaN( parseInt( obj ) );
    //   return /^(\-|\+)?[1-9][0-9]*$/.test(value)
    // }
    __isFloat: function (value) {
      return value - parseFloat(value) + 1 >= 0; // Borrowed from jquery
    },
    __compareBytes: function (sourceBuf, targetBuf, targetPos, firstByte) {
      if (sourceBuf[0] !== firstByte) return 0;
      const sourceLength = sourceBuf.length;
      for (let i = 1; i < sourceLength; i++) {
        if (sourceBuf[i] !== targetBuf[targetPos + i]) return 0;
      }
      return sourceLength;
    },
    __isDelimiter: function (buf, pos, chr) {
      const { delimiter, ignore_last_delimiters } = this.options;
      if (
        ignore_last_delimiters === true &&
        this.state.record.length === this.options.columns.length - 1
      ) {
        return 0;
      } else if (
        ignore_last_delimiters !== false &&
        typeof ignore_last_delimiters === "number" &&
        this.state.record.length === ignore_last_delimiters - 1
      ) {
        return 0;
      }
      loop1: for (let i = 0; i < delimiter.length; i++) {
        const del = delimiter[i];
        if (del[0] === chr) {
          for (let j = 1; j < del.length; j++) {
            if (del[j] !== buf[pos + j]) continue loop1;
          }
          return del.length;
        }
      }
      return 0;
    },
    __isRecordDelimiter: function (chr, buf, pos) {
      const { record_delimiter } = this.options;
      const recordDelimiterLength = record_delimiter.length;
      loop1: for (let i = 0; i < recordDelimiterLength; i++) {
        const rd = record_delimiter[i];
        const rdLength = rd.length;
        if (rd[0] !== chr) {
          continue;
        }
        for (let j = 1; j < rdLength; j++) {
          if (rd[j] !== buf[pos + j]) {
            continue loop1;
          }
        }
        return rd.length;
      }
      return 0;
    },
    __isEscape: function (buf, pos, chr) {
      const { escape } = this.options;
      if (escape === null) return false;
      const l = escape.length;
      if (escape[0] === chr) {
        for (let i = 0; i < l; i++) {
          if (escape[i] !== buf[pos + i]) {
            return false;
          }
        }
        return true;
      }
      return false;
    },
    __isQuote: function (buf, pos) {
      const { quote } = this.options;
      if (quote === null) return false;
      const l = quote.length;
      for (let i = 0; i < l; i++) {
        if (quote[i] !== buf[pos + i]) {
          return false;
        }
      }
      return true;
    },
    __autoDiscoverRecordDelimiter: function (buf, pos) {
      const { encoding } = this.options;
      // Note, we don't need to cache this information in state,
      // It is only called on the first line until we find out a suitable
      // record delimiter.
      const rds = [
        // Important, the windows line ending must be before mac os 9
        Buffer.from("\r\n", encoding),
        Buffer.from("\n", encoding),
        Buffer.from("\r", encoding),
      ];
      loop: for (let i = 0; i < rds.length; i++) {
        const l = rds[i].length;
        for (let j = 0; j < l; j++) {
          if (rds[i][j] !== buf[pos + j]) {
            continue loop;
          }
        }
        this.options.record_delimiter.push(rds[i]);
        this.state.recordDelimiterMaxLength = rds[i].length;
        return rds[i].length;
      }
      return 0;
    },
    __error: function (msg) {
      const { encoding, raw, skip_records_with_error } = this.options;
      const err = typeof msg === "string" ? new Error(msg) : msg;
      if (skip_records_with_error) {
        this.state.recordHasError = true;
        if (this.options.on_skip !== undefined) {
          this.options.on_skip(
            err,
            raw ? this.state.rawBuffer.toString(encoding) : undefined,
          );
        }
        // this.emit('skip', err, raw ? this.state.rawBuffer.toString(encoding) : undefined);
        return undefined;
      } else {
        return err;
      }
    },
    __infoDataSet: function () {
      return {
        ...this.info,
        columns: this.options.columns,
      };
    },
    __infoRecord: function () {
      const { columns, raw, encoding } = this.options;
      return {
        ...this.__infoDataSet(),
        error: this.state.error,
        header: columns === true,
        index: this.state.record.length,
        raw: raw ? this.state.rawBuffer.toString(encoding) : undefined,
      };
    },
    __infoField: function () {
      const { columns } = this.options;
      const isColumns = Array.isArray(columns);
      return {
        ...this.__infoRecord(),
        column:
          isColumns === true
            ? columns.length > this.state.record.length
              ? columns[this.state.record.length].name
              : null
            : this.state.record.length,
        quoting: this.state.wasQuoting,
      };
    },
  };
};



;// ../../node_modules/csv-parse/lib/sync.js


const parse = function (data, opts = {}) {
  if (typeof data === "string") {
    data = Buffer.from(data);
  }
  const records = opts && opts.objname ? {} : [];
  const parser = transform(opts);
  const push = (record) => {
    if (parser.options.objname === undefined) records.push(record);
    else {
      records[record[0]] = record[1];
    }
  };
  const close = () => {};
  const err1 = parser.parse(data, false, push, close);
  if (err1 !== undefined) throw err1;
  const err2 = parser.parse(undefined, true, push, close);
  if (err2 !== undefined) throw err2;
  return records;
};

// export default parse



// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/plus.js
var plus = __webpack_require__(108996);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/x.js
var x = __webpack_require__(673766);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/createLucideIcon.js + 3 modules
var createLucideIcon = __webpack_require__(58303);
;// ../../node_modules/lucide-react/dist/esm/icons/file-up.js
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const FileUp = (0,createLucideIcon/* default */.A)("FileUp", [
    [
        "path",
        {
            d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",
            key: "1rqfz7"
        }
    ],
    [
        "path",
        {
            d: "M14 2v4a2 2 0 0 0 2 2h4",
            key: "tnqrlb"
        }
    ],
    [
        "path",
        {
            d: "M12 12v6",
            key: "3ahymv"
        }
    ],
    [
        "path",
        {
            d: "m15 15-3-3-3 3",
            key: "15xj92"
        }
    ]
]);
 //# sourceMappingURL=file-up.js.map

// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/circle-alert.js
var circle_alert = __webpack_require__(88515);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/arrow-up-from-line.js
var arrow_up_from_line = __webpack_require__(552285);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/navigation.js
var navigation = __webpack_require__(470207);
// EXTERNAL MODULE: ../../packages/lib/cn.ts
var cn = __webpack_require__(983773);
;// ./modules/ee/contacts/components/upload-contacts-button.tsx
/* __next_internal_client_entry_do_not_use__ UploadContactsCSVButton auto */ 














const UploadContactsCSVButton = ({ environmentId, contactAttributeKeys })=>{
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const router = (0,navigation.useRouter)();
    const errorContainerRef = (0,react.useRef)(null);
    const [open, setOpen] = (0,react.useState)(false);
    const [duplicateContactsAction, setDuplicateContactsAction] = (0,react.useState)("skip");
    const [csvResponse, setCSVResponse] = (0,react.useState)([]);
    const [attributeMap, setAttributeMap] = (0,react.useState)({});
    const [error, setErrror] = (0,react.useState)("");
    const [loading, setLoading] = (0,react.useState)(false);
    const processCSVFile = async (file)=>{
        if (!file) return;
        // Check file type
        if (!file.type && !file.name.endsWith(".csv")) {
            setErrror("Please upload a CSV file");
            return;
        }
        if (file.type && file.type !== "text/csv" && !file.type.includes("csv")) {
            setErrror("Please upload a CSV file");
            return;
        }
        // Max file size check (800KB)
        const maxSizeInBytes = 800 * 1024;
        if (file.size > maxSizeInBytes) {
            setErrror("File size exceeds the maximum limit of 800KB");
            return;
        }
        const reader = new FileReader();
        reader.onload = async (e)=>{
            setErrror("");
            const csv = e.target?.result;
            try {
                const records = parse(csv, {
                    columns: true,
                    skip_empty_lines: true
                });
                const parsedRecords = ZContactCSVUploadResponse.safeParse(records);
                if (!parsedRecords.success) {
                    console.error("Error parsing CSV:", parsedRecords.error);
                    setErrror(parsedRecords.error.errors[0].message);
                    return;
                }
                setCSVResponse(parsedRecords.data);
            } catch (error) {
                console.error("Error parsing CSV:", error);
            }
        };
        reader.readAsText(file);
    };
    const handleFileUpload = (e)=>{
        const file = e.target?.files?.[0];
        if (file) {
            processCSVFile(file);
        }
    };
    const csvColumns = (0,react.useMemo)(()=>{
        if (!csvResponse.length) {
            return [];
        }
        // Extract column names (headers) from the first row
        const headers = Object.keys(csvResponse[0]);
        return headers.map((header)=>header.trim());
    }, [
        csvResponse
    ]);
    const resetState = (closeModal)=>{
        setCSVResponse([]);
        setDuplicateContactsAction("skip");
        setErrror("");
        setAttributeMap({});
        setLoading(false);
        if (closeModal) {
            setOpen(false);
        }
    };
    const handleUpload = async ()=>{
        if (!csvResponse.length) {
            return;
        }
        setLoading(true);
        setErrror("");
        const values = Object.values(attributeMap);
        if (new Set(values).size !== values.length) {
            const valueCount = values.reduce((acc, value)=>{
                acc[value] = (acc[value] || 0) + 1;
                return acc;
            }, {});
            const duplicateValues = Object.entries(valueCount).filter(([_, count])=>count > 1).map(([value, _])=>value);
            const duplicateAttributeKeys = Object.entries(attributeMap).filter(([_, value])=>duplicateValues.includes(value)).map(([key, _])=>key);
            setErrror(`Duplicate mappings found for the following attributes: ${duplicateAttributeKeys.join(", ")}`);
            errorContainerRef.current?.scrollIntoView({
                behavior: "smooth",
                block: "center"
            });
            setLoading(false);
            return;
        }
        const transformedCsvData = csvResponse.map((record)=>{
            const newRecord = {};
            Object.entries(record).forEach(([key, value])=>{
                // if the key is in the attribute map, we wanna replace it
                if (attributeMap[key]) {
                    const attrKeyId = attributeMap[key];
                    const attrKey = contactAttributeKeys.find((attrKey)=>attrKey.id === attrKeyId);
                    if (attrKey) {
                        newRecord[attrKey.key] = value;
                    } else {
                        newRecord[attrKeyId] = value;
                    }
                } else {
                    newRecord[key] = value;
                }
            });
            return newRecord;
        });
        const result = await createContactsFromCSVAction({
            csvData: transformedCsvData,
            duplicateContactsAction,
            attributeMap,
            environmentId
        });
        if (result?.data) {
            setErrror("");
            resetState(true);
            router.refresh();
            return;
        }
        if (result?.serverError) {
            setErrror(result.serverError);
        }
        if (result?.validationErrors) {
            if (result.validationErrors.csvData?._errors?.[0]) {
                setErrror(result.validationErrors.csvData._errors?.[0]);
            } else {
                setErrror("An error occurred while uploading the contacts. Please try again later.");
            }
        }
        setLoading(false);
    };
    (0,react.useEffect)(()=>{
        const matches = {};
        for (const columnName of csvColumns){
            for (const attributeKey of contactAttributeKeys){
                if ((0,helper/* isStringMatch */.bp)(columnName, attributeKey.name ?? attributeKey.key)) {
                    matches[columnName] = attributeKey.id;
                    break;
                }
            }
            if (!matches[columnName]) {
                matches[columnName] = columnName;
            }
        }
        setAttributeMap(matches);
    }, [
        contactAttributeKeys,
        csvColumns
    ]);
    (0,react.useEffect)(()=>{
        if (error && errorContainerRef.current) {
            errorContainerRef.current.scrollIntoView({
                behavior: "smooth",
                block: "center"
            });
        }
    }, [
        error
    ]);
    // Function to download an example CSV
    const handleDownloadExampleCSV = ()=>{
        const exampleData = [
            {
                email: "user1@example.com",
                userId: "1001",
                firstName: "John",
                lastName: "Doe"
            },
            {
                email: "user2@example.com",
                userId: "1002",
                firstName: "Jane",
                lastName: "Smith"
            },
            {
                email: "user3@example.com",
                userId: "1003",
                firstName: "Mark",
                lastName: "Jones"
            },
            {
                email: "user4@example.com",
                userId: "1004",
                firstName: "Emily",
                lastName: "Brown"
            },
            {
                email: "user5@example.com",
                userId: "1005",
                firstName: "David",
                lastName: "Wilson"
            }
        ];
        const headers = Object.keys(exampleData[0]);
        const csvRows = [
            headers.join(","),
            ...exampleData.map((row)=>headers.map((h)=>row[h]).join(","))
        ];
        const csvContent = "data:text/csv;charset=utf-8," + csvRows.join("\n");
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "example.csv");
        document.body.appendChild(link); // Required for Firefox
        link.click();
        document.body.removeChild(link);
    };
    const handleDragOver = (e)=>{
        e.preventDefault();
        e.stopPropagation();
        // Only show copy cursor if file is CSV
        const items = Array.from(e.dataTransfer.items);
        const isCSV = items.some((item)=>item.type === "text/csv" || item.type === "" && item.kind === "file" // For when type isn't available
        );
        e.dataTransfer.dropEffect = isCSV ? "copy" : "none";
    };
    const handleDrop = (e)=>{
        e.preventDefault();
        e.stopPropagation();
        const file = e.dataTransfer.files[0];
        if (file) {
            processCSVFile(file);
        }
    };
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(react_jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(components_button/* Button */.$, {
                size: "sm",
                onClick: ()=>setOpen(true),
                children: [
                    t("common.upload"),
                    " CSV",
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(plus/* default */.A, {})
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(modal/* Modal */.a, {
                open: open,
                setOpen: setOpen,
                noPadding: true,
                closeOnOutsideClick: false,
                className: "overflow-auto",
                size: "xl",
                hideCloseButton: true,
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                        className: "sticky top-0 flex h-full flex-col rounded-lg",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("button", {
                                className: (0,cn.cn)("absolute right-0 top-0 hidden pr-4 pt-4 text-slate-400 hover:text-slate-500 focus:outline-none focus:ring-0 sm:block"),
                                onClick: ()=>{
                                    resetState(true);
                                },
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(x/* default */.A, {
                                        className: "h-6 w-6 rounded-md bg-white"
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                                        className: "sr-only",
                                        children: "Close"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                className: "rounded-t-lg bg-slate-100",
                                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: "flex w-full items-center justify-between p-6",
                                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                                className: "mr-1.5 h-6 w-6 text-slate-500",
                                                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(FileUp, {
                                                    className: "h-5 w-5"
                                                })
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                        className: "text-xl font-medium text-slate-700",
                                                        children: [
                                                            t("common.upload"),
                                                            " CSV"
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                                        className: "text-sm text-slate-500",
                                                        children: t("environments.contacts.upload_contacts_modal_description")
                                                    })
                                                ]
                                            })
                                        ]
                                    })
                                })
                            })
                        ]
                    }),
                    error ? /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                        className: "mx-6 my-4 flex items-center gap-2 rounded-md border-2 border-red-200 bg-red-50 p-4",
                        ref: errorContainerRef,
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(circle_alert/* default */.A, {
                                className: "text-red-600"
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                className: "text-red-600",
                                children: error
                            })
                        ]
                    }) : null,
                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                        className: "flex flex-col gap-8 px-6 py-4",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "flex flex-col gap-2",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "no-scrollbar max-h-[400px] overflow-auto rounded-md border-2 border-dashed border-slate-300 bg-slate-50 p-4",
                                        children: !csvResponse.length ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("label", {
                                                htmlFor: "file",
                                                className: (0,cn.cn)("relative flex cursor-pointer flex-col items-center justify-center rounded-lg hover:bg-slate-100 dark:border-slate-600 dark:bg-slate-700 dark:hover:border-slate-500 dark:hover:bg-slate-800"),
                                                onDragOver: (e)=>handleDragOver(e),
                                                onDrop: (e)=>handleDrop(e),
                                                children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                    className: "flex flex-col items-center justify-center pb-6 pt-5",
                                                    children: [
                                                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)(arrow_up_from_line/* default */.A, {
                                                            className: "h-6 text-slate-500"
                                                        }),
                                                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                                            className: (0,cn.cn)("mt-2 text-center text-sm text-slate-500"),
                                                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                                                                className: "font-semibold",
                                                                children: t("common.upload_input_description")
                                                            })
                                                        }),
                                                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)("input", {
                                                            type: "file",
                                                            id: "file",
                                                            name: "file",
                                                            accept: ".csv",
                                                            className: "hidden",
                                                            onChange: handleFileUpload
                                                        })
                                                    ]
                                                })
                                            })
                                        }) : /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                            className: "flex flex-col items-center gap-8",
                                            children: [
                                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("h3", {
                                                    className: "font-medium text-slate-500",
                                                    children: t("environments.contacts.upload_contacts_modal_preview")
                                                }),
                                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                                    className: "h-[300px] w-full overflow-auto rounded-md border border-slate-300",
                                                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(CsvTable, {
                                                        data: [
                                                            ...csvResponse.slice(0, 11)
                                                        ]
                                                    })
                                                })
                                            ]
                                        })
                                    }),
                                    !csvResponse.length && /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("a", {
                                            onClick: handleDownloadExampleCSV,
                                            className: "cursor-pointer text-right text-sm text-slate-500",
                                            children: [
                                                t("environments.contacts.upload_contacts_modal_download_example_csv"),
                                                " "
                                            ]
                                        })
                                    })
                                ]
                            }),
                            csvResponse.length > 0 ? /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "flex flex-col",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("h3", {
                                        className: "font-medium text-slate-900",
                                        children: t("environments.contacts.upload_contacts_modal_attributes_title")
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                        className: "mb-2 text-slate-500",
                                        children: t("environments.contacts.upload_contacts_modal_attributes_description")
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "flex flex-col gap-2",
                                        children: csvColumns.map((column, index)=>{
                                            return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(UploadContactsAttributes, {
                                                csvColumn: column,
                                                attributeMap: attributeMap,
                                                setAttributeMap: setAttributeMap,
                                                contactAttributeKeys: contactAttributeKeys
                                            }, index);
                                        })
                                    })
                                ]
                            }) : null,
                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "flex flex-col",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("h3", {
                                        className: "font-medium text-slate-900",
                                        children: t("environments.contacts.upload_contacts_modal_duplicates_title")
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                        className: "mb-2 text-slate-500",
                                        children: t("environments.contacts.upload_contacts_modal_duplicates_description")
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(styling_tabs/* StylingTabs */.n, {
                                        id: "duplicate-contacts",
                                        options: [
                                            {
                                                value: "skip",
                                                label: t("environments.contacts.upload_contacts_modal_duplicates_skip_title")
                                            },
                                            {
                                                value: "update",
                                                label: t("environments.contacts.upload_contacts_modal_duplicates_update_title")
                                            },
                                            {
                                                value: "overwrite",
                                                label: t("environments.contacts.upload_contacts_modal_duplicates_overwrite_title")
                                            }
                                        ],
                                        defaultSelected: duplicateContactsAction,
                                        onChange: (value)=>setDuplicateContactsAction(value),
                                        className: "max-w-[400px]",
                                        tabsContainerClassName: "p-1 rounded-lg"
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "mt-1",
                                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("p", {
                                            className: "text-sm font-medium text-slate-500",
                                            children: [
                                                duplicateContactsAction === "skip" && t("environments.contacts.upload_contacts_modal_duplicates_skip_description"),
                                                duplicateContactsAction === "update" && t("environments.contacts.upload_contacts_modal_duplicates_update_description"),
                                                duplicateContactsAction === "overwrite" && t("environments.contacts.upload_contacts_modal_duplicates_overwrite_description")
                                            ]
                                        })
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                        className: "sticky bottom-0 w-full bg-white",
                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                            className: "flex justify-end rounded-b-lg p-4",
                            children: [
                                csvResponse.length > 0 ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                    size: "sm",
                                    variant: "secondary",
                                    onClick: ()=>{
                                        resetState();
                                    },
                                    className: "mr-2",
                                    children: t("environments.contacts.upload_contacts_modal_pick_different_file")
                                }) : null,
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                    size: "sm",
                                    onClick: handleUpload,
                                    loading: loading,
                                    disabled: loading || !csvResponse.length,
                                    children: t("environments.contacts.upload_contacts_modal_upload_btn")
                                })
                            ]
                        })
                    })
                ]
            })
        ]
    });
};


/***/ }),

/***/ 661989:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ Badge)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(983773);


const Badge = ({ text, type, size, className })=>{
    const bgColor = {
        warning: "bg-amber-100",
        success: "bg-emerald-100",
        error: "bg-red-100",
        gray: "bg-slate-100"
    };
    const borderColor = {
        warning: "border-amber-200",
        success: "border-emerald-200",
        error: "border-red-200",
        gray: "border-slate-200"
    };
    const textColor = {
        warning: "text-amber-800",
        success: "text-emerald-800",
        error: "text-red-800",
        gray: "text-slate-600"
    };
    const padding = {
        tiny: "px-1.5 py-0.5",
        normal: "px-2.5 py-0.5",
        large: "px-3.5 py-1"
    };
    const textSize = size === "large" ? "text-sm" : "text-xs";
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__.cn)("inline-flex cursor-default items-center rounded-full border font-medium", bgColor[type], borderColor[type], textColor[type], padding[size], textSize, className),
        children: text
    });
};


/***/ }),

/***/ 829884:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoadingSpinner: () => (/* binding */ LoadingSpinner)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(983773);
/* __next_internal_client_entry_do_not_use__ LoadingSpinner auto */ 

const LoadingSpinner = ({ className = "h-6 w-6" })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
        className: "flex h-full w-full items-center justify-center",
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg", {
            className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_1__.cn)("m-2 animate-spin text-slate-700", className),
            xmlns: "http://www.w3.org/2000/svg",
            fill: "none",
            viewBox: "0 0 24 24",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("circle", {
                    className: "opacity-25",
                    cx: "12",
                    cy: "12",
                    r: "10",
                    stroke: "currentColor",
                    strokeWidth: "4"
                }),
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path", {
                    className: "opacity-75",
                    fill: "currentColor",
                    d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                })
            ]
        })
    });
};


/***/ }),

/***/ 862371:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   n: () => (/* binding */ StylingTabs)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_ui_components_label__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(61330);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(983773);




const StylingTabs = ({ id, options, defaultSelected, onChange, className, tabsContainerClassName, label, subLabel })=>{
    const [selectedOption, setSelectedOption] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(defaultSelected);
    const handleChange = (event)=>{
        const value = event.target.value;
        setSelectedOption(value);
        onChange(value);
    };
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        role: "radiogroup",
        "aria-labelledby": `${id}-toggle-label`,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("flex flex-col gap-2", className),
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                children: [
                    label && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_label__WEBPACK_IMPORTED_MODULE_1__/* .Label */ .J, {
                        className: "font-semibold",
                        children: label
                    }),
                    subLabel && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                        className: "text-sm font-normal text-slate-500",
                        children: subLabel
                    })
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("flex overflow-hidden rounded-md border border-slate-300 p-2", tabsContainerClassName),
                children: options.map((option)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", {
                        htmlFor: option.value.toString(),
                        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("flex flex-1 cursor-pointer items-center justify-center gap-4 rounded-md py-2 text-center text-sm", selectedOption === option.value ? "bg-slate-100" : "bg-white", "focus:ring-brand-dark focus:outline-none focus:ring-2 focus:ring-opacity-50"),
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input", {
                                type: "radio",
                                name: id,
                                id: option.value.toString(),
                                value: option.value.toString(),
                                checked: selectedOption === option.value,
                                onChange: handleChange,
                                className: "sr-only"
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                className: "text-slate-900",
                                children: option.label
                            }),
                            option.icon && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                                children: option.icon
                            })
                        ]
                    }, option.value))
            })
        ]
    });
};


/***/ }),

/***/ 856504:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var root = __webpack_require__(193972);

/** Built-in value references. */
var Symbol = root.Symbol;

module.exports = Symbol;


/***/ }),

/***/ 263229:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var Symbol = __webpack_require__(856504),
    getRawTag = __webpack_require__(72308),
    objectToString = __webpack_require__(778799);

/** `Object#toString` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of `getTag` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

module.exports = baseGetTag;


/***/ }),

/***/ 623761:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var trimmedEndIndex = __webpack_require__(960831);

/** Used to match leading whitespace. */
var reTrimStart = /^\s+/;

/**
 * The base implementation of `_.trim`.
 *
 * @private
 * @param {string} string The string to trim.
 * @returns {string} Returns the trimmed string.
 */
function baseTrim(string) {
  return string
    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')
    : string;
}

module.exports = baseTrim;


/***/ }),

/***/ 596837:
/***/ ((module) => {

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

module.exports = freeGlobal;


/***/ }),

/***/ 72308:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var Symbol = __webpack_require__(856504);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw `toStringTag`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

module.exports = getRawTag;


/***/ }),

/***/ 778799:
/***/ ((module) => {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/**
 * Converts `value` to a string using `Object.prototype.toString`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

module.exports = objectToString;


/***/ }),

/***/ 193972:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var freeGlobal = __webpack_require__(596837);

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

module.exports = root;


/***/ }),

/***/ 960831:
/***/ ((module) => {

/** Used to match a single whitespace character. */
var reWhitespace = /\s/;

/**
 * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedEndIndex(string) {
  var index = string.length;

  while (index-- && reWhitespace.test(string.charAt(index))) {}
  return index;
}

module.exports = trimmedEndIndex;


/***/ }),

/***/ 359174:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var isObject = __webpack_require__(828750),
    now = __webpack_require__(157801),
    toNumber = __webpack_require__(797085);

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        timeWaiting = wait - timeSinceLastCall;

    return maxing
      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
      : timeWaiting;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        clearTimeout(timerId);
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

module.exports = debounce;


/***/ }),

/***/ 828750:
/***/ ((module) => {

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

module.exports = isObject;


/***/ }),

/***/ 354109:
/***/ ((module) => {

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

module.exports = isObjectLike;


/***/ }),

/***/ 334357:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseGetTag = __webpack_require__(263229),
    isObjectLike = __webpack_require__(354109);

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag);
}

module.exports = isSymbol;


/***/ }),

/***/ 157801:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var root = __webpack_require__(193972);

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

module.exports = now;


/***/ }),

/***/ 797085:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var baseTrim = __webpack_require__(623761),
    isObject = __webpack_require__(828750),
    isSymbol = __webpack_require__(334357);

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = baseTrim(value);
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = toNumber;


/***/ }),

/***/ 552285:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ArrowUpFromLine)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const ArrowUpFromLine = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("ArrowUpFromLine", [
    [
        "path",
        {
            d: "m18 9-6-6-6 6",
            key: "kcunyi"
        }
    ],
    [
        "path",
        {
            d: "M12 3v14",
            key: "7cf3v8"
        }
    ],
    [
        "path",
        {
            d: "M5 21h14",
            key: "11awu3"
        }
    ]
]);
 //# sourceMappingURL=arrow-up-from-line.js.map


/***/ }),

/***/ 415140:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Link)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Link = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Link", [
    [
        "path",
        {
            d: "M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",
            key: "1cjeqo"
        }
    ],
    [
        "path",
        {
            d: "M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",
            key: "19qd67"
        }
    ]
]);
 //# sourceMappingURL=link.js.map


/***/ }),

/***/ 946377:
/***/ ((module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "default", ({
    enumerable: true,
    get: function() {
        return dynamic;
    }
}));
const _interop_require_default = __webpack_require__(748375);
const _loadable = /*#__PURE__*/ _interop_require_default._(__webpack_require__(900793));
function dynamic(dynamicOptions, options) {
    var _mergedOptions_loadableGenerated;
    const loadableOptions = {};
    if (typeof dynamicOptions === 'function') {
        loadableOptions.loader = dynamicOptions;
    }
    const mergedOptions = {
        ...loadableOptions,
        ...options
    };
    return (0, _loadable.default)({
        ...mergedOptions,
        modules: (_mergedOptions_loadableGenerated = mergedOptions.loadableGenerated) == null ? void 0 : _mergedOptions_loadableGenerated.modules
    });
}
if ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {
    Object.defineProperty(exports.default, '__esModule', {
        value: true
    });
    Object.assign(exports.default, exports);
    module.exports = exports.default;
} //# sourceMappingURL=app-dynamic.js.map


/***/ }),

/***/ 314017:
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "encodeURIPath", ({
    enumerable: true,
    get: function() {
        return encodeURIPath;
    }
}));
function encodeURIPath(file) {
    return file.split('/').map((p)=>encodeURIComponent(p)).join('/');
} //# sourceMappingURL=encode-uri-path.js.map


/***/ }),

/***/ 583602:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* __next_internal_client_entry_do_not_use__  cjs */ 
Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "BailoutToCSR", ({
    enumerable: true,
    get: function() {
        return BailoutToCSR;
    }
}));
const _bailouttocsr = __webpack_require__(986542);
function BailoutToCSR(param) {
    let { reason, children } = param;
    if (true) {
        throw new _bailouttocsr.BailoutToCSRError(reason);
    }
    return children;
} //# sourceMappingURL=dynamic-bailout-to-csr.js.map


/***/ }),

/***/ 900793:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "default", ({
    enumerable: true,
    get: function() {
        return _default;
    }
}));
const _jsxruntime = __webpack_require__(642725);
const _react = __webpack_require__(891616);
const _dynamicbailouttocsr = __webpack_require__(583602);
const _preloadchunks = __webpack_require__(690719);
// Normalize loader to return the module as form { default: Component } for `React.lazy`.
// Also for backward compatible since next/dynamic allows to resolve a component directly with loader
// Client component reference proxy need to be converted to a module.
function convertModule(mod) {
    // Check "default" prop before accessing it, as it could be client reference proxy that could break it reference.
    // Cases:
    // mod: { default: Component }
    // mod: Component
    // mod: { default: proxy(Component) }
    // mod: proxy(Component)
    const hasDefault = mod && 'default' in mod;
    return {
        default: hasDefault ? mod.default : mod
    };
}
const defaultOptions = {
    loader: ()=>Promise.resolve(convertModule(()=>null)),
    loading: null,
    ssr: true
};
function Loadable(options) {
    const opts = {
        ...defaultOptions,
        ...options
    };
    const Lazy = /*#__PURE__*/ (0, _react.lazy)(()=>opts.loader().then(convertModule));
    const Loading = opts.loading;
    function LoadableComponent(props) {
        const fallbackElement = Loading ? /*#__PURE__*/ (0, _jsxruntime.jsx)(Loading, {
            isLoading: true,
            pastDelay: true,
            error: null
        }) : null;
        // If it's non-SSR or provided a loading component, wrap it in a suspense boundary
        const hasSuspenseBoundary = !opts.ssr || !!opts.loading;
        const Wrap = hasSuspenseBoundary ? _react.Suspense : _react.Fragment;
        const wrapProps = hasSuspenseBoundary ? {
            fallback: fallbackElement
        } : {};
        const children = opts.ssr ? /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
            children: [
                 true ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_preloadchunks.PreloadChunks, {
                    moduleIds: opts.modules
                }) : 0,
                /*#__PURE__*/ (0, _jsxruntime.jsx)(Lazy, {
                    ...props
                })
            ]
        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_dynamicbailouttocsr.BailoutToCSR, {
            reason: "next/dynamic",
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(Lazy, {
                ...props
            })
        });
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(Wrap, {
            ...wrapProps,
            children: children
        });
    }
    LoadableComponent.displayName = 'LoadableComponent';
    return LoadableComponent;
}
const _default = Loadable; //# sourceMappingURL=loadable.js.map


/***/ }),

/***/ 690719:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/* __next_internal_client_entry_do_not_use__  cjs */ 
Object.defineProperty(exports, "__esModule", ({
    value: true
}));
Object.defineProperty(exports, "PreloadChunks", ({
    enumerable: true,
    get: function() {
        return PreloadChunks;
    }
}));
const _jsxruntime = __webpack_require__(642725);
const _reactdom = __webpack_require__(787377);
const _workasyncstorageexternal = __webpack_require__(529294);
const _encodeuripath = __webpack_require__(314017);
function PreloadChunks(param) {
    let { moduleIds } = param;
    // Early return in client compilation and only load requestStore on server side
    if (false) {}
    const workStore = _workasyncstorageexternal.workAsyncStorage.getStore();
    if (workStore === undefined) {
        return null;
    }
    const allFiles = [];
    // Search the current dynamic call unique key id in react loadable manifest,
    // and find the corresponding CSS files to preload
    if (workStore.reactLoadableManifest && moduleIds) {
        const manifest = workStore.reactLoadableManifest;
        for (const key of moduleIds){
            if (!manifest[key]) continue;
            const chunks = manifest[key].files;
            allFiles.push(...chunks);
        }
    }
    if (allFiles.length === 0) {
        return null;
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_jsxruntime.Fragment, {
        children: allFiles.map((chunk)=>{
            const href = workStore.assetPrefix + "/_next/" + (0, _encodeuripath.encodeURIPath)(chunk);
            const isCss = chunk.endsWith('.css');
            // If it's stylesheet we use `precedence` o help hoist with React Float.
            // For stylesheets we actually need to render the CSS because nothing else is going to do it so it needs to be part of the component tree.
            // The `preload` for stylesheet is not optional.
            if (isCss) {
                return /*#__PURE__*/ (0, _jsxruntime.jsx)("link", {
                    // @ts-ignore
                    precedence: "dynamic",
                    href: href,
                    rel: "stylesheet",
                    as: "style"
                }, chunk);
            } else {
                // If it's script we use ReactDOM.preload to preload the resources
                (0, _reactdom.preload)(href, {
                    as: 'script',
                    fetchPriority: 'low'
                });
                return null;
            }
        })
    });
} //# sourceMappingURL=preload-chunks.js.map


/***/ }),

/***/ 793914:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _modules_ee_contacts_page__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(166617);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_modules_ee_contacts_page__WEBPACK_IMPORTED_MODULE_0__/* .ContactsPage */ .F);


/***/ }),

/***/ 304967:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContactDataView: () => (/* binding */ ContactDataView)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const ContactDataView = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call ContactDataView() from the server but ContactDataView is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/modules/ee/contacts/components/contact-data-view.tsx",
"ContactDataView",
);

/***/ }),

/***/ 65081:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  E: () => (/* binding */ ContactsSecondaryNavigation)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(891069);
// EXTERNAL MODULE: ../../node_modules/next/dist/client/app-dir/link.js
var app_dir_link = __webpack_require__(853648);
var link_default = /*#__PURE__*/__webpack_require__.n(app_dir_link);
// EXTERNAL MODULE: ../../packages/lib/cn.ts
var cn = __webpack_require__(598597);
;// ./modules/ui/components/secondary-navigation/index.tsx



const SecondaryNavigation = ({ navigation, activeId, loading, ...props })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
        ...props,
        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
            className: "grid h-10 w-full grid-cols-[auto,1fr]",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("nav", {
                    className: "flex h-full min-w-full items-center space-x-4",
                    "aria-label": "Tabs",
                    children: loading ? navigation.map((navElem)=>/*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                            className: "group flex h-full flex-col",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    "aria-disabled": "true",
                                    className: (0,cn.cn)(navElem.id === activeId ? "font-semibold text-slate-900" : "text-slate-500", "flex h-full items-center px-3 text-sm font-medium", navElem.hidden && "hidden"),
                                    "aria-current": navElem.id === activeId ? "page" : undefined,
                                    children: navElem.label
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: (0,cn.cn)("bottom-0 mt-auto h-[2px] w-full rounded-t-lg transition-all duration-150 ease-in-out", navElem.id === activeId ? "bg-slate-300" : "bg-transparent group-hover:bg-slate-300", navElem.hidden && "hidden")
                                })
                            ]
                        }, navElem.id)) : navigation.map((navElem)=>!navElem.hidden && /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                            className: "group flex h-full flex-col",
                            children: [
                                navElem.href ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)((link_default()), {
                                    href: navElem.href,
                                    ...navElem.onClick ? {
                                        onClick: navElem.onClick
                                    } : {},
                                    className: (0,cn.cn)(navElem.id === activeId ? "font-semibold text-slate-900" : "text-slate-500 hover:text-slate-700", "flex h-full items-center px-3 text-sm font-medium", navElem.hidden && "hidden"),
                                    "aria-current": navElem.id === activeId ? "page" : undefined,
                                    children: navElem.label
                                }) : /*#__PURE__*/ (0,react_jsx_runtime.jsx)("button", {
                                    ...navElem.onClick ? {
                                        onClick: navElem.onClick
                                    } : {},
                                    className: (0,cn.cn)(navElem.id === activeId ? "font-semibold text-slate-900" : "text-slate-500 hover:text-slate-700", "grow items-center px-3 text-sm font-medium transition-all duration-150 ease-in-out", navElem.hidden && "hidden"),
                                    "aria-current": navElem.id === activeId ? "page" : undefined,
                                    children: navElem.label
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: (0,cn.cn)("bottom-0 mt-auto h-[2px] w-full rounded-t-lg transition-all duration-150 ease-in-out", navElem.id === activeId ? "bg-brand-dark" : "bg-transparent group-hover:bg-slate-300", navElem.hidden && "hidden")
                                })
                            ]
                        }, navElem.id))
                }),
                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                    className: "justify-self-end"
                })
            ]
        })
    });
};

// EXTERNAL MODULE: ./tolgee/server.tsx + 2 modules
var server = __webpack_require__(186184);
// EXTERNAL MODULE: ../../packages/lib/project/service.ts
var service = __webpack_require__(529987);
;// ./modules/ee/contacts/components/contacts-secondary-navigation.tsx




const ContactsSecondaryNavigation = async ({ activeId, environmentId, loading })=>{
    let project = null;
    const t = await (0,server/* getTranslate */.r)();
    if (!loading && environmentId) {
        project = await (0,service/* getProjectByEnvironmentId */.bq)(environmentId);
        if (!project) {
            throw new Error(t("common.project_not_found"));
        }
    }
    const navigation = [
        {
            id: "contacts",
            label: t("common.contacts"),
            href: `/environments/${environmentId}/contacts`
        },
        {
            id: "segments",
            label: t("common.segments"),
            href: `/environments/${environmentId}/segments`
        }
    ];
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(SecondaryNavigation, {
        navigation: navigation,
        activeId: activeId,
        loading: loading
    });
};


/***/ }),

/***/ 833249:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UploadContactsCSVButton: () => (/* binding */ UploadContactsCSVButton)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const UploadContactsCSVButton = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call UploadContactsCSVButton() from the server but UploadContactsCSVButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/modules/ee/contacts/components/upload-contacts-button.tsx",
"UploadContactsCSVButton",
);

/***/ }),

/***/ 166617:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ ContactsPage),
/* harmony export */   x: () => (/* binding */ $$RSC_SERVER_ACTION_0)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(910330);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(208706);
/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lib_cache_contact__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(180868);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(136015);
/* harmony import */ var _modules_ee_contacts_components_upload_contacts_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(833249);
/* harmony import */ var _modules_ee_contacts_lib_contacts__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(465412);
/* harmony import */ var _modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(532077);
/* harmony import */ var _modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(389846);
/* harmony import */ var _modules_ee_teams_utils_teams__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(596379);
/* harmony import */ var _modules_ui_components_page_content_wrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(746219);
/* harmony import */ var _modules_ui_components_page_header__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(109053);
/* harmony import */ var _modules_ui_components_upgrade_prompt__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(353959);
/* harmony import */ var _tolgee_server__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(186184);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(836919);
/* harmony import */ var _formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(32135);
/* harmony import */ var _formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(377968);
/* harmony import */ var _formbricks_lib_membership_utils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(159570);
/* harmony import */ var _formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(529987);
/* harmony import */ var _components_contact_data_view__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(304967);
/* harmony import */ var _components_contacts_secondary_navigation__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(65081);
/* __next_internal_action_entry_do_not_use__ {"40edaf1f3d8a7e5822890f9c7718874668a1f0df8a":"$$RSC_SERVER_ACTION_0"} */ 





















const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ $$RSC_SERVER_ACTION_0 = async function refreshContacts($$ACTION_CLOSURE_BOUND) {
    var [$$ACTION_ARG_0] = await (0,private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_2__.decryptActionBoundArgs)("40edaf1f3d8a7e5822890f9c7718874668a1f0df8a", $$ACTION_CLOSURE_BOUND);
    _lib_cache_contact__WEBPACK_IMPORTED_MODULE_3__/* .contactCache */ .f.revalidate({
        environmentId: $$ACTION_ARG_0
    });
};
const ContactsPage = async ({ params: paramsProps })=>{
    const t = await (0,_tolgee_server__WEBPACK_IMPORTED_MODULE_13__/* .getTranslate */ .r)();
    const params = await paramsProps;
    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_14__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_4__/* .authOptions */ .N);
    if (!session) {
        throw new Error("Session not found");
    }
    const isContactsEnabled = await (0,_modules_ee_license_check_lib_utils__WEBPACK_IMPORTED_MODULE_7__/* .getIsContactsEnabled */ .dZ)();
    const [environment, product] = await Promise.all([
        (0,_formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_17__/* .getEnvironment */ .uc)(params.environmentId),
        (0,_formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_18__/* .getProjectByEnvironmentId */ .bq)(params.environmentId)
    ]);
    if (!environment) {
        throw new Error(t("common.environment_not_found"));
    }
    if (!product) {
        throw new Error(t("common.product_not_found"));
    }
    const currentUserMembership = await (0,_formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_19__/* .getMembershipByUserIdOrganizationId */ .Y)(session?.user.id, product.organizationId);
    const { isMember } = (0,_formbricks_lib_membership_utils__WEBPACK_IMPORTED_MODULE_20__/* .getAccessFlags */ .c)(currentUserMembership?.role);
    const productPermission = await (0,_modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_8__/* .getProjectPermissionByUserId */ ._)(session.user.id, product.id);
    const { hasReadAccess } = (0,_modules_ee_teams_utils_teams__WEBPACK_IMPORTED_MODULE_9__/* .getTeamPermissionFlags */ .od)(productPermission);
    const isReadOnly = isMember && hasReadAccess;
    const contactAttributeKeys = await (0,_modules_ee_contacts_lib_contacts__WEBPACK_IMPORTED_MODULE_6__/* .getContactAttributeKeys */ .fo)(params.environmentId);
    const initialContacts = await (0,_modules_ee_contacts_lib_contacts__WEBPACK_IMPORTED_MODULE_6__/* .getContacts */ .kK)(params.environmentId, 0);
    const AddContactsButton = /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ee_contacts_components_upload_contacts_button__WEBPACK_IMPORTED_MODULE_5__.UploadContactsCSVButton, {
        environmentId: environment.id,
        contactAttributeKeys: contactAttributeKeys
    });
    const refreshContacts = (0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_1__/* .registerServerReference */ .A)($$RSC_SERVER_ACTION_0, "40edaf1f3d8a7e5822890f9c7718874668a1f0df8a", null).bind(null, (0,private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_2__.encryptActionBoundArgs)("40edaf1f3d8a7e5822890f9c7718874668a1f0df8a", [
        params.environmentId
    ]));
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_page_content_wrapper__WEBPACK_IMPORTED_MODULE_10__/* .PageContentWrapper */ .s, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_page_header__WEBPACK_IMPORTED_MODULE_11__/* .PageHeader */ .z, {
                pageTitle: t("common.contacts"),
                cta: isContactsEnabled && !isReadOnly ? AddContactsButton : undefined,
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_contacts_secondary_navigation__WEBPACK_IMPORTED_MODULE_16__/* .ContactsSecondaryNavigation */ .E, {
                    activeId: "contacts",
                    environmentId: params.environmentId
                })
            }),
            isContactsEnabled ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_contact_data_view__WEBPACK_IMPORTED_MODULE_15__.ContactDataView, {
                environment: environment,
                itemsPerPage: _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_21__/* .ITEMS_PER_PAGE */ .re,
                contactAttributeKeys: contactAttributeKeys,
                isReadOnly: isReadOnly,
                initialContacts: initialContacts,
                hasMore: initialContacts.length >= _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_21__/* .ITEMS_PER_PAGE */ .re,
                refreshContacts: refreshContacts
            }, initialContacts.length + contactAttributeKeys.length) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "flex items-center justify-center",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_upgrade_prompt__WEBPACK_IMPORTED_MODULE_12__/* .UpgradePrompt */ .d, {
                    title: t("environments.contacts.unlock_contacts_title"),
                    description: t("environments.contacts.unlock_contacts_description"),
                    buttons: [
                        {
                            text: t("common.start_free_trial"),
                            href: _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_21__/* .IS_FORMBRICKS_CLOUD */ .Si ? `/environments/${params.environmentId}/settings/billing` : "https://formbricks.com/upgrade-self-hosting-license"
                        },
                        {
                            text: t("common.learn_more"),
                            href: _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_21__/* .IS_FORMBRICKS_CLOUD */ .Si ? `/environments/${params.environmentId}/settings/billing` : "https://formbricks.com/learn-more-self-hosting-license"
                        }
                    ]
                })
            })
        ]
    });
};


/***/ }),

/***/ 353959:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ UpgradePrompt)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(474292);
/* harmony import */ var _barrel_optimize_names_KeyIcon_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(580685);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(853648);
/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_2__);




const UpgradePrompt = ({ title, description, buttons })=>{
    const [primaryButton, secondaryButton] = buttons;
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "flex w-full flex-col items-center gap-6 p-6",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "rounded-md border border-slate-200 p-3",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_KeyIcon_lucide_react__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A, {
                    className: "h-6 w-6 text-slate-900"
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "flex max-w-[80%] flex-col items-center gap-2 text-center",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                        className: "text-xl font-semibold text-slate-900",
                        children: title
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", {
                        className: "text-sm text-slate-500",
                        children: description
                    })
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: "flex gap-3",
                children: [
                    primaryButton.href ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__/* .Button */ .$, {
                        asChild: true,
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)((next_link__WEBPACK_IMPORTED_MODULE_2___default()), {
                            href: primaryButton.href,
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: primaryButton.text
                        })
                    }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__/* .Button */ .$, {
                        onClick: primaryButton.onClick,
                        children: primaryButton.text
                    }),
                    secondaryButton.href ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__/* .Button */ .$, {
                        variant: "secondary",
                        asChild: true,
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)((next_link__WEBPACK_IMPORTED_MODULE_2___default()), {
                            href: secondaryButton.href,
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: secondaryButton.text
                        })
                    }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_button__WEBPACK_IMPORTED_MODULE_1__/* .Button */ .$, {
                        variant: "secondary",
                        onClick: secondaryButton.onClick,
                        children: secondaryButton.text
                    })
                ]
            })
        ]
    });
};


/***/ }),

/***/ 809391:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ usePrevious)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891616);
// packages/react/use-previous/src/usePrevious.tsx

function usePrevious(value) {
  const ref = react__WEBPACK_IMPORTED_MODULE_0__.useRef({ value, previous: value });
  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {
    if (ref.current.value !== value) {
      ref.current.previous = ref.current.value;
      ref.current.value = value;
    }
    return ref.current.previous;
  }, [value]);
}

//# sourceMappingURL=index.mjs.map


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8079,3073,7863,5069,255,9759,6626,5570,1238,2021,9069,2195,7762,1469,5294,4900,6911,2075,1659,5667,6689,2446,9726,497,4218,9325,8785,3798,92,3687,7864,8046,8235,5752,3840,9160,4660,8310,1612,4124], () => (__webpack_exec__(82601)));
module.exports = __webpack_exports__;

})();
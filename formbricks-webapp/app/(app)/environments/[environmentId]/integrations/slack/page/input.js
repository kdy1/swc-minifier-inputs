(() => {
var exports = {};
exports.id = 6948;
exports.ids = [6948];
exports.modules = {

/***/ 191043:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ 741000:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-presigned-post");

/***/ }),

/***/ 531701:
/***/ ((module) => {

"use strict";
module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ 896330:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ 560483:
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client/scripts/default-index.js");

/***/ }),

/***/ 710846:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.prod.js");

/***/ }),

/***/ 419121:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ 903295:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ 529294:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ 663033:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ 912412:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 979428:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 455511:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 594735:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 629021:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 79748:
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ 781630:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 55591:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 491645:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 321820:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 333873:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 111723:
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ 927910:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 134631:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 583997:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 379551:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 328354:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 173566:
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ 74075:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 504573:
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ 977598:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 973024:
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ 937067:
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ 344708:
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ 777030:
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ 176760:
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ 1708:
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ 157075:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ 337830:
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ 173136:
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ 257975:
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ 638522:
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ 421617:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(290735);
/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(291232);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(272914);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(240085);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
const module0 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 86397));
const module1 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 836653));
const module2 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 956791));
const module3 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module4 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module5 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 524160));
const module6 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 195335, 23));
const module7 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 544908, 23));
const module8 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 830691));
const page9 = () => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 330312));


// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        '(app)',
        {
        children: [
        'environments',
        {
        children: [
        '[environmentId]',
        {
        children: [
        'integrations',
        {
        children: [
        'slack',
        {
        children: ['__PAGE__', {}, {
          page: [page9, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/integrations/slack/page.tsx"],
          
        }]
      },
        {
        
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module8, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/layout.tsx"],
        
      }
      ]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [module5, "/Users/kdy1/projects/formbricks/apps/web/app/(app)/layout.tsx"],
'forbidden': [module6, "next/dist/client/components/forbidden-error"],
'unauthorized': [module7, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      },
        {
        'layout': [module0, "/Users/kdy1/projects/formbricks/apps/web/app/layout.tsx"],
'error': [module1, "/Users/kdy1/projects/formbricks/apps/web/app/error.tsx"],
'not-found': [module2, "/Users/kdy1/projects/formbricks/apps/web/app/not-found.tsx"],
'forbidden': [module3, "next/dist/client/components/forbidden-error"],
'unauthorized': [module4, "next/dist/client/components/unauthorized-error"],
        metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 170196))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
      }
      ]
      }.children;
const pages = ["/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/integrations/slack/page.tsx"];


const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({
    definition: {
        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/(app)/environments/[environmentId]/integrations/slack/page",
        pathname: "/environments/[environmentId]/integrations/slack",
        // The following aren't used in production.
        bundlePath: '',
        filename: '',
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 798982:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "7f11f2efac37ac84796e6cb223722dbe2e808e177f": () => (/* reexport */ services/* getResponse */.mi),
  "7f12957c3365cc2950bdc48f0118f82439eb6c23ec": () => (/* reexport */ services/* getSurvey */.Dp),
  "7f20db167926d501ff62b9525526548773c8a436d4": () => (/* reexport */ services/* isTeamPartOfOrganization */.l5),
  "7f2431fc3b8c6c124a1868f9a0b34d77983cdb9649": () => (/* reexport */ actions/* getLatestStableFbReleaseAction */.aX),
  "7f24b3d27813511aef08364975a20983e61a3dde87": () => (/* reexport */ actions/* getActiveInactiveSurveysAction */.bN),
  "7f36cf02b548a01d85112f587591e8c1e8390fa538": () => (/* reexport */ services/* isProjectPartOfOrganization */.Xj),
  "7f4f2c9c8b657cf906e9a25e65dafac6ec65967916": () => (/* reexport */ services/* getWebhook */.O0),
  "7f540889be00b7aa8c6ff1edc5cd79ece876954fd3": () => (/* reexport */ services/* getInvite */.I_),
  "7f60061b4b6be335eaa2facd1c5d8129b87f6923f4": () => (/* reexport */ services/* getActionClass */.Bx),
  "7f607ac975565ce495ac2952cf2bd35183ca9684ec": () => (/* reexport */ actions/* updateActionClassAction */.gn),
  "7f670a0537f96de8b5156e1b206124b2a990484370": () => (/* reexport */ services/* getApiKey */.CG),
  "7f74bd40a1f82de833915085152910f3ebd525b356": () => (/* reexport */ services/* getTeam */.Uo),
  "7f82763127a11eaaa934ce7fb0ffd1f148bfd60c06": () => (/* reexport */ actions/* deleteActionClassAction */.ir),
  "7fb9a3e6cbebea226c9a3678f31bfebf532ca7321e": () => (/* reexport */ services/* getResponseNote */.Wy),
  "7fbe6e4df837a51f85fd3ad80b5bb36e78f75cb9d1": () => (/* reexport */ getSlackChannelsAction),
  "7fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1": () => (/* reexport */ services/* getTag */.bH),
  "7fc6abb0838b6422ef7e81141fd6603883cd1990cf": () => (/* reexport */ services/* getDocument */.YE),
  "7fc856fe5dd5f698d2f54dacf4280d447336780427": () => (/* reexport */ services/* getLanguage */.Z0),
  "7fcca0acf42a2865cc36074217a3183c30da859d60": () => (/* reexport */ integrations_actions/* deleteIntegrationAction */.O),
  "7fcda0e6bf50febdf861015e25ebdf74068a488dde": () => (/* reexport */ services/* getContact */.bl),
  "7fcfea9518c327899180b23cb3055005ba65cdef33": () => (/* reexport */ services/* getIntegration */.rg),
  "7fdb06c584a2145e0f48be9ead409fc7f774731fde": () => (/* reexport */ services/* getEnvironment */.uc),
  "7fdcbaf3445e783557d350b55d91be1398fafca7d3": () => (/* reexport */ services/* getInsight */.zv),
  "7fe763f2c0d5f307cc75c26f23c693a54ac24a3112": () => (/* reexport */ services/* getProject */.U1),
  "7fed5614e1f1db73c72fd0b6f0b7fa07460d5789bf": () => (/* reexport */ integrations_actions/* createOrUpdateIntegrationAction */.j),
  "7ff27151c29d7402abd744ae983a2c25b016ccf26f": () => (/* reexport */ organization_actions/* createOrganizationAction */.s),
  "7ffb22c619704253744e9b5fea4eccca8b0808fb64": () => (/* reexport */ services/* getSegment */.kn)
});

// EXTERNAL MODULE: ./app/(app)/environments/[environmentId]/actions/actions.ts
var actions = __webpack_require__(933166);
// EXTERNAL MODULE: ./lib/utils/services.ts
var services = __webpack_require__(883212);
// EXTERNAL MODULE: ./modules/organization/actions.ts
var organization_actions = __webpack_require__(57841);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js
var server_reference = __webpack_require__(286055);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/app-render/encryption.js
var encryption = __webpack_require__(770767);
// EXTERNAL MODULE: ./lib/utils/action-client.ts
var action_client = __webpack_require__(308046);
// EXTERNAL MODULE: ./lib/utils/action-client-middleware.ts
var action_client_middleware = __webpack_require__(729455);
// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(440388);
// EXTERNAL MODULE: ../../node_modules/zod/lib/index.mjs
var lib = __webpack_require__(283131);
// EXTERNAL MODULE: external "@prisma/client"
var client_ = __webpack_require__(896330);
// EXTERNAL MODULE: ../../packages/types/errors.ts
var errors = __webpack_require__(207798);
// EXTERNAL MODULE: ../../packages/lib/integration/service.ts
var service = __webpack_require__(988381);
;// ../../packages/lib/slack/service.ts





const fetchChannels = async (slackIntegration)=>{
    let channels = [];
    // `nextCursor` is a pagination token returned by the Slack API. It indicates the presence of additional pages of data.
    // When `nextCursor` is not empty, it should be included in subsequent requests to fetch the next page of data.
    let nextCursor = undefined;
    do {
        const url = new URL("https://slack.com/api/users.conversations");
        url.searchParams.append("limit", "200");
        url.searchParams.append("types", "private_channel,public_channel");
        if (nextCursor) {
            url.searchParams.append("cursor", nextCursor);
        }
        const response = await fetch(url.toString(), {
            method: "GET",
            headers: {
                Authorization: `Bearer ${slackIntegration.config.key.access_token}`,
                "Content-Type": "application/x-www-form-urlencoded"
            }
        });
        if (!response.ok) {
            throw new Error("Network response was not ok");
        }
        const data = await response.json();
        if (!data.ok) {
            if (data.error === "token_expired") {
                // Temporary fix to reset integration if token rotation is enabled
                await (0,service/* deleteIntegration */.qo)(slackIntegration.id);
            }
            throw new Error(data.error);
        }
        channels = channels.concat(data.channels.map((channel)=>({
                name: channel.name,
                id: channel.id
            })));
        nextCursor = data.response_metadata?.next_cursor;
    }while (nextCursor);
    return channels;
};
const getSlackChannels = async (environmentId)=>{
    let channels = [];
    try {
        const slackIntegration = await (0,service/* getIntegrationByType */.ks)(environmentId, "slack");
        if (slackIntegration && slackIntegration.config?.key) {
            channels = await fetchChannels(slackIntegration);
        }
        return channels;
    } catch (error) {
        if (error instanceof client_.Prisma.PrismaClientKnownRequestError) {
            throw new errors/* DatabaseError */.a$("Database operation failed");
        }
        throw new errors/* UnknownError */.Bk(error);
    }
};
const writeDataToSlack = async (credentials, channelId, values, surveyName)=>{
    try {
        const [responses, questions] = values;
        let blockResponse = [
            {
                type: "section",
                text: {
                    type: "mrkdwn",
                    text: `${surveyName}\n`
                }
            },
            {
                type: "divider"
            }
        ];
        for(let i = 0; i < values[0].length; i++){
            let questionSection = {
                type: "section",
                text: {
                    type: "mrkdwn",
                    text: `*${questions[i]}*`
                }
            };
            const responseText = responses[i];
            const text = responseText.length > SLACK_MESSAGE_LIMIT ? truncateText(responseText, SLACK_MESSAGE_LIMIT) : responseText;
            let responseSection = {
                type: "section",
                text: {
                    type: "mrkdwn",
                    text: `${text}\n`
                }
            };
            blockResponse.push(questionSection, responseSection);
        }
        const response = await fetch("https://slack.com/api/chat.postMessage", {
            method: "POST",
            headers: {
                Authorization: `Bearer ${credentials.access_token}`,
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                channel: channelId,
                blocks: blockResponse
            })
        });
        if (!response.ok) {
            throw new Error("Network response was not ok");
        }
        const data = await response.json();
        if (!data.ok) {
            throw new Error(data.error);
        }
    } catch (error) {
        if (error instanceof Prisma.PrismaClientKnownRequestError) {
            throw new DatabaseError("Database operation failed");
        }
        throw error;
    }
};

// EXTERNAL MODULE: ../../packages/types/common.ts
var common = __webpack_require__(552224);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js
var action_validate = __webpack_require__(429931);
;// ./app/(app)/environments/[environmentId]/integrations/slack/actions.ts
/* __next_internal_action_entry_do_not_use__ {"7fbe6e4df837a51f85fd3ad80b5bb36e78f75cb9d1":"getSlackChannelsAction"} */ 







const ZGetSlackChannelsAction = lib.z.object({
    environmentId: common/* ZId */.i4
});
const /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ getSlackChannelsAction = action_client/* authenticatedActionClient */.D.schema(ZGetSlackChannelsAction).action(async ({ ctx, parsedInput })=>{
    await (0,action_client_middleware/* checkAuthorizationUpdated */.r)({
        userId: ctx.user.id,
        organizationId: await (0,helper/* getOrganizationIdFromEnvironmentId */.X_)(parsedInput.environmentId),
        access: [
            {
                type: "organization",
                roles: [
                    "owner",
                    "manager"
                ]
            },
            {
                type: "projectTeam",
                projectId: await (0,helper/* getProjectIdFromEnvironmentId */.DU)(parsedInput.environmentId),
                minPermission: "readWrite"
            }
        ]
    });
    return await getSlackChannels(parsedInput.environmentId);
});

(0,action_validate/* ensureServerEntryExports */.D)([
    getSlackChannelsAction
]);
(0,server_reference/* registerServerReference */.A)(getSlackChannelsAction, "7fbe6e4df837a51f85fd3ad80b5bb36e78f75cb9d1", null);

// EXTERNAL MODULE: ./app/(app)/environments/[environmentId]/integrations/actions.ts
var integrations_actions = __webpack_require__(979456);
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fapp%2F(app)%2Fenvironments%2F%5BenvironmentId%5D%2Factions%2Factions.ts%22%2C%5B%5B%227f2431fc3b8c6c124a1868f9a0b34d77983cdb9649%22%2C%22getLatestStableFbReleaseAction%22%5D%2C%5B%227f24b3d27813511aef08364975a20983e61a3dde87%22%2C%22getActiveInactiveSurveysAction%22%5D%2C%5B%227f607ac975565ce495ac2952cf2bd35183ca9684ec%22%2C%22updateActionClassAction%22%5D%2C%5B%227f82763127a11eaaa934ce7fb0ffd1f148bfd60c06%22%2C%22deleteActionClassAction%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Flib%2Futils%2Fservices.ts%22%2C%5B%5B%227f11f2efac37ac84796e6cb223722dbe2e808e177f%22%2C%22getResponse%22%5D%2C%5B%227f12957c3365cc2950bdc48f0118f82439eb6c23ec%22%2C%22getSurvey%22%5D%2C%5B%227f20db167926d501ff62b9525526548773c8a436d4%22%2C%22isTeamPartOfOrganization%22%5D%2C%5B%227f36cf02b548a01d85112f587591e8c1e8390fa538%22%2C%22isProjectPartOfOrganization%22%5D%2C%5B%227f4f2c9c8b657cf906e9a25e65dafac6ec65967916%22%2C%22getWebhook%22%5D%2C%5B%227f540889be00b7aa8c6ff1edc5cd79ece876954fd3%22%2C%22getInvite%22%5D%2C%5B%227f60061b4b6be335eaa2facd1c5d8129b87f6923f4%22%2C%22getActionClass%22%5D%2C%5B%227f670a0537f96de8b5156e1b206124b2a990484370%22%2C%22getApiKey%22%5D%2C%5B%227f74bd40a1f82de833915085152910f3ebd525b356%22%2C%22getTeam%22%5D%2C%5B%227fb9a3e6cbebea226c9a3678f31bfebf532ca7321e%22%2C%22getResponseNote%22%5D%2C%5B%227fc5117c6d27e507a6efd4e11ff01afa8b3c52f1a1%22%2C%22getTag%22%5D%2C%5B%227fc6abb0838b6422ef7e81141fd6603883cd1990cf%22%2C%22getDocument%22%5D%2C%5B%227fc856fe5dd5f698d2f54dacf4280d447336780427%22%2C%22getLanguage%22%5D%2C%5B%227fcda0e6bf50febdf861015e25ebdf74068a488dde%22%2C%22getContact%22%5D%2C%5B%227fcfea9518c327899180b23cb3055005ba65cdef33%22%2C%22getIntegration%22%5D%2C%5B%227fdb06c584a2145e0f48be9ead409fc7f774731fde%22%2C%22getEnvironment%22%5D%2C%5B%227fdcbaf3445e783557d350b55d91be1398fafca7d3%22%2C%22getInsight%22%5D%2C%5B%227fe763f2c0d5f307cc75c26f23c693a54ac24a3112%22%2C%22getProject%22%5D%2C%5B%227ffb22c619704253744e9b5fea4eccca8b0808fb64%22%2C%22getSegment%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fmodules%2Forganization%2Factions.ts%22%2C%5B%5B%227ff27151c29d7402abd744ae983a2c25b016ccf26f%22%2C%22createOrganizationAction%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fapp%2F(app)%2Fenvironments%2F%5BenvironmentId%5D%2Fintegrations%2Fslack%2Factions.ts%22%2C%5B%5B%227fbe6e4df837a51f85fd3ad80b5bb36e78f75cb9d1%22%2C%22getSlackChannelsAction%22%5D%5D%5D%2C%5B%22%2FUsers%2Fkdy1%2Fprojects%2Fformbricks%2Fapps%2Fweb%2Fapp%2F(app)%2Fenvironments%2F%5BenvironmentId%5D%2Fintegrations%2Factions.ts%22%2C%5B%5B%227fcca0acf42a2865cc36074217a3183c30da859d60%22%2C%22deleteIntegrationAction%22%5D%2C%5B%227fed5614e1f1db73c72fd0b6f0b7fa07460d5789bf%22%2C%22createOrUpdateIntegrationAction%22%5D%5D%5D%5D&__client_imported__=true!






























/***/ }),

/***/ 9338:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 785819));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 628723));


/***/ }),

/***/ 543618:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 977557));
;
Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 434131));


/***/ }),

/***/ 977557:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  SlackWrapper: () => (/* binding */ SlackWrapper)
});

// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js
var react_jsx_runtime = __webpack_require__(642725);
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js
var action_client_wrapper = __webpack_require__(308441);
;// ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7fbe6e4df837a51f85fd3ad80b5bb36e78f75cb9d1&name=getSlackChannelsAction!

const getSlackChannelsAction = /*#__PURE__*/(0,action_client_wrapper.createServerReference)("7fbe6e4df837a51f85fd3ad80b5bb36e78f75cb9d1", action_client_wrapper.callServer, undefined, action_client_wrapper.findSourceMapURL, "getSlackChannelsAction")
// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7fed5614e1f1db73c72fd0b6f0b7fa07460d5789bf&name=createOrUpdateIntegrationAction!
var next_flight_server_reference_proxy_loaderid_7fed5614e1f1db73c72fd0b6f0b7fa07460d5789bf_name_createOrUpdateIntegrationAction_ = __webpack_require__(144661);
// EXTERNAL MODULE: ./images/slacklogo.png
var slacklogo = __webpack_require__(818817);
// EXTERNAL MODULE: ./modules/ui/components/additional-integration-settings/index.tsx
var additional_integration_settings = __webpack_require__(508260);
// EXTERNAL MODULE: ./modules/ui/components/button/index.tsx
var components_button = __webpack_require__(248852);
// EXTERNAL MODULE: ./modules/ui/components/checkbox/index.tsx
var components_checkbox = __webpack_require__(879387);
// EXTERNAL MODULE: ./modules/ui/components/dropdown-selector/index.tsx
var dropdown_selector = __webpack_require__(938539);
// EXTERNAL MODULE: ./modules/ui/components/label/index.tsx
var label = __webpack_require__(61330);
// EXTERNAL MODULE: ./modules/ui/components/modal/index.tsx
var modal = __webpack_require__(383207);
// EXTERNAL MODULE: ../../node_modules/@tolgee/react/dist/tolgee-react.esm.js
var tolgee_react_esm = __webpack_require__(397674);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/circle-help.js
var circle_help = __webpack_require__(41714);
// EXTERNAL MODULE: ../../node_modules/next/dist/api/image.js
var api_image = __webpack_require__(134088);
// EXTERNAL MODULE: ../../node_modules/next/dist/client/app-dir/link.js
var app_dir_link = __webpack_require__(36888);
var link_default = /*#__PURE__*/__webpack_require__.n(app_dir_link);
// EXTERNAL MODULE: ../../node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js
var react = __webpack_require__(891616);
// EXTERNAL MODULE: ../../node_modules/react-hook-form/dist/index.esm.mjs
var index_esm = __webpack_require__(200667);
// EXTERNAL MODULE: ../../node_modules/react-hot-toast/dist/index.mjs + 1 modules
var dist = __webpack_require__(986090);
// EXTERNAL MODULE: ../../packages/lib/i18n/utils.ts
var utils = __webpack_require__(864698);
// EXTERNAL MODULE: ../../packages/lib/utils/recall.ts
var recall = __webpack_require__(654931);
;// ./app/(app)/environments/[environmentId]/integrations/slack/components/AddChannelMappingModal.tsx
/* __next_internal_client_entry_do_not_use__ AddChannelMappingModal auto */ 

















const AddChannelMappingModal = ({ environmentId, surveys, open, setOpen, channels, slackIntegration, selectedIntegration })=>{
    const { handleSubmit } = (0,index_esm/* useForm */.mN)();
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const [selectedQuestions, setSelectedQuestions] = (0,react.useState)([]);
    const [isLinkingChannel, setIsLinkingChannel] = (0,react.useState)(false);
    const [selectedSurvey, setSelectedSurvey] = (0,react.useState)(null);
    const [selectedChannel, setSelectedChannel] = (0,react.useState)(null);
    const [isDeleting, setIsDeleting] = (0,react.useState)(false);
    const [includeVariables, setIncludeVariables] = (0,react.useState)(false);
    const [includeHiddenFields, setIncludeHiddenFields] = (0,react.useState)(false);
    const [includeMetadata, setIncludeMetadata] = (0,react.useState)(false);
    const [includeCreatedAt, setIncludeCreatedAt] = (0,react.useState)(true);
    const existingIntegrationData = slackIntegration?.config?.data;
    const slackIntegrationData = {
        type: "slack",
        config: {
            key: slackIntegration?.config?.key,
            data: existingIntegrationData || []
        }
    };
    (0,react.useEffect)(()=>{
        if (selectedSurvey) {
            const questionIds = selectedSurvey.questions.map((question)=>question.id);
            if (!selectedIntegration) {
                setSelectedQuestions(questionIds);
            }
        }
    }, [
        selectedIntegration,
        selectedSurvey
    ]);
    (0,react.useEffect)(()=>{
        if (selectedIntegration) {
            setSelectedChannel({
                id: selectedIntegration.channelId,
                name: selectedIntegration.channelName
            });
            setSelectedSurvey(surveys.find((survey)=>{
                return survey.id === selectedIntegration.surveyId;
            }));
            setSelectedQuestions(selectedIntegration.questionIds);
            setIncludeVariables(!!selectedIntegration.includeVariables);
            setIncludeHiddenFields(!!selectedIntegration.includeHiddenFields);
            setIncludeMetadata(!!selectedIntegration.includeMetadata);
            setIncludeCreatedAt(!!selectedIntegration.includeCreatedAt);
            return;
        }
        resetForm();
    }, [
        selectedIntegration,
        surveys
    ]);
    const linkChannel = async ()=>{
        try {
            if (!selectedChannel) {
                throw new Error(t("environments.integrations.slack.please_select_a_channel"));
            }
            if (!selectedSurvey) {
                throw new Error(t("environments.integrations.please_select_a_survey_error"));
            }
            if (selectedQuestions.length === 0) {
                throw new Error(t("environments.integrations.select_at_least_one_question_error"));
            }
            setIsLinkingChannel(true);
            const integrationData = {
                channelId: selectedChannel.id,
                channelName: selectedChannel.name,
                surveyId: selectedSurvey.id,
                surveyName: selectedSurvey.name,
                questionIds: selectedQuestions,
                questions: selectedQuestions.length === selectedSurvey?.questions.length ? t("common.all_questions") : t("common.selected_questions"),
                createdAt: new Date(),
                includeVariables,
                includeHiddenFields,
                includeMetadata,
                includeCreatedAt
            };
            if (selectedIntegration) {
                // update action
                slackIntegrationData.config.data[selectedIntegration.index] = integrationData;
            } else {
                // create action
                slackIntegrationData.config.data.push(integrationData);
            }
            await (0,next_flight_server_reference_proxy_loaderid_7fed5614e1f1db73c72fd0b6f0b7fa07460d5789bf_name_createOrUpdateIntegrationAction_/* createOrUpdateIntegrationAction */.j)({
                environmentId,
                integrationData: slackIntegrationData
            });
            if (selectedIntegration) {
                dist/* default */.Ay.success(t("environments.integrations.integration_updated_successfully"));
            } else {
                dist/* default */.Ay.success(t("environments.integrations.integration_added_successfully"));
            }
            resetForm();
            setOpen(false);
        } catch (e) {
            dist/* default */.Ay.error(e.message);
        } finally{
            setIsLinkingChannel(false);
        }
    };
    const handleCheckboxChange = (questionId)=>{
        setSelectedQuestions((prevValues)=>prevValues.includes(questionId) ? prevValues.filter((value)=>value !== questionId) : [
                ...prevValues,
                questionId
            ]);
    };
    const setOpenWithStates = (isOpen)=>{
        setOpen(isOpen);
    };
    const resetForm = ()=>{
        setIsLinkingChannel(false);
        setSelectedChannel(null);
        setSelectedSurvey(null);
    };
    const deleteLink = async ()=>{
        slackIntegrationData.config.data.splice(selectedIntegration.index, 1);
        try {
            setIsDeleting(true);
            await (0,next_flight_server_reference_proxy_loaderid_7fed5614e1f1db73c72fd0b6f0b7fa07460d5789bf_name_createOrUpdateIntegrationAction_/* createOrUpdateIntegrationAction */.j)({
                environmentId,
                integrationData: slackIntegrationData
            });
            dist/* default */.Ay.success(t("environments.integrations.integration_removed_successfully"));
            setOpen(false);
        } catch (error) {
            dist/* default */.Ay.error(error.message);
        } finally{
            setIsDeleting(false);
        }
    };
    const hasMatchingId = (0,react.useMemo)(()=>slackIntegration.config.data.some((configData)=>{
            if (!selectedChannel) {
                return false;
            }
            return configData.channelId === selectedChannel.id && !selectedIntegration;
        }), [
        selectedChannel,
        selectedIntegration,
        slackIntegration.config.data
    ]);
    return /*#__PURE__*/ (0,react_jsx_runtime.jsx)(modal/* Modal */.a, {
        open: open,
        setOpen: setOpenWithStates,
        noPadding: true,
        closeOnOutsideClick: true,
        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
            className: "flex h-full flex-col rounded-lg",
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                    className: "rounded-t-lg bg-slate-100",
                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                        className: "flex w-full items-center justify-between p-6",
                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                            className: "flex items-center space-x-2",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: "mr-1.5 h-6 w-6 text-slate-500",
                                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(api_image["default"], {
                                        className: "w-12",
                                        src: slacklogo["default"],
                                        alt: "Slack logo"
                                    })
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "text-xl font-medium text-slate-700",
                                        children: t("environments.integrations.slack.link_slack_channel")
                                    })
                                })
                            ]
                        })
                    })
                }),
                /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("form", {
                    onSubmit: handleSubmit(linkChannel),
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                            className: "flex justify-between rounded-lg p-6",
                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "w-full space-y-4",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                className: "mb-4",
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(dropdown_selector/* DropdownSelector */.V, {
                                                        label: t("environments.integrations.slack.select_channel"),
                                                        items: channels,
                                                        selectedItem: selectedChannel,
                                                        setSelectedItem: setSelectedChannel,
                                                        disabled: channels.length === 0
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)((link_default()), {
                                                        href: "https://formbricks.com/docs/developer-docs/integrations/slack",
                                                        target: "_blank",
                                                        className: "text-xs",
                                                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(components_button/* Button */.$, {
                                                            variant: "ghost",
                                                            size: "sm",
                                                            className: "my-2",
                                                            type: "button",
                                                            children: [
                                                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)(circle_help/* default */.A, {
                                                                    className: "h-4 w-4"
                                                                }),
                                                                t("environments.integrations.slack.dont_see_your_channel")
                                                            ]
                                                        })
                                                    }),
                                                    selectedChannel && hasMatchingId && /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("p", {
                                                        className: "text-xs text-amber-700",
                                                        children: [
                                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("strong", {
                                                                children: [
                                                                    t("common.note"),
                                                                    ":"
                                                                ]
                                                            }),
                                                            " ",
                                                            t("environments.integrations.slack.already_connected_another_survey")
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                                        className: "m-1 text-xs text-slate-500",
                                                        children: channels.length === 0 && t("environments.integrations.slack.create_at_least_one_channel_error")
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(dropdown_selector/* DropdownSelector */.V, {
                                                        label: t("common.select_survey"),
                                                        items: surveys,
                                                        selectedItem: selectedSurvey,
                                                        setSelectedItem: setSelectedSurvey,
                                                        disabled: surveys.length === 0
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                                                        className: "m-1 text-xs text-slate-500",
                                                        children: surveys.length === 0 && t("environments.integrations.create_survey_warning")
                                                    })
                                                ]
                                            })
                                        ]
                                    }),
                                    selectedSurvey && /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(label/* Label */.J, {
                                                        htmlFor: "Surveys",
                                                        children: t("common.questions")
                                                    }),
                                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                                        className: "mt-1 max-h-[15vh] overflow-y-auto rounded-lg border border-slate-200",
                                                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                                            className: "grid content-center rounded-lg bg-slate-50 p-3 text-left text-sm text-slate-900",
                                                            children: (0,recall/* replaceHeadlineRecall */.uD)(selectedSurvey, "default")?.questions?.map((question)=>/*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                                                    className: "my-1 flex items-center space-x-2",
                                                                    children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("label", {
                                                                        htmlFor: question.id,
                                                                        className: "flex cursor-pointer items-center",
                                                                        children: [
                                                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_checkbox/* Checkbox */.S, {
                                                                                type: "button",
                                                                                id: question.id,
                                                                                value: question.id,
                                                                                className: "bg-white",
                                                                                checked: selectedQuestions.includes(question.id),
                                                                                onCheckedChange: ()=>{
                                                                                    handleCheckboxChange(question.id);
                                                                                }
                                                                            }),
                                                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                                                                                className: "ml-2",
                                                                                children: (0,utils/* getLocalizedValue */.bT)(question.headline, "default")
                                                                            })
                                                                        ]
                                                                    })
                                                                }, question.id))
                                                        })
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(additional_integration_settings/* AdditionalIntegrationSettings */.r, {
                                                includeVariables: includeVariables,
                                                setIncludeVariables: setIncludeVariables,
                                                includeHiddenFields: includeHiddenFields,
                                                includeMetadata: includeMetadata,
                                                setIncludeHiddenFields: setIncludeHiddenFields,
                                                setIncludeMetadata: setIncludeMetadata,
                                                includeCreatedAt: includeCreatedAt,
                                                setIncludeCreatedAt: setIncludeCreatedAt
                                            })
                                        ]
                                    })
                                ]
                            })
                        }),
                        /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                            className: "flex justify-end border-t border-slate-200 p-6",
                            children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "flex space-x-2",
                                children: [
                                    selectedIntegration ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                        type: "button",
                                        variant: "destructive",
                                        loading: isDeleting,
                                        onClick: deleteLink,
                                        children: t("common.delete")
                                    }) : /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                        type: "button",
                                        variant: "ghost",
                                        onClick: ()=>{
                                            setOpen(false);
                                            resetForm();
                                        },
                                        children: t("common.cancel")
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                                        type: "submit",
                                        loading: isLinkingChannel,
                                        children: selectedIntegration ? t("common.update") : t("environments.integrations.slack.link_channel")
                                    })
                                ]
                            })
                        })
                    ]
                })
            ]
        })
    });
};

// EXTERNAL MODULE: ../../node_modules/next/dist/build/webpack/loaders/next-flight-server-reference-proxy-loader.js?id=7fcca0acf42a2865cc36074217a3183c30da859d60&name=deleteIntegrationAction!
var next_flight_server_reference_proxy_loaderid_7fcca0acf42a2865cc36074217a3183c30da859d60_name_deleteIntegrationAction_ = __webpack_require__(304882);
// EXTERNAL MODULE: ./lib/utils/helper.ts
var helper = __webpack_require__(856763);
// EXTERNAL MODULE: ./modules/ui/components/delete-dialog/index.tsx
var delete_dialog = __webpack_require__(982234);
// EXTERNAL MODULE: ./modules/ui/components/empty-space-filler/index.tsx
var empty_space_filler = __webpack_require__(443757);
// EXTERNAL MODULE: ../../node_modules/lucide-react/dist/esm/icons/trash-2.js
var trash_2 = __webpack_require__(800087);
// EXTERNAL MODULE: ../../packages/lib/time.ts
var time = __webpack_require__(775453);
;// ./app/(app)/environments/[environmentId]/integrations/slack/components/ManageIntegration.tsx
/* __next_internal_client_entry_do_not_use__ ManageIntegration auto */ 











const ManageIntegration = ({ environment, slackIntegration, setOpenAddIntegrationModal, setIsConnected, setSelectedIntegration, refreshChannels, showReconnectButton, handleSlackAuthorization, locale })=>{
    const { t } = (0,tolgee_react_esm/* useTranslate */.WD)();
    const [isDeleteIntegrationModalOpen, setIsDeleteIntegrationModalOpen] = (0,react.useState)(false);
    const [isDeleting, setisDeleting] = (0,react.useState)(false);
    const integrationArray = slackIntegration ? slackIntegration.config.data ? slackIntegration.config.data : [] : [];
    const handleDeleteIntegration = async ()=>{
        setisDeleting(true);
        const deleteIntegrationActionResult = await (0,next_flight_server_reference_proxy_loaderid_7fcca0acf42a2865cc36074217a3183c30da859d60_name_deleteIntegrationAction_/* deleteIntegrationAction */.O)({
            integrationId: slackIntegration.id
        });
        if (deleteIntegrationActionResult?.data) {
            dist/* default */.Ay.success(t("environments.integrations.integration_removed_successfully"));
            setIsConnected(false);
        } else {
            const errorMessage = (0,helper/* getFormattedErrorMessage */.g3)(deleteIntegrationActionResult);
            dist/* default */.Ay.error(errorMessage);
        }
        setisDeleting(false);
        setIsDeleteIntegrationModalOpen(false);
    };
    const editIntegration = (index)=>{
        setSelectedIntegration({
            ...slackIntegration.config.data[index],
            index
        });
        setOpenAddIntegrationModal(true);
    };
    return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
        className: "mt-6 flex w-full flex-col items-center justify-center p-6",
        children: [
            showReconnectButton && /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                className: "mb-4 flex w-full items-center justify-between space-x-4",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("p", {
                        className: "text-amber-700",
                        children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(tolgee_react_esm.T, {
                            keyName: "environments.integrations.slack.slack_reconnect_button_description",
                            params: {
                                b: /*#__PURE__*/ (0,react_jsx_runtime.jsx)("b", {})
                            }
                        })
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                        onClick: handleSlackAuthorization,
                        variant: "secondary",
                        children: t("environments.integrations.slack.slack_reconnect_button")
                    })
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                className: "flex w-full justify-end space-x-4",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                        className: "mr-6 flex items-center",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                                className: "mr-4 h-4 w-4 rounded-full bg-green-600"
                            }),
                            /*#__PURE__*/ (0,react_jsx_runtime.jsx)("span", {
                                className: "text-slate-500",
                                children: t("environments.integrations.slack.connected_with_team", {
                                    team: slackIntegration.config.key.team?.name
                                })
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(components_button/* Button */.$, {
                        onClick: ()=>{
                            refreshChannels();
                            setSelectedIntegration(null);
                            setOpenAddIntegrationModal(true);
                        },
                        children: t("environments.integrations.slack.link_channel")
                    })
                ]
            }),
            !integrationArray || integrationArray.length === 0 ? /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                className: "mt-4 w-full",
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsx)(empty_space_filler/* EmptySpaceFiller */.y, {
                    type: "table",
                    environment: environment,
                    noWidgetRequired: true,
                    emptyMessage: t("environments.integrations.slack.connect_your_first_slack_channel")
                })
            }) : /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                className: "mt-4 flex w-full flex-col items-center justify-center",
                children: /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                    className: "mt-6 w-full rounded-lg border border-slate-200",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                            className: "grid h-12 grid-cols-8 content-center rounded-lg bg-slate-100 text-left text-sm font-semibold text-slate-900",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: "col-span-2 hidden text-center sm:block",
                                    children: t("common.survey")
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: "col-span-2 hidden text-center sm:block",
                                    children: t("environments.integrations.slack.channel_name")
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: "col-span-2 hidden text-center sm:block",
                                    children: t("common.questions")
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                    className: "col-span-2 hidden text-center sm:block",
                                    children: t("common.updated_at")
                                })
                            ]
                        }),
                        integrationArray && integrationArray.map((data, index)=>{
                            return /*#__PURE__*/ (0,react_jsx_runtime.jsxs)("div", {
                                className: "m-2 grid h-16 grid-cols-8 content-center rounded-lg text-slate-700 hover:cursor-pointer hover:bg-slate-100",
                                onClick: ()=>{
                                    editIntegration(index);
                                },
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-2 text-center",
                                        children: data.surveyName
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-2 text-center",
                                        children: data.channelName
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-2 text-center",
                                        children: data.questions
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)("div", {
                                        className: "col-span-2 text-center",
                                        children: (0,time/* timeSince */._D)(data.createdAt.toString(), locale)
                                    })
                                ]
                            }, index);
                        })
                    ]
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(components_button/* Button */.$, {
                variant: "ghost",
                onClick: ()=>setIsDeleteIntegrationModalOpen(true),
                className: "mt-4",
                children: [
                    /*#__PURE__*/ (0,react_jsx_runtime.jsx)(trash_2/* default */.A, {}),
                    t("environments.integrations.delete_integration")
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(delete_dialog/* DeleteDialog */.C, {
                open: isDeleteIntegrationModalOpen,
                setOpen: setIsDeleteIntegrationModalOpen,
                deleteWhat: t("environments.integrations.slack.slack_integration"),
                onDelete: handleDeleteIntegration,
                text: t("environments.integrations.delete_integration_confirmation"),
                isDeleting: isDeleting
            })
        ]
    });
};

;// ./app/(app)/environments/[environmentId]/integrations/slack/lib/slack.ts
const authorize = async (environmentId, apiHost)=>{
    const res = await fetch(`${apiHost}/api/v1/integrations/slack`, {
        method: "GET",
        headers: {
            environmentId
        }
    });
    if (!res.ok) {
        console.error(res.text);
        throw new Error("Could not create response");
    }
    const resJSON = await res.json();
    const authUrl = resJSON.data.authUrl;
    return authUrl;
};

// EXTERNAL MODULE: ./modules/ui/components/connect-integration/index.tsx + 2 modules
var connect_integration = __webpack_require__(684735);
;// ./app/(app)/environments/[environmentId]/integrations/slack/components/SlackWrapper.tsx
/* __next_internal_client_entry_do_not_use__ SlackWrapper auto */ 







const SlackWrapper = ({ isEnabled, environment, surveys, slackIntegration, webAppUrl, locale })=>{
    const [isConnected, setIsConnected] = (0,react.useState)(slackIntegration ? slackIntegration.config?.key : false);
    const [slackChannels, setSlackChannels] = (0,react.useState)([]);
    const [isModalOpen, setModalOpen] = (0,react.useState)(false);
    const [showReconnectButton, setShowReconnectButton] = (0,react.useState)(false);
    const [selectedIntegration, setSelectedIntegration] = (0,react.useState)(null);
    const getSlackChannels = (0,react.useCallback)(async ()=>{
        const getSlackChannelsResponse = await getSlackChannelsAction({
            environmentId: environment.id
        });
        if (getSlackChannelsResponse?.serverError && (getSlackChannelsResponse.serverError.includes("missing_scope") || getSlackChannelsResponse.serverError.includes("invalid_auth"))) {
            setShowReconnectButton(true);
        }
        if (getSlackChannelsResponse?.data) {
            setSlackChannels(getSlackChannelsResponse.data);
        }
    }, [
        environment.id
    ]);
    (0,react.useEffect)(()=>{
        getSlackChannels();
    }, [
        getSlackChannels
    ]);
    const handleSlackAuthorization = async ()=>{
        authorize(environment.id, webAppUrl).then((url)=>{
            if (url) {
                window.location.replace(url);
            }
        });
    };
    return isConnected && slackIntegration ? /*#__PURE__*/ (0,react_jsx_runtime.jsxs)(react_jsx_runtime.Fragment, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(AddChannelMappingModal, {
                environmentId: environment.id,
                surveys: surveys,
                open: isModalOpen,
                setOpen: setModalOpen,
                channels: slackChannels,
                slackIntegration: slackIntegration,
                selectedIntegration: selectedIntegration
            }),
            /*#__PURE__*/ (0,react_jsx_runtime.jsx)(ManageIntegration, {
                environment: environment,
                slackIntegration: slackIntegration,
                setOpenAddIntegrationModal: setModalOpen,
                setIsConnected: setIsConnected,
                setSelectedIntegration: setSelectedIntegration,
                refreshChannels: getSlackChannels,
                showReconnectButton: showReconnectButton,
                handleSlackAuthorization: handleSlackAuthorization,
                locale: locale
            })
        ]
    }) : /*#__PURE__*/ (0,react_jsx_runtime.jsx)(connect_integration/* ConnectIntegration */.n, {
        isEnabled: isEnabled,
        integrationType: "slack",
        handleAuthorization: handleSlackAuthorization,
        integrationLogoSrc: slacklogo["default"]
    });
};


/***/ }),

/***/ 508260:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ AdditionalIntegrationSettings)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _tolgee_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(397674);
/* harmony import */ var _checkbox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(879387);
/* harmony import */ var _label__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(61330);
/* __next_internal_client_entry_do_not_use__ AdditionalIntegrationSettings auto */ 



const AdditionalIntegrationSettings = ({ includeVariables, includeHiddenFields, includeMetadata, includeCreatedAt, setIncludeVariables, setIncludeHiddenFields, setIncludeMetadata, setIncludeCreatedAt })=>{
    const { t } = (0,_tolgee_react__WEBPACK_IMPORTED_MODULE_3__/* .useTranslate */ .WD)();
    const checkboxes = [
        {
            id: "includeCreatedAt",
            checked: includeCreatedAt,
            onChange: setIncludeCreatedAt,
            label: t("environments.integrations.include_created_at")
        },
        {
            id: "includeVariables",
            checked: includeVariables,
            onChange: setIncludeVariables,
            label: t("environments.integrations.include_variables")
        },
        {
            id: "includeHiddenFields",
            checked: includeHiddenFields,
            onChange: setIncludeHiddenFields,
            label: t("environments.integrations.include_hidden_fields")
        },
        {
            id: "includeMetadata",
            checked: includeMetadata,
            onChange: setIncludeMetadata,
            label: t("environments.integrations.include_metadata")
        }
    ];
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "mt-4",
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_label__WEBPACK_IMPORTED_MODULE_2__/* .Label */ .J, {
                htmlFor: "Surveys",
                children: t("environments.integrations.additional_settings")
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "text-sm",
                children: checkboxes.map(({ id, checked, onChange, label })=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                        className: "my-1 flex items-center space-x-2",
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label", {
                            htmlFor: id,
                            className: "flex cursor-pointer items-center",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_checkbox__WEBPACK_IMPORTED_MODULE_1__/* .Checkbox */ .S, {
                                    type: "button",
                                    id: id,
                                    value: id,
                                    className: "bg-white",
                                    checked: checked,
                                    onCheckedChange: ()=>onChange(!checked)
                                }),
                                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                    className: "ml-2 w-[30rem] truncate",
                                    children: label
                                })
                            ]
                        })
                    }, id))
            })
        ]
    });
};


/***/ }),

/***/ 879387:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ Checkbox)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _radix_ui_react_checkbox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20913);
/* harmony import */ var _barrel_optimize_names_Check_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(129170);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(891616);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(983773);
/* __next_internal_client_entry_do_not_use__ Checkbox auto */ 




const Checkbox = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_checkbox__WEBPACK_IMPORTED_MODULE_2__/* .Root */ .bL, {
        ref: ref,
        className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("peer h-5 w-5 shrink-0 rounded-md border border-slate-300 bg-white focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-700 dark:text-slate-600 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900", className),
        ...props,
        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_checkbox__WEBPACK_IMPORTED_MODULE_2__/* .Indicator */ .C1, {
            className: (0,_formbricks_lib_cn__WEBPACK_IMPORTED_MODULE_3__.cn)("flex items-center justify-center"),
            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Check_lucide_react__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A, {
                className: "h-4 w-4"
            })
        })
    }));
Checkbox.displayName = _radix_ui_react_checkbox__WEBPACK_IMPORTED_MODULE_2__/* .Root */ .bL.displayName;



/***/ }),

/***/ 938539:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ DropdownSelector)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(642725);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(556825);
/* harmony import */ var _modules_ui_components_label__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(61330);
/* harmony import */ var _barrel_optimize_names_ChevronDownIcon_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(668382);




const DropdownSelector = ({ label, items, selectedItem, setSelectedItem, disabled, placeholder })=>{
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: "col-span-1",
        children: [
            label && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_label__WEBPACK_IMPORTED_MODULE_2__/* .Label */ .J, {
                htmlFor: label,
                children: label
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "mt-1 flex items-center gap-3",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_1__/* .DropdownMenu */ .rI, {
                    children: [
                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_1__/* .DropdownMenuTrigger */ .ty, {
                            asChild: true,
                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button", {
                                disabled: disabled ? disabled : false,
                                type: "button",
                                className: "flex h-10 w-full rounded-md border border-slate-300 bg-transparent px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-500 dark:text-slate-300",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                        className: "flex w-4/5 flex-1",
                                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                            className: "w-full truncate text-left",
                                            children: selectedItem ? selectedItem.name || placeholder || label : `${placeholder || label}`
                                        })
                                    }),
                                    /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", {
                                        className: "flex h-full items-center border-l pl-3",
                                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronDownIcon_lucide_react__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A, {
                                            className: "h-4 w-4 text-slate-500"
                                        })
                                    })
                                ]
                            })
                        }),
                        !disabled && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_1__/* .DropdownMenuPortal */ .dc, {
                            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_1__/* .DropdownMenuContent */ .SQ, {
                                className: "z-50 max-h-64 min-w-[220px] max-w-96 overflow-auto rounded-md bg-white text-sm text-slate-800 shadow-md",
                                align: "start",
                                children: items.sort((a, b)=>a.name?.localeCompare(b.name)).map((item)=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_dropdown_menu__WEBPACK_IMPORTED_MODULE_1__/* .DropdownMenuItem */ ._2, {
                                        className: "flex cursor-pointer items-center p-3 hover:bg-slate-100 hover:outline-none data-[disabled]:cursor-default data-[disabled]:opacity-50",
                                        onSelect: ()=>setSelectedItem(item),
                                        children: item.name
                                    }, item.id))
                            })
                        })
                    ]
                })
            })
        ]
    });
};


/***/ }),

/***/ 547380:
/***/ ((__unused_webpack_module, exports) => {

"use strict";

Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.regionAPIs = void 0;
exports.regionAPIs = new Map([
    ["us", "https://api-iam.intercom.io"],
    ["eu", "https://api-iam.eu.intercom.io"],
    ["ap", "https://api-iam.au.intercom.io"]
]);


/***/ }),

/***/ 19061:
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";

var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.onUserEmailSupplied = exports.showConversation = exports.showTicket = exports.startChecklist = exports.startSurvey = exports.showNews = exports.showArticle = exports.startTour = exports.getVisitorId = exports.trackEvent = exports.onUnreadCountChange = exports.onShow = exports.onHide = exports.showNewMessage = exports.showMessages = exports.showSpace = exports.show = exports.hide = exports.update = exports.shutdown = exports.boot = exports.Intercom = void 0;
const constants_1 = __webpack_require__(547380);
const instance_manager_1 = __webpack_require__(40384);
const callIntercomMethod = (method, ...args) => {
    // window is undefined on server-side and this breaks our widget
    if (typeof window !== undefined && window.Intercom) {
        window.Intercom(method, ...args);
    }
    else {
        console.warn("Please ensure Intercom is setup and running on client-side!");
    }
};
const Intercom = (props) => {
    if (typeof props !== "object") {
        console.warn("Intercom initialiser called with invalid parameters.");
        return;
    }
    const { region = "us" } = props, args = __rest(props, ["region"]);
    if (typeof window !== "undefined" && !instance_manager_1.ref) {
        window.intercomSettings = Object.assign(Object.assign({}, args), { api_base: constants_1.regionAPIs.get(region) });
        (0, instance_manager_1.init)();
    }
};
exports.Intercom = Intercom;
// Public functions that can be called from outside the module
exports["default"] = exports.Intercom;
const boot = (arg) => callIntercomMethod("boot", arg);
exports.boot = boot;
const shutdown = () => callIntercomMethod("shutdown");
exports.shutdown = shutdown;
const update = (arg) => callIntercomMethod("update", arg);
exports.update = update;
const hide = () => callIntercomMethod("hide");
exports.hide = hide;
const show = () => callIntercomMethod("show");
exports.show = show;
const showSpace = (spaceName) => callIntercomMethod("showSpace", spaceName);
exports.showSpace = showSpace;
const showMessages = () => callIntercomMethod("showMessages");
exports.showMessages = showMessages;
const showNewMessage = (prePopulatedContent) => callIntercomMethod("showNewMessage", prePopulatedContent);
exports.showNewMessage = showNewMessage;
const onHide = (callback) => callIntercomMethod("onHide", callback);
exports.onHide = onHide;
const onShow = (callback) => callIntercomMethod("onShow", callback);
exports.onShow = onShow;
const onUnreadCountChange = (callback) => callIntercomMethod("onUnreadCountChange", callback);
exports.onUnreadCountChange = onUnreadCountChange;
const trackEvent = (...args) => callIntercomMethod("trackEvent", ...args);
exports.trackEvent = trackEvent;
const getVisitorId = () => callIntercomMethod("getVisitorId");
exports.getVisitorId = getVisitorId;
const startTour = (tourId) => callIntercomMethod("startTour", tourId);
exports.startTour = startTour;
const showArticle = (articleId) => callIntercomMethod("showArticle", articleId);
exports.showArticle = showArticle;
const showNews = (newsItemId) => callIntercomMethod("showNews", newsItemId);
exports.showNews = showNews;
const startSurvey = (surveyId) => callIntercomMethod("startSurvey", surveyId);
exports.startSurvey = startSurvey;
const startChecklist = (checklistId) => callIntercomMethod("startChecklist", checklistId);
exports.startChecklist = startChecklist;
const showTicket = (ticketId) => callIntercomMethod("showTicket", ticketId);
exports.showTicket = showTicket;
const showConversation = (conversationId) => callIntercomMethod("showConversation", conversationId);
exports.showConversation = showConversation;
const onUserEmailSupplied = (callback) => callIntercomMethod("onUserEmailSupplied", callback);
exports.onUserEmailSupplied = onUserEmailSupplied;


/***/ }),

/***/ 40384:
/***/ (function(__unused_webpack_module, exports) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.ref = exports.init = void 0;
const scriptElementId = "_intercom_npm_loader";
// This holds a queue of commands to be passed to the messenger widget API after it is added to the page
const queueHolder = function () {
    queueHolder.loaderQueue(arguments);
};
queueHolder.q = [];
queueHolder.loaderQueue = function (args) {
    queueHolder.q.push(args);
};
const addWidgetToPage = function () {
    var _a, _b;
    var d = document;
    if (d.getElementById(scriptElementId)) {
        // script is already in DOM
        return;
    }
    var s = d.createElement("script");
    s.type = "text/javascript";
    s.async = true;
    s.id = scriptElementId;
    s.src =
        "https://widget.intercom.io/widget/" + ((_a = window.intercomSettings) === null || _a === void 0 ? void 0 : _a.app_id);
    var x = d.getElementsByTagName("script")[0];
    (_b = x.parentNode) === null || _b === void 0 ? void 0 : _b.insertBefore(s, x);
};
const isDocumentReady = () => document.readyState === "complete" || document.readyState === "interactive";
const init = () => __awaiter(void 0, void 0, void 0, function* () {
    var w = window;
    var ic = w.Intercom;
    if (w.intercomSettings) {
        w.intercomSettings.installation_type = "npm-package";
    }
    if (typeof ic === "function") {
        ic("reattach_activator");
        ic("update", w.intercomSettings);
    }
    else {
        w.Intercom = queueHolder;
        if (isDocumentReady()) {
            addWidgetToPage();
        }
        else {
            document.addEventListener("readystatechange", function () {
                if (isDocumentReady()) {
                    addWidgetToPage();
                }
            });
            if (w.attachEvent) {
                w.attachEvent("onload", addWidgetToPage);
            }
            else {
                w.addEventListener("load", addWidgetToPage, false);
            }
        }
    }
});
exports.init = init;
exports.ref = undefined;


/***/ }),

/***/ 620394:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ArrowUpRight)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const ArrowUpRight = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("ArrowUpRight", [
    [
        "path",
        {
            d: "M7 7h10v10",
            key: "1tivn9"
        }
    ],
    [
        "path",
        {
            d: "M7 17 17 7",
            key: "1vkiza"
        }
    ]
]);
 //# sourceMappingURL=arrow-up-right.js.map


/***/ }),

/***/ 178741:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Key)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Key = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Key", [
    [
        "path",
        {
            d: "m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",
            key: "g0fldk"
        }
    ],
    [
        "path",
        {
            d: "m21 2-9.6 9.6",
            key: "1j0ho8"
        }
    ],
    [
        "circle",
        {
            cx: "7.5",
            cy: "15.5",
            r: "5.5",
            key: "yqb3hr"
        }
    ]
]);
 //# sourceMappingURL=key.js.map


/***/ }),

/***/ 467935:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ TriangleAlert)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const TriangleAlert = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("TriangleAlert", [
    [
        "path",
        {
            d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",
            key: "wmoenq"
        }
    ],
    [
        "path",
        {
            d: "M12 9v4",
            key: "juzpu7"
        }
    ],
    [
        "path",
        {
            d: "M12 17h.01",
            key: "p32p05"
        }
    ]
]);
 //# sourceMappingURL=triangle-alert.js.map


/***/ }),

/***/ 969614:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Users)
/* harmony export */ });
/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58303);
/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ 
const Users = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("Users", [
    [
        "path",
        {
            d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",
            key: "1yyitq"
        }
    ],
    [
        "circle",
        {
            cx: "9",
            cy: "7",
            r: "4",
            key: "nufk8"
        }
    ],
    [
        "path",
        {
            d: "M22 21v-2a4 4 0 0 0-3-3.87",
            key: "kshegd"
        }
    ],
    [
        "path",
        {
            d: "M16 3.13a4 4 0 0 1 0 7.75",
            key: "1da9ce"
        }
    ]
]);
 //# sourceMappingURL=users.js.map


/***/ }),

/***/ 785819:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SlackWrapper: () => (/* binding */ SlackWrapper)
/* harmony export */ });
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(672771);
/* harmony import */ var react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__);

const SlackWrapper = (0,react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(
function() { throw new Error("Attempted to call SlackWrapper() from the server but SlackWrapper is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component."); },
"/Users/kdy1/projects/formbricks/apps/web/app/(app)/environments/[environmentId]/integrations/slack/components/SlackWrapper.tsx",
"SlackWrapper",
);

/***/ }),

/***/ 330312:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891069);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _app_app_environments_environmentId_integrations_slack_components_SlackWrapper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(785819);
/* harmony import */ var _modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(136015);
/* harmony import */ var _modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(389846);
/* harmony import */ var _modules_ee_teams_utils_teams__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(596379);
/* harmony import */ var _modules_ui_components_go_back_button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(628723);
/* harmony import */ var _modules_ui_components_page_content_wrapper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(746219);
/* harmony import */ var _modules_ui_components_page_header__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(109053);
/* harmony import */ var _tolgee_server__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(186184);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(963302);
/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(145796);
/* harmony import */ var _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(836919);
/* harmony import */ var _formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(32135);
/* harmony import */ var _formbricks_lib_integration_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(43684);
/* harmony import */ var _formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(377968);
/* harmony import */ var _formbricks_lib_membership_utils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(159570);
/* harmony import */ var _formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(529987);
/* harmony import */ var _formbricks_lib_survey_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(222118);
/* harmony import */ var _formbricks_lib_utils_locale__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(615572);



















const Page = async (props)=>{
    const params = await props.params;
    const isEnabled = !!(_formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_11__/* .SLACK_CLIENT_ID */ .jH && _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_11__/* .SLACK_CLIENT_SECRET */ .K8);
    const t = await (0,_tolgee_server__WEBPACK_IMPORTED_MODULE_8__/* .getTranslate */ .r)();
    const [session, surveys, slackIntegration, environment] = await Promise.all([
        (0,next_auth__WEBPACK_IMPORTED_MODULE_9__.getServerSession)(_modules_auth_lib_authOptions__WEBPACK_IMPORTED_MODULE_2__/* .authOptions */ .N),
        (0,_formbricks_lib_survey_service__WEBPACK_IMPORTED_MODULE_12__/* .getSurveys */ .k_)(params.environmentId),
        (0,_formbricks_lib_integration_service__WEBPACK_IMPORTED_MODULE_13__/* .getIntegrationByType */ .ks)(params.environmentId, "slack"),
        (0,_formbricks_lib_environment_service__WEBPACK_IMPORTED_MODULE_14__/* .getEnvironment */ .uc)(params.environmentId)
    ]);
    if (!session) {
        throw new Error(t("common.session_not_found"));
    }
    if (!environment) {
        throw new Error(t("common.environment_not_found"));
    }
    const project = await (0,_formbricks_lib_project_service__WEBPACK_IMPORTED_MODULE_15__/* .getProjectByEnvironmentId */ .bq)(params.environmentId);
    if (!project) {
        throw new Error(t("common.project_not_found"));
    }
    const locale = await (0,_formbricks_lib_utils_locale__WEBPACK_IMPORTED_MODULE_16__/* .findMatchingLocale */ .$)();
    const currentUserMembership = await (0,_formbricks_lib_membership_service__WEBPACK_IMPORTED_MODULE_17__/* .getMembershipByUserIdOrganizationId */ .Y)(session?.user.id, project.organizationId);
    const { isMember } = (0,_formbricks_lib_membership_utils__WEBPACK_IMPORTED_MODULE_18__/* .getAccessFlags */ .c)(currentUserMembership?.role);
    const projectPermission = await (0,_modules_ee_teams_lib_roles__WEBPACK_IMPORTED_MODULE_3__/* .getProjectPermissionByUserId */ ._)(session?.user.id, environment?.projectId);
    const { hasReadAccess } = (0,_modules_ee_teams_utils_teams__WEBPACK_IMPORTED_MODULE_4__/* .getTeamPermissionFlags */ .od)(projectPermission);
    const isReadOnly = isMember && hasReadAccess;
    if (isReadOnly) {
        (0,next_navigation__WEBPACK_IMPORTED_MODULE_10__.redirect)("./");
    }
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_modules_ui_components_page_content_wrapper__WEBPACK_IMPORTED_MODULE_6__/* .PageContentWrapper */ .s, {
        children: [
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_go_back_button__WEBPACK_IMPORTED_MODULE_5__.GoBackButton, {
                url: `${_formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_11__/* .WEBAPP_URL */ .YW}/environments/${params.environmentId}/integrations`
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_modules_ui_components_page_header__WEBPACK_IMPORTED_MODULE_7__/* .PageHeader */ .z, {
                pageTitle: t("environments.integrations.slack.slack_integration")
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", {
                className: "h-[75vh] w-full",
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_app_app_environments_environmentId_integrations_slack_components_SlackWrapper__WEBPACK_IMPORTED_MODULE_1__.SlackWrapper, {
                    isEnabled: isEnabled,
                    environment: environment,
                    surveys: surveys,
                    slackIntegration: slackIntegration,
                    webAppUrl: _formbricks_lib_constants__WEBPACK_IMPORTED_MODULE_11__/* .WEBAPP_URL */ .YW,
                    locale: locale
                })
            })
        ]
    });
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Page);


/***/ }),

/***/ 818817:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({"src":"/_next/static/media/slacklogo.9a0a39d4.png","height":68,"width":70,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEUxqcjrsi4wvYEntX8utX3fH1oltHu/g2L0sizrti0yx/PmIF3kGlc2xPA2w+4uzvrnGl8vz/0wvH3psi/9sibzwSw4yvXeE13uEEwktoHwAk3tE07/vyIYtXowzPZqSfHLAAAAH3RSTlMB6uWE19OqCNGDzuKDhOxxw6fEy5+t2qeqfmyCaWjIwHqDNQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAEFJREFUeJwVwQcSgCAQALGlHk2wd/3/Mx0TYB285de1UQukWrtRG8vwpvaYw7OX67xDmHEl91GpCST3MYoAblsCfFy1Apz1PGLuAAAAAElFTkSuQmCC","blurWidth":8,"blurHeight":8});

/***/ }),

/***/ 20913:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C1: () => (/* binding */ Indicator),
/* harmony export */   bL: () => (/* binding */ Root)
/* harmony export */ });
/* unused harmony exports Checkbox, CheckboxIndicator, createCheckboxScope */
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891616);
/* harmony import */ var _radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(730613);
/* harmony import */ var _radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(176235);
/* harmony import */ var _radix_ui_primitive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(763095);
/* harmony import */ var _radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(409689);
/* harmony import */ var _radix_ui_react_use_previous__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(809391);
/* harmony import */ var _radix_ui_react_use_size__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(525611);
/* harmony import */ var _radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(602397);
/* harmony import */ var _radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(832713);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(642725);
/* __next_internal_client_entry_do_not_use__ Checkbox,CheckboxIndicator,Indicator,Root,createCheckboxScope auto */ // packages/react/checkbox/src/Checkbox.tsx










var CHECKBOX_NAME = "Checkbox";
var [createCheckboxContext, createCheckboxScope] = (0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__/* .createContextScope */ .A)(CHECKBOX_NAME);
var [CheckboxProvider, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);
var Checkbox = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props, forwardedRef)=>{
    const { __scopeCheckbox, name, checked: checkedProp, defaultChecked, required, disabled, value = "on", onCheckedChange, form, ...checkboxProps } = props;
    const [button, setButton] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);
    const composedRefs = (0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_3__/* .useComposedRefs */ .s)(forwardedRef, (node)=>setButton(node));
    const hasConsumerStoppedPropagationRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false);
    const isFormControl = button ? form || !!button.closest("form") : true;
    const [checked = false, setChecked] = (0,_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__/* .useControllableState */ .i)({
        prop: checkedProp,
        defaultProp: defaultChecked,
        onChange: onCheckedChange
    });
    const initialCheckedStateRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(checked);
    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{
        const form2 = button?.form;
        if (form2) {
            const reset = ()=>setChecked(initialCheckedStateRef.current);
            form2.addEventListener("reset", reset);
            return ()=>form2.removeEventListener("reset", reset);
        }
    }, [
        button,
        setChecked
    ]);
    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(CheckboxProvider, {
        scope: __scopeCheckbox,
        state: checked,
        disabled,
        children: [
            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_5__/* .Primitive */ .sG.button, {
                type: "button",
                role: "checkbox",
                "aria-checked": isIndeterminate(checked) ? "mixed" : checked,
                "aria-required": required,
                "data-state": getState(checked),
                "data-disabled": disabled ? "" : void 0,
                disabled,
                value,
                ...checkboxProps,
                ref: composedRefs,
                onKeyDown: (0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_6__/* .composeEventHandlers */ .m)(props.onKeyDown, (event)=>{
                    if (event.key === "Enter") event.preventDefault();
                }),
                onClick: (0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_6__/* .composeEventHandlers */ .m)(props.onClick, (event)=>{
                    setChecked((prevChecked)=>isIndeterminate(prevChecked) ? true : !prevChecked);
                    if (isFormControl) {
                        hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();
                        if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();
                    }
                })
            }),
            isFormControl && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(BubbleInput, {
                control: button,
                bubbles: !hasConsumerStoppedPropagationRef.current,
                name,
                value,
                checked,
                required,
                disabled,
                form,
                style: {
                    transform: "translateX(-100%)"
                },
                defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked
            })
        ]
    });
});
Checkbox.displayName = CHECKBOX_NAME;
var INDICATOR_NAME = "CheckboxIndicator";
var CheckboxIndicator = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props, forwardedRef)=>{
    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;
    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);
    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_presence__WEBPACK_IMPORTED_MODULE_7__/* .Presence */ .C, {
        present: forceMount || isIndeterminate(context.state) || context.state === true,
        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_5__/* .Primitive */ .sG.span, {
            "data-state": getState(context.state),
            "data-disabled": context.disabled ? "" : void 0,
            ...indicatorProps,
            ref: forwardedRef,
            style: {
                pointerEvents: "none",
                ...props.style
            }
        })
    });
});
CheckboxIndicator.displayName = INDICATOR_NAME;
var BubbleInput = (props)=>{
    const { control, checked, bubbles = true, defaultChecked, ...inputProps } = props;
    const ref = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);
    const prevChecked = (0,_radix_ui_react_use_previous__WEBPACK_IMPORTED_MODULE_8__/* .usePrevious */ .Z)(checked);
    const controlSize = (0,_radix_ui_react_use_size__WEBPACK_IMPORTED_MODULE_9__/* .useSize */ .X)(control);
    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{
        const input = ref.current;
        const inputProto = window.HTMLInputElement.prototype;
        const descriptor = Object.getOwnPropertyDescriptor(inputProto, "checked");
        const setChecked = descriptor.set;
        if (prevChecked !== checked && setChecked) {
            const event = new Event("click", {
                bubbles
            });
            input.indeterminate = isIndeterminate(checked);
            setChecked.call(input, isIndeterminate(checked) ? false : checked);
            input.dispatchEvent(event);
        }
    }, [
        prevChecked,
        checked,
        bubbles
    ]);
    const defaultCheckedRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(isIndeterminate(checked) ? false : checked);
    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input", {
        type: "checkbox",
        "aria-hidden": true,
        defaultChecked: defaultChecked ?? defaultCheckedRef.current,
        ...inputProps,
        tabIndex: -1,
        ref,
        style: {
            ...props.style,
            ...controlSize,
            position: "absolute",
            pointerEvents: "none",
            opacity: 0,
            margin: 0
        }
    });
};
function isIndeterminate(checked) {
    return checked === "indeterminate";
}
function getState(checked) {
    return isIndeterminate(checked) ? "indeterminate" : checked ? "checked" : "unchecked";
}
var Root = Checkbox;
var Indicator = CheckboxIndicator;
 //# sourceMappingURL=index.mjs.map


/***/ }),

/***/ 635276:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   bL: () => (/* binding */ Root),
/* harmony export */   zi: () => (/* binding */ Thumb)
/* harmony export */ });
/* unused harmony exports Switch, SwitchThumb, createSwitchScope */
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(891616);
/* harmony import */ var _radix_ui_primitive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(763095);
/* harmony import */ var _radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(730613);
/* harmony import */ var _radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(176235);
/* harmony import */ var _radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(409689);
/* harmony import */ var _radix_ui_react_use_previous__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(809391);
/* harmony import */ var _radix_ui_react_use_size__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(525611);
/* harmony import */ var _radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(832713);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(642725);
/* __next_internal_client_entry_do_not_use__ Root,Switch,SwitchThumb,Thumb,createSwitchScope auto */ // packages/react/switch/src/Switch.tsx









var SWITCH_NAME = "Switch";
var [createSwitchContext, createSwitchScope] = (0,_radix_ui_react_context__WEBPACK_IMPORTED_MODULE_2__/* .createContextScope */ .A)(SWITCH_NAME);
var [SwitchProvider, useSwitchContext] = createSwitchContext(SWITCH_NAME);
var Switch = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props, forwardedRef)=>{
    const { __scopeSwitch, name, checked: checkedProp, defaultChecked, required, disabled, value = "on", onCheckedChange, form, ...switchProps } = props;
    const [button, setButton] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);
    const composedRefs = (0,_radix_ui_react_compose_refs__WEBPACK_IMPORTED_MODULE_3__/* .useComposedRefs */ .s)(forwardedRef, (node)=>setButton(node));
    const hasConsumerStoppedPropagationRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false);
    const isFormControl = button ? form || !!button.closest("form") : true;
    const [checked = false, setChecked] = (0,_radix_ui_react_use_controllable_state__WEBPACK_IMPORTED_MODULE_4__/* .useControllableState */ .i)({
        prop: checkedProp,
        defaultProp: defaultChecked,
        onChange: onCheckedChange
    });
    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(SwitchProvider, {
        scope: __scopeSwitch,
        checked,
        disabled,
        children: [
            /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_5__/* .Primitive */ .sG.button, {
                type: "button",
                role: "switch",
                "aria-checked": checked,
                "aria-required": required,
                "data-state": getState(checked),
                "data-disabled": disabled ? "" : void 0,
                disabled,
                value,
                ...switchProps,
                ref: composedRefs,
                onClick: (0,_radix_ui_primitive__WEBPACK_IMPORTED_MODULE_6__/* .composeEventHandlers */ .m)(props.onClick, (event)=>{
                    setChecked((prevChecked)=>!prevChecked);
                    if (isFormControl) {
                        hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();
                        if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();
                    }
                })
            }),
            isFormControl && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(BubbleInput, {
                control: button,
                bubbles: !hasConsumerStoppedPropagationRef.current,
                name,
                value,
                checked,
                required,
                disabled,
                form,
                style: {
                    transform: "translateX(-100%)"
                }
            })
        ]
    });
});
Switch.displayName = SWITCH_NAME;
var THUMB_NAME = "SwitchThumb";
var SwitchThumb = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((props, forwardedRef)=>{
    const { __scopeSwitch, ...thumbProps } = props;
    const context = useSwitchContext(THUMB_NAME, __scopeSwitch);
    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_radix_ui_react_primitive__WEBPACK_IMPORTED_MODULE_5__/* .Primitive */ .sG.span, {
        "data-state": getState(context.checked),
        "data-disabled": context.disabled ? "" : void 0,
        ...thumbProps,
        ref: forwardedRef
    });
});
SwitchThumb.displayName = THUMB_NAME;
var BubbleInput = (props)=>{
    const { control, checked, bubbles = true, ...inputProps } = props;
    const ref = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);
    const prevChecked = (0,_radix_ui_react_use_previous__WEBPACK_IMPORTED_MODULE_7__/* .usePrevious */ .Z)(checked);
    const controlSize = (0,_radix_ui_react_use_size__WEBPACK_IMPORTED_MODULE_8__/* .useSize */ .X)(control);
    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{
        const input = ref.current;
        const inputProto = window.HTMLInputElement.prototype;
        const descriptor = Object.getOwnPropertyDescriptor(inputProto, "checked");
        const setChecked = descriptor.set;
        if (prevChecked !== checked && setChecked) {
            const event = new Event("click", {
                bubbles
            });
            setChecked.call(input, checked);
            input.dispatchEvent(event);
        }
    }, [
        prevChecked,
        checked,
        bubbles
    ]);
    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input", {
        type: "checkbox",
        "aria-hidden": true,
        defaultChecked: checked,
        ...inputProps,
        tabIndex: -1,
        ref,
        style: {
            ...props.style,
            ...controlSize,
            position: "absolute",
            pointerEvents: "none",
            opacity: 0,
            margin: 0
        }
    });
};
function getState(checked) {
    return checked ? "checked" : "unchecked";
}
var Root = Switch;
var Thumb = SwitchThumb;
 //# sourceMappingURL=index.mjs.map


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8079,3073,7863,5069,255,9759,6626,5570,1238,2021,9069,2195,7762,1469,5294,4900,6911,2075,1659,5667,6689,2446,9726,497,4218,9325,8785,8728,9398,3798,881,5604,9103,3687,7864,8046,8235,5752,3840,9160,4660,5863,8310,1612,7043,7823], () => (__webpack_exec__(421617)));
module.exports = __webpack_exports__;

})();